<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE book [
<!ENTITY % BOOK_ENTITIES SYSTEM "master.ent">
%BOOK_ENTITIES;
<!ENTITY % sgml.features "IGNORE">
<!ENTITY % xml.features "INCLUDE">
<!ENTITY % DOCBOOK_ENTS PUBLIC "-//OASIS//ENTITIES DocBook Character Entities V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/dbcentx.mod">
%DOCBOOK_ENTS;
]>
<book version="5.0" xml:lang="en-US" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
	<?asciidoc-toc maxdepth="3"?><?asciidoc-numbered ?>
	<info>
		<title>Installing and using the Migration Toolkit for Virtualization</title>
		<subtitle>Migrating from VMware vSphere or Red Hat Virtualization to Red Hat OpenShift Virtualization</subtitle>
		 <date>2025-09-16</date>
		<productname>Migration Toolkit for Virtualization</productname>
		<productnumber>2.9</productnumber>
		<abstract>
			<para>
				The Migration Toolkit for Virtualization (MTV) enables you to migrate virtual machines from VMware vSphere, Red Hat Virtualization, or OpenStack to OpenShift Virtualization running on Red Hat OpenShift.
			</para>
		</abstract>
		<xi:include href="Author_Group.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
		<xi:include href="Common_Content/Legal_Notice.xml" xmlns:xi="http://www.w3.org/2001/XInclude" />
	</info>
	<chapter xml:id="about-mtv_mtv">
		<title>About the Migration Toolkit for Virtualization</title>
		<simpara role="_abstract">
			You can use the Migration Toolkit for Virtualization (MTV) to migrate virtual machines (VMs) from the following source providers to OpenShift Virtualization destination providers:
		</simpara>
		<itemizedlist>
			<listitem>
				<simpara>
					VMware vSphere
				</simpara>
			</listitem>
			<listitem>
				<simpara>
					Red Hat Virtualization (RHV)
				</simpara>
			</listitem>
			<listitem>
				<simpara>
					OpenStack
				</simpara>
			</listitem>
			<listitem>
				<simpara>
					Open Virtual Appliances (OVAs) that were created by VMware vSphere
				</simpara>
			</listitem>
			<listitem>
				<simpara>
					Remote OpenShift Virtualization clusters
				</simpara>
			</listitem>
		</itemizedlist>
	</chapter>
	<chapter xml:id="mtv-cold-warm-migration_mtv">
		<title>Cold migration and warm migration in MTV</title>
		<simpara role="_abstract">
			Migration Toolkit for Virtualization (MTV) supports two types of migration, cold and warm.
		</simpara>
		<simpara>
			Cold migration is when a powered <emphasis role="strong"><emphasis>off</emphasis></emphasis> virtual machine (VM) is migrated to a separate host. The VM is powered off, and there is no need for common shared storage.
		</simpara>
		<simpara>
			Warm migration is when a powered <emphasis role="strong"><emphasis>on</emphasis></emphasis> VM is migrated to a separate host. A source host state is cloned to the destination host.
		</simpara>
		<section xml:id="mtv-cold-warm-migration-precopy_mtv">
			<title>Warm migration precopy stage</title>
			<orderedlist numeration="arabic">
				<listitem>
					<simpara>
						Create an initial snapshot of running VM disks.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Copy first snapshot to target: full-disk transfer, the largest amount of data copied. It takes more time to complete.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Copy deltas: changed data, copying only data that has changed since the last snapshot was taken. It takes less time to complete.
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Create a new snapshot.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Copy the delta between the previous snapshot and the new snapshot.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Schedule the next snapshot, configurable by default, one hour after the last snapshot finished.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						An arbitrary number of deltas can be copied.
					</simpara>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="mtv-cold-warm-migration-cutover_mtv">
			<title>Warm migration cutover stage</title>
			<orderedlist numeration="arabic">
				<listitem>
					<simpara>
						Scheduled time to finalize warm migration
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Shut down the source VM.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Copy the final snapshot delta to the target.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Continue in the same way as cold migration
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Guest conversion
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Starting target VM (optional)
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="mtv-migration-speed-comparison_mtv">
			<title>Migration speed comparison</title>
			<simpara role="_abstract">
				Comparing the migration speeds of cold and warm migrations, you can observe that:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						The observed speeds for the warm migration single disk transfer and disk conversion are approximately the same as for the cold migration.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The benefit of warm migration is that the transfer of the snapshot happens in the background while the VM is powered <emphasis role="strong"><emphasis>on</emphasis></emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The default snapshot time is taken every 60 minutes. If VMs change substantially, more data needs to be transferred than in cold migration when the VM is powered <emphasis role="strong"><emphasis>off</emphasis></emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The cutover time, meaning the shutdown of the VM and last snapshot transfer, depends on how much the VM has changed since the last snapshot.
					</simpara>
				</listitem>
			</itemizedlist>
		</section>
		<section xml:id="about-cold-warm-migration_mtv">
			<title>About cold and warm migration</title>
			<simpara role="_abstract">
				Migration Toolkit for Virtualization (MTV) supports cold and warm migration as follows:
			</simpara>
			<simpara>
				MTV supports cold migration from these source providers:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						VMware vSphere
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Red Hat Virtualization (RHV)
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						OpenStack
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Open Virtual Appliances (OVAs) that were created by VMware vSphere
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Remote OpenShift Virtualization clusters
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				MTV supports warm migration from these source providers: * VMware vSphere * Red Hat Virtualization
			</simpara>
			<section xml:id="status-vms-cold-migration_mtv">
				<title>Power status of virtual machines during cold migrations</title>
				<simpara role="_abstract">
					Cold migration is the default migration type. During cold migrations, the source virtual machines are shut down while the data is copied.
				</simpara>
				<note>
					<simpara>
						VMware only: In cold migrations, in situations in which a package manager cannot be used during the migration, MTV does not install the <literal>qemu-guest-agent</literal> daemon on the migrated VMs. This has some impact on the functionality of the migrated VMs, but overall, they are still expected to function.
					</simpara>
					<simpara>
						To enable MTV to automatically install <literal>qemu-guest-agent</literal> on the migrated VMs, ensure that your package manager can install the daemon during the first boot of the VM after migration.
					</simpara>
					<simpara>
						If that is not possible, use your preferred automated or manual procedure to install <literal>qemu-guest-agent</literal> manually.
					</simpara>
				</note>
			</section>
			<section xml:id="status-vms-warm-migration_mtv">
				<title>Power status of virtual machines during warm migrations</title>
				<simpara role="_abstract">
					During warm migrations, most of the data is copied during the <emphasis>precopy</emphasis> stage while the source virtual machines (VMs) are running.
				</simpara>
				<simpara>
					Then the VMs are shut down, and the remaining data is copied during the <emphasis>cutover</emphasis> stage.
				</simpara>
				<section xml:id="status-vms-warm-migration-precopy_mtv">
					<title>Precopy stage</title>
					<simpara>
						The VMs are not shut down during the precopy stage.
					</simpara>
					<simpara>
						The VM disks are copied incrementally by using <link xlink:href="https://kb.vmware.com/s/article/1020128">changed block tracking (CBT)</link> snapshots. The snapshots are created at one-hour intervals by default. You can change the snapshot interval by updating the <literal>forklift-controller</literal> deployment.
					</simpara>
					<important>
						<simpara>
							You must enable CBT for each source VM and each VM disk.
						</simpara>
						<simpara>
							A VM can support up to 28 CBT snapshots. If the source VM has too many CBT snapshots and the <literal>Migration Controller</literal> service is not able to create a new snapshot, warm migration might fail. The <literal>Migration Controller</literal> service deletes each snapshot when the snapshot is no longer required.
						</simpara>
					</important>
					<simpara>
						The precopy stage runs until the cutover stage is started manually or is scheduled to start.
					</simpara>
					<simpara xml:id="status-vms-warm-migration-cutover_mtv">
						==Cutover stage
					</simpara>
					<simpara>
						The VMs are shut down during the cutover stage, and the remaining data is migrated. Data stored in RAM is not migrated.
					</simpara>
					<simpara>
						You can start the cutover stage manually by using the MTV console, or you can schedule a cutover time in the <literal>Migration</literal> manifest.
					</simpara>
				</section>
			</section>
			<section xml:id="advantages-disadvantages-cold-warm-migrations">
				<title>Advantages and disadvantages of cold and warm migrations</title>
				<simpara role="_abstract">
					The table that follows offers a more detailed description of the advantages and disadvantages of cold migration and warm migration. It assumes that you have installed Red Hat Enterprise Linux (RHEL) 9 on the Red Hat OpenShift platform on which you installed MTV:
				</simpara>
				<table colsep="1" frame="all" rowsep="1">
					<title>Advantages and disadvantages of cold and warm migrations</title>
					<tgroup cols="3">
						<colspec colname="col_1" colwidth="33*"></colspec>
						<colspec colname="col_2" colwidth="33*"></colspec>
						<colspec colname="col_3" colwidth="33*"></colspec>
						<thead>
							<row>
								<entry align="left" valign="top"></entry>
								<entry align="left" valign="top"><emphasis role="strong">Cold migration</emphasis></entry>
								<entry align="left" valign="top"><emphasis role="strong">Warm migration</emphasis></entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<emphasis role="strong">Duration</emphasis>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Correlates to the amount of data on the disks. Each block is copied once.
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Correlates to the amount of data on the disks and VM utilization. Blocks may be copied multiple times.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<emphasis role="strong">Fail fast</emphasis>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Convert and then transfer. Each VM is converted to be compatible with OpenShift and, if the conversion is successful, the VM is transferred. If a VM cannot be converted, the migration fails immediately.
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Transfer and then convert. For each VM, MTV creates a snapshot and transfers it to Red Hat OpenShift. When you start the cutover, MTV creates the last snapshot, transfers it, and then converts the VM.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<emphasis role="strong">Tools</emphasis>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									<literal>virt-v2v</literal> (Red Hat Enterprise Linux 9), used to convert virtual machines from a foreign hypervisor to run on Kernel-based Virtual Machines (KVMs).
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Containerized Data Importer (CDI), a persistent storage management add-on, and <literal>virt-v2v</literal> (Red Hat Enterprise Linux 9)
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<emphasis role="strong">Data transferred</emphasis>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Approximate sum of all disks
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Approximate sum of all disks and VM utilization
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<emphasis role="strong">VM downtime</emphasis>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									High: The VMs are shut down, and the disks are transferred.
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Low: Disks are transferred in the background. The VMs are shut down during the cutover stage, and the remaining data is migrated. Data stored in RAM is not migrated.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<emphasis role="strong">Parallelism</emphasis>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Disks are transferred sequentially for each VM. For remote migration, disks are transferred in parallel. <footnote xml:id="footnote1">
									<simpara>
										Remote migration: Target environment that does not have MTV installed. Migration to a remote environment using CDI.
									</simpara>
									</footnote>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Disks are transferred in parallel by different pods.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<emphasis role="strong">Connection use</emphasis>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Keeps the connection to the Source only during the disk transfer.
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Keeps the connection to the Source during the disk transfer, but the connection is released between snapshots.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<emphasis role="strong">Tools</emphasis>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									MTV only.
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									MTV and CDI from OpenShift Virtualization.
								</simpara>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
				<note>
					<simpara>
						The preceding table describes the situation for VMs that are running because the main benefit of warm migration is the reduced downtime, and there is no reason to initiate warm migration for VMs that are down. However, performing warm migration for VMs that are down is not the same as cold migration, even when MTV uses <literal>virt-v2v</literal> and RHEL 9. For VMs that are down, MTV transfers the disks using CDI, unlike in cold migration.
					</simpara>
				</note>
				<note>
					<simpara>
						When importing from VMware, there are additional factors which impact the migration speed such as limits related to ESXi, vSphere, or VDDK.
					</simpara>
				</note>
			</section>
			<section xml:id="conclusions-cold-warm-migrations_mtv">
				<title>Conclusions</title>
				<simpara role="_abstract">
					Based on the preceding information, the following conclusions can be drawn about cold migration vs. warm migration:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							The shortest downtime of VMs can be achieved by using warm migration.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							The shortest duration for VMs with a large amount of data on a single disk can be achieved by using cold migration.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							The shortest duration for VMs with a large amount of data that is spread evenly across multiple disks can be achieved by using warm migration.
						</simpara>
					</listitem>
				</itemizedlist>
			</section>
		</section>
	</chapter>
	<chapter xml:id="prerequisites-for-all-providers_mtv">
		<title>Prerequisites and software requirements for all providers</title>
		<simpara>
			Review the following prerequisites and software requirements to ensure that your environment is prepared for migration.
		</simpara>
		<simpara>
			You must install <link linkend="compatibility-guidelines_mtv">compatible versions</link> of Red Hat OpenShift and OpenShift Virtualization.
		</simpara>
		<section xml:id="about-storage_mtv">
			<title>Storage support and default modes</title>
			<simpara role="_abstract">
				Migration Toolkit for Virtualization (MTV) uses the following default volume and access modes for supported storage.
			</simpara>
			<table colsep="1" frame="all" rowsep="1">
				<title>Default volume and access modes</title>
				<tgroup cols="3">
					<colspec colname="col_1" colwidth="33*"></colspec>
					<colspec colname="col_2" colwidth="33*"></colspec>
					<colspec colname="col_3" colwidth="33*"></colspec>
					<thead>
						<row>
							<entry align="left" valign="top">Provisioner</entry>
							<entry align="left" valign="top">Volume mode</entry>
							<entry align="left" valign="top">Access mode</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry align="left" valign="top">
							<simpara>
								kubernetes.io/aws-ebs
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Block
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								ReadWriteOnce
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								kubernetes.io/azure-disk
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Block
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								ReadWriteOnce
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								kubernetes.io/azure-file
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Filesystem
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								ReadWriteMany
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								kubernetes.io/cinder
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Block
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								ReadWriteOnce
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								kubernetes.io/gce-pd
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Block
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								ReadWriteOnce
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								kubernetes.io/hostpath-provisioner
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Filesystem
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								ReadWriteOnce
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								manila.csi.openstack.org
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Filesystem
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								ReadWriteMany
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								openshift-storage.cephfs.csi.ceph.com
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Filesystem
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								ReadWriteMany
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								openshift-storage.rbd.csi.ceph.com
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Block
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								ReadWriteOnce
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								kubernetes.io/rbd
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Block
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								ReadWriteOnce
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								kubernetes.io/vsphere-volume
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Block
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								ReadWriteOnce
							</simpara>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
			<note>
				<simpara>
					If the OpenShift Virtualization storage does not support <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/storage/dynamic-provisioning">dynamic provisioning</link>, you must apply the following settings:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							<literal>Filesystem</literal> volume mode
						</simpara>
						<simpara>
							<literal>Filesystem</literal> volume mode is slower than <literal>Block</literal> volume mode.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<literal>ReadWriteOnce</literal> access mode
						</simpara>
						<simpara>
							<literal>ReadWriteOnce</literal> access mode does not support live virtual machine migration.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					See <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/virtualization/virtual-machines#virt-customizing-storage-profile_virt-creating-data-volumes">Enabling a statically-provisioned storage class</link> for details on editing the storage profile.
				</simpara>
			</note>
			<note>
				<simpara>
					If your migration uses block storage and persistent volumes created with an EXT4 file system, increase the file system overhead in the Containerized Data Importer (CDI) to be more than 10%. The default overhead that is assumed by CDI does not completely include the reserved place for the root partition. If you do not increase the file system overhead in CDI by this amount, your migration might fail.
				</simpara>
			</note>
			<note>
				<simpara>
					When you migrate from OpenStack, or when you run a cold migration from Red Hat Virtualization to the Red Hat OpenShift cluster that MTV is deployed on, the migration allocates persistent volumes without CDI. In these cases, you might need to adjust the file system overhead.
				</simpara>
				<simpara>
					If the configured file system overhead, which has a default value of 10%, is too low, the disk transfer will fail due to lack of space. In such a case, you would want to increase the file system overhead.
				</simpara>
				<simpara>
					In some cases, however, you might want to decrease the file system overhead to reduce storage consumption.
				</simpara>
				<simpara>
					You can change the file system overhead by changing the value of the <literal>controller_filesystem_overhead</literal> in the <literal>spec</literal> portion of the <literal>forklift-controller</literal> CR, as described in <link linkend="configuring-mtv-operator_mtv">Configuring the MTV Operator</link>.
				</simpara>
			</note>
		</section>
		<section xml:id="network-prerequisites_mtv">
			<title>Network prerequisites</title>
			<simpara role="_abstract">
				The following network prerequisites apply to all migrations:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						IP addresses, VLANs, and other network configuration settings must not be changed before or during migration. The MAC addresses of the virtual machines are preserved during migration.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The network connections between the source environment, the OpenShift Virtualization cluster, and the replication repository must be reliable and uninterrupted.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If you are mapping more than one source and destination network, you must create a <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/virtualization/virtual-machines#virt-creating-network-attachment-definition">network attachment definition</link> for each additional destination network.
					</simpara>
				</listitem>
			</itemizedlist>
			<section xml:id="ports_mtv">
				<title>Ports</title>
				<simpara>
					The firewalls must enable traffic over the following ports:
				</simpara>
				<table colsep="1" frame="all" rowsep="1">
					<title>Network ports required for migrating from VMware vSphere</title>
					<tgroup cols="5">
						<colspec colname="col_1" colwidth="17*"></colspec>
						<colspec colname="col_2" colwidth="17*"></colspec>
						<colspec colname="col_3" colwidth="17*"></colspec>
						<colspec colname="col_4" colwidth="17*"></colspec>
						<colspec colname="col_5" colwidth="33*"></colspec>
						<thead>
							<row>
								<entry align="left" valign="top">Port</entry>
								<entry align="left" valign="top">Protocol</entry>
								<entry align="left" valign="top">Source</entry>
								<entry align="left" valign="top">Destination</entry>
								<entry align="left" valign="top">Purpose</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry align="left" valign="top">
								<simpara>
									443
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									TCP
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									OpenShift nodes
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									VMware vCenter
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									VMware provider inventory
								</simpara>
								<simpara>
									Disk transfer authentication
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									443
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									TCP
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									OpenShift nodes
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									VMware ESXi hosts
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Disk transfer authentication
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									902
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									TCP
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									OpenShift nodes
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									VMware ESXi hosts
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Disk transfer data copy
								</simpara>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
				<table colsep="1" frame="all" rowsep="1">
					<title>Network ports required for migrating from Red Hat Virtualization</title>
					<tgroup cols="5">
						<colspec colname="col_1" colwidth="17*"></colspec>
						<colspec colname="col_2" colwidth="17*"></colspec>
						<colspec colname="col_3" colwidth="17*"></colspec>
						<colspec colname="col_4" colwidth="17*"></colspec>
						<colspec colname="col_5" colwidth="33*"></colspec>
						<thead>
							<row>
								<entry align="left" valign="top">Port</entry>
								<entry align="left" valign="top">Protocol</entry>
								<entry align="left" valign="top">Source</entry>
								<entry align="left" valign="top">Destination</entry>
								<entry align="left" valign="top">Purpose</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry align="left" valign="top">
								<simpara>
									443
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									TCP
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									OpenShift nodes
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									RHV Engine
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									RHV provider inventory
								</simpara>
								<simpara>
									Disk transfer authentication
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									54322
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									TCP
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									OpenShift nodes
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									RHV hosts
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Disk transfer data copy
								</simpara>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>
		</section>
		<section xml:id="source-vm-prerequisites_mtv">
			<title>Source virtual machine prerequisites</title>
			<simpara role="_abstract">
				The following prerequisites for source virtual machines (VMs) apply to all migrations:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						ISO images and CD-ROMs are unmounted.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Each NIC contains either an IPv4 address or an IPv6 address, although a NIC may use both.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The operating system of each VM is certified and supported as a guest operating system for conversions.
					</simpara>
				</listitem>
			</itemizedlist>
			<note>
				<simpara>
					You can check that the operating system is supported by referring to the table in <link xlink:href="https://access.redhat.com/articles/1351473">Converting virtual machines from other hypervisors to KVM with virt-v2v</link>. See the columns of the table that refer to RHEL 8 hosts and RHEL 9 hosts.
				</simpara>
			</note>
			<itemizedlist>
				<listitem>
					<simpara>
						VMs that you want to migrate with MTV 2.6.<emphasis>z</emphasis> run on RHEL 8.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						VMs that you want to migrate with MTV 2.7.<emphasis>z</emphasis> run on RHEL 9.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The name of a VM must not contain a period (<literal>.</literal>). Migration Toolkit for Virtualization (MTV) changes any period in a VM name to a dash (<literal>-</literal>).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The name of a VM must not be the same as any other VM in the OpenShift Virtualization environment.
					</simpara>
					<warning>
						<simpara>
							MTV has limited support for the migration of dual-boot operating system VMs.
						</simpara>
						<simpara>
							In the case of a dual-boot operating system VM, MTV will try to convert the first boot disk it finds. Alternatively the root device can be specified in the MTV UI.
						</simpara>
					</warning>
					<warning>
						<simpara>
							For virtual machines (VMs) running Microsoft Windows, Volume Shadow Copy Service (VSS) inside the guest VM is used to quiesce the file system and applications. 
						</simpara>
						<simpara>
							When performing a warm migration of a Microsoft Windows virtual machine from VMware, you must start VSS on the Windows guest operating system in order for the snapshot and <literal>Quiesce guest file system</literal> to succeed.
						</simpara>
						<simpara>
							If you do not start VSS on the Windows guest operating system, the snapshot creation during the Warm migration fails with the following error:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">An error occurred while taking a snapshot: Failed to restart the virtual machine</programlisting>
						<simpara>
							If you set the VSS service to <literal>Manual</literal> and start a snapshot creation with <literal>Quiesce guest file system = yes</literal>. In the background, the VMware Snapshot provider service requests VSS to start the shadow copy.
						</simpara>
					</warning>
					<note>
						<simpara>
							Migration Toolkit for Virtualization automatically assigns a new name to a VM that does not comply with the rules.
						</simpara>
						<simpara>
							Migration Toolkit for Virtualization makes the following changes when it automatically generates a new VM name:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Excluded characters are removed.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Uppercase letters are switched to lowercase letters.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Any underscore (<literal>_</literal>) is changed to a dash (<literal>-</literal>).
								</simpara>
							</listitem>
						</itemizedlist>
						<simpara>
							This feature allows a migration to proceed smoothly even if someone enters a VM name that does not follow the rules.
						</simpara>
					</note>
					<note>
						<simpara>
							Microsoft Windows VMs, which use the <link xlink:href="https://learn.microsoft.com/en-us/windows/compatibility/measured-boot">Measured Boot</link> feature, cannot be migrated. Measured Boot is a mechanism to prevent any kind of device changes by checking each start-up component, including the firmware, all the way to the boot driver.
						</simpara>
						<simpara>
							The alternative to migration is to re-create the Windows VM directly on OpenShift Virtualization.
						</simpara>
					</note>
					<note>
						<simpara>
							Virtual machines (VMs) with Secure Boot enabled currently might not be migrated automatically. This is because Secure Boot would prevent the VMs from booting on the destination provider. Secure boot is a security standard developed by members of the PC industry to ensure that a device boots using only software that is trusted by the Original Equipment Manufacturer (OEM). 
						</simpara>
						<simpara>
							Workaround: The current workaround is to disable Secure Boot on the destination. For more details, see <link xlink:href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/disabling-secure-boot?view=windows-11">Disabling Secure Boot</link>. <link xlink:href="https://issues.redhat.com/browse/MTV-1548">(MTV-1548)</link>
						</simpara>
					</note>
				</listitem>
			</itemizedlist>
		</section>
		<section xml:id="encryption-support_mtv">
			<title>MTV encryption support</title>
			<simpara role="_abstract">
				Migration Toolkit for Virtualization (MTV) supports the following types of encryption for virtual machines (VMs):
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						For VMs that run on Linux: Linux Unified Key Setup (LUKS)
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						For VMs that run on Windows: BitLocker
					</simpara>
				</listitem>
			</itemizedlist>
		</section>
	</chapter>
	<chapter xml:id="prerequisites-per-provider_mtv">
		<title>Specific software requirements for each provider</title>
		<simpara>
			In addition to the prerequisites and software requirements that apply to all providers, there are specific requirements for each provider.
		</simpara>
		<section xml:id="vmware-prerequisites_mtv">
			<title>VMware prerequisites</title>
			<simpara role="_abstract">
				It is strongly recommended to create a VDDK image to accelerate migrations. For more information, see <link linkend="creating-vddk-image_mtv">Creating a VDDK image</link>.
			</simpara>
			<warning>
				<simpara>
					Virtual machine (VM) migrations do not work without VDDK when a VM is backed by VMware vSAN.
				</simpara>
			</warning>
			<simpara>
				The following prerequisites apply to VMware migrations:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						You must use a <link linkend="compatibility-guidelines_mtv">compatible version</link> of VMware vSphere.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						You must be logged in as a user with at least the minimal set of <link linkend="vmware-privileges_mtv">VMware privileges</link>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						To access the virtual machine using a pre-migration hook, <link xlink:href="https://www.vmware.com/support/ws5/doc/new_guest_tools_ws.html">VMware Tools</link> must be installed on the source virtual machine.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The VM operating system must be certified and supported for use as a <link xlink:href="https://access.redhat.com/articles/973163#ocpvirt">guest operating system with OpenShift Virtualization</link> <emphasis>and</emphasis> for <link xlink:href="https://access.redhat.com/articles/1351473">conversion to KVM with <literal>virt-v2v</literal></link>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If you are running a warm migration, you must enable <link xlink:href="https://kb.vmware.com/s/article/1020128">changed block tracking (CBT)</link> on the VMs and on the VM disks.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If you are migrating more than 10 VMs from an ESXi host in the same migration plan, you must increase the Network File Copy (NFC) service memory of the host.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						It is strongly recommended to disable hibernation because Migration Toolkit for Virtualization (MTV) does not support migrating hibernated VMs.
					</simpara>
				</listitem>
			</itemizedlist>
			<warning>
				<simpara>
					For virtual machines (VMs) running Microsoft Windows, Volume Shadow Copy Service (VSS) inside the guest VM is used to quiesce the file system and applications. 
				</simpara>
				<simpara>
					When performing a warm migration of a Microsoft Windows virtual machine from VMware, you must start VSS on the Windows guest operating system in order for the snapshot and <literal>Quiesce guest file system</literal> to succeed.
				</simpara>
				<simpara>
					If you do not start VSS on the Windows guest operating system, the snapshot creation during the Warm migration fails with the following error:
				</simpara>
				
<programlisting language="terminal" linenumbering="unnumbered">An error occurred while taking a snapshot: Failed to restart the virtual machine</programlisting>
				<simpara>
					If you set the VSS service to <literal>Manual</literal> and start a snapshot creation with <literal>Quiesce guest file system = yes</literal>. In the background, the VMware Snapshot provider service requests VSS to start the shadow copy.
				</simpara>
			</warning>
			<important>
				<simpara>
					In case of a power outage, data might be lost for a VM with disabled hibernation. However, if hibernation is not disabled, migration will fail.
				</simpara>
			</important>
			<note>
				<simpara>
					Neither MTV nor OpenShift Virtualization support conversion of Btrfs for migrating VMs from VMware.
				</simpara>
			</note>
			<section xml:id="vmware-privileges_mtv">
				<title>VMware privileges</title>
				<simpara>
					The following minimal set of VMware privileges is required to migrate virtual machines to OpenShift Virtualization with the Migration Toolkit for Virtualization (MTV).
				</simpara>
				<table colsep="1" frame="all" rowsep="1">
					<title>VMware privileges</title>
					<tgroup cols="2">
						<colspec colname="col_1" colwidth="50*"></colspec>
						<colspec colname="col_2" colwidth="50*"></colspec>
						<thead>
							<row>
								<entry align="left" valign="top">Privilege</entry>
								<entry align="left" valign="top">Description</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry align="left" nameend="col_2" namest="col_1" valign="top">
								<simpara>
									<literal>Virtual machine.Interaction</literal> privileges:
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Interaction.Power Off</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows powering off a powered-on virtual machine. This operation powers down the guest operating system.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Interaction.Power On</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows powering on a powered-off virtual machine and resuming a suspended virtual machine.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Guest operating system management by VIX API</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows managing a virtual machine by the VMware Virtual Infrastructure eXtension (VIX) API.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" nameend="col_2" namest="col_1" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning</literal> privileges:
								</simpara>
								<note>
									<simpara>
										All <literal>Virtual machine.Provisioning</literal> privileges are required.
									</simpara>
								</note>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Allow disk access</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows opening a disk on a virtual machine for random read and write access. Used mostly for remote disk mounting.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Allow file access</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows operations on files associated with a virtual machine, including VMX, disks, logs, and NVRAM.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Allow read-only disk access</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows opening a disk on a virtual machine for random read access. Used mostly for remote disk mounting.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Allow virtual machine download</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows read operations on files associated with a virtual machine, including VMX, disks, logs, and NVRAM.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Allow virtual machine files upload</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows write operations on files associated with a virtual machine, including VMX, disks, logs, and NVRAM.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Clone template</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows cloning of a template.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Clone virtual machine</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows cloning of an existing virtual machine and allocation of resources.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Create template from virtual machine</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows creation of a new template from a virtual machine.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Customize guest</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows customization of a virtual machine’s guest operating system without moving the virtual machine.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Deploy template</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows deployment of a virtual machine from a template.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Mark as template</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows marking an existing powered-off virtual machine as a template.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Mark as virtual machine</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows marking an existing template as a virtual machine.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Modify customization specification</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows creation, modification, or deletion of customization specifications.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Promote disks</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows promote operations on a virtual machine’s disks.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Provisioning.Read customization specifications</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows reading a customization specification.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" nameend="col_2" namest="col_1" valign="top">
								<simpara>
									<literal>Virtual machine.Snapshot management</literal> privileges:
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Snapshot management.Create snapshot</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows creation of a snapshot from the virtual machine’s current state.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Virtual machine.Snapshot management.Remove Snapshot</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows removal of a snapshot from the snapshot history.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" nameend="col_2" namest="col_1" valign="top">
								<simpara>
									<literal>Datastore</literal> privileges:
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Datastore.Browse datastore</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows exploring the contents of a datastore.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Datastore.Low level file operations</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows performing low-level file operations - read, write, delete, and rename - in a datastore.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" nameend="col_2" namest="col_1" valign="top">
								<simpara>
									<literal>Sessions</literal> privileges:
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Sessions.Validate session</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows verification of the validity of a session.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" nameend="col_2" namest="col_1" valign="top">
								<simpara>
									<literal>Cryptographic</literal> privileges:
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Cryptographic.Decrypt</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows decryption of an encrypted virtual machine.
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									<literal>Cryptographic.Direct access</literal>
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									Allows access to encrypted resources.
								</simpara>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
				<tip>
				<simpara>
					Create a role in VMware with the permissions described in the preceding table and then apply this role to the <emphasis role="strong">Inventory</emphasis> section, as described in <link linkend="creating-vmware-role-mtv-permissions_mtv">Creating a VMware role to apply MTV permissions</link>.
				</simpara>
				</tip>
			</section>
			<section xml:id="creating-vmware-role-mtv-permissions_mtv">
				<title>Creating a VMware role to grant MTV privileges</title>
				<simpara role="_abstract">
					You can create a role in VMware to grant privileges for Migration Toolkit for Virtualization (MTV) and then grant those privileges to users with that role.
				</simpara>
				<simpara>
					The procedure that follows explains how to do this in general. For detailed instructions, see VMware documentation.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							In the vCenter Server UI, create a role that includes the set of privileges described in the table in <link linkend="vmware-prerequisites_mtv">VMware prerequisites</link>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							In the vSphere inventory UI, grant privileges for users with this role to the appropriate vSphere logical objects at one of the following levels:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									At the user or group level: Assign privileges to the appropriate logical objects in the data center and use the <emphasis role="strong">Propagate to child objects</emphasis> option.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									At the object level: Apply the same role individually to all the relevant vSphere logical objects involved in the migration, for example, hosts, vSphere clusters, data centers, or networks.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
				</orderedlist>
			</section>
			<section xml:id="creating-vddk-image_mtv">
				<title>Creating a VDDK image</title>
				<simpara role="_abstract">
					It is strongly recommended that Migration Toolkit for Virtualization (MTV) should be used with the VMware Virtual Disk Development Kit (VDDK) SDK when transferring virtual disks from VMware vSphere.
				</simpara>
				<note>
					<simpara>
						Creating a VDDK image, although optional, is highly recommended. Using MTV without VDDK is not recommended and could result in significantly lower migration speeds.
					</simpara>
				</note>
				<simpara>
					To make use of this feature, you download the VDDK, build a VDDK image, and push the VDDK image to your image registry.
				</simpara>
				<simpara>
					The VDDK package contains symbolic links, therefore, the procedure of creating a VDDK image must be performed on a file system that preserves symbolic links (symlinks).
				</simpara>
				<note>
					<simpara>
						Storing the VDDK image in a public registry might violate the VMware license terms.
					</simpara>
				</note>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							<link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/registry/setting-up-and-configuring-the-registry#configuring-registry-storage-baremetal">Red Hat OpenShift image registry</link>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<literal>podman</literal> installed.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							You are working on a file system that preserves symbolic links (symlinks).
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							If you are using an external registry, OpenShift Virtualization must be able to access it.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Create and navigate to a temporary directory:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ mkdir /tmp/&lt;dir_name&gt; &amp;&amp; cd /tmp/&lt;dir_name&gt;</programlisting>
					</listitem>
					<listitem>
						<simpara>
							In a browser, navigate to the <link xlink:href="https://developer.vmware.com/web/sdk/8.0/vddk">VMware VDDK version 8 download page</link>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Select version 8.0.1 and click <emphasis role="strong">Download</emphasis>.
						</simpara>
					</listitem>
				</orderedlist>
				<note>
					<simpara>
						In order to migrate to OpenShift Virtualization 4.12, download VDDK version 7.0.3.2 from the <link xlink:href="https://developer.vmware.com/web/sdk/7.0/vddk">VMware VDDK version 7 download page</link>.
					</simpara>
				</note>
				<orderedlist numeration="arabic">
					<listitem>
						<simpara>
							Save the VDDK archive file in the temporary directory.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Extract the VDDK archive:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ tar -xzf VMware-vix-disklib-&lt;version&gt;.x86_64.tar.gz</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Create a <literal>Dockerfile</literal>:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ cat &gt; Dockerfile &lt;&lt;EOF
FROM registry.access.redhat.com/ubi8/ubi-minimal
USER 1001
COPY vmware-vix-disklib-distrib /vmware-vix-disklib-distrib
RUN mkdir -p /opt
ENTRYPOINT ["cp", "-r", "/vmware-vix-disklib-distrib", "/opt"]
EOF</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Build the VDDK image:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ podman build . -t &lt;registry_route_or_server_path&gt;/vddk:&lt;tag&gt;</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Push the VDDK image to the registry:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ podman push &lt;registry_route_or_server_path&gt;/vddk:&lt;tag&gt;</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Ensure that the image is accessible to your OpenShift Virtualization environment.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
			<section xml:id="increasing-nfc-memory-vmware-host_mtv">
				<title>Increasing the NFC service memory of an ESXi host</title>
				<simpara role="_abstract">
					If you are migrating more than 10 VMs from an ESXi host in the same migration plan, you must increase the Network File copy (NFC) service memory of the host. Otherwise, the migration fails because the NFC service memory is limited to 10 parallel connections.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Log in to the ESXi host as root.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Change the value of <literal>maxMemory</literal> to <literal>1000000000</literal> in <literal>/etc/vmware/hostd/config.xml</literal>:
						</simpara>
						
<programlisting language="xml" linenumbering="unnumbered">...
      &lt;nfcsvc&gt;
         &lt;path&gt;libnfcsvc.so&lt;/path&gt;
         &lt;enabled&gt;true&lt;/enabled&gt;
         &lt;maxMemory&gt;1000000000&lt;/maxMemory&gt;
         &lt;maxStreamMemory&gt;10485760&lt;/maxStreamMemory&gt;
      &lt;/nfcsvc&gt;
...</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Restart <literal>hostd</literal>:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered"># /etc/init.d/hostd restart</programlisting>
						<simpara>
							You do not need to reboot the host.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
			<section xml:id="vddk-validator-containers_mtv">
				<title>VDDK validator containers need requests and limits</title>
				<simpara role="_abstract">
					If you have the <link xlink:href="https://docs.openshift.com/container-platform/4.19/applications/quotas/quotas-setting-per-project.html">cluster or project resource quotas set</link>, you must ensure that you have a sufficient quota for the MTV pods to perform the migration. 
				</simpara>
				<simpara>
					You can see the defaults, which you can override in the <literal>ForkliftController</literal> custom resource (CR), listed as follows. If necessary, you can adjust these defaults. 
				</simpara>
				<simpara>
					These settings are highly dependent on your environment. If there are many migrations happening at once and the quotas are not set enough for the migrations, then the migrations can fail. This can also be correlated to the <literal>MAX_VM_INFLIGHT</literal> setting that determines how many VMs/disks are migrated at once.
				</simpara>
				<simpara>
					The following defaults can be overriden in the <literal>ForkliftController</literal> CR:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Defaults that affect both cold and warm migrations:
						</simpara>
						<simpara>
							For cold migration, it is likely to be more resource intensive as it performs the disk copy. For warm migration, you could potentially reduce the requests.
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									virt_v2v_container_limits_cpu: <literal>4000m</literal>
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									virt_v2v_container_limits_memory: <literal>8Gi</literal>
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									virt_v2v_container_requests_cpu: <literal>1000m</literal>
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									virt_v2v_container_requests_memory: <literal>1Gi</literal>
								</simpara>
								<note>
									<simpara>
										Cold and warm migration using <literal>virt-v2v</literal> can be resource-intensive. For more details, see <link xlink:href="https://libguestfs.org/virt-v2v.1.html#compute-power-and-ram">Compute power and RAM</link>.
									</simpara>
								</note>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							Defaults that affect any migrations with hooks:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									hooks_container_limits_cpu: <literal>1000m</literal>
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									hooks_container_limits_memory: <literal>1Gi</literal>
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									hooks_container_requests_cpu: <literal>100m</literal>
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									hooks_container_requests_memory: <literal>150Mi</literal>
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							Defaults that affect any OVA migrations:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									ova_container_limits_cpu: <literal>1000m</literal>
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									ova_container_limits_memory: <literal>1Gi</literal>
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									ova_container_requests_cpu: <literal>100m</literal>
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									ova_container_requests_memory: <literal>150Mi</literal>
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
				</itemizedlist>
			</section>
		</section>
		<section xml:id="rhv-prerequisites_mtv">
			<title>Red Hat Virtualization prerequisites</title>
			<simpara role="_abstract">
				The following prerequisites apply to Red Hat Virtualization migrations:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						To create a source provider, you must have at least the <literal>UserRole</literal> and <literal>ReadOnlyAdmin</literal> roles assigned to you. These are the minimum required permissions, however, any other administrator or superuser permissions will also work.
					</simpara>
				</listitem>
			</itemizedlist>
			<important>
				<simpara>
					You must keep the <literal>UserRole</literal> and <literal>ReadOnlyAdmin</literal> roles until the virtual machines of the source provider have been migrated. Otherwise, the migration will fail.
				</simpara>
			</important>
			<itemizedlist>
				<listitem>
					<simpara>
						To migrate virtual machines:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								You must have one of the following:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										RHV admin permissions. These permissions allow you to migrate any virtual machine in the system.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>DiskCreator</literal> and <literal>UserVmManager</literal> permissions on every virtual machine you want to migrate.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								You must use a <link linkend="compatibility-guidelines_mtv">compatible version</link> of Red Hat Virtualization.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								You must have the Manager CA certificate, unless it was replaced by a third-party certificate, in which case, specify the Manager Apache CA certificate.
							</simpara>
							<simpara>
								You can obtain the Manager CA certificate by navigating to <link xlink:href="https://&lt;engine_host&gt;/ovirt-engine/services/pki-resource?resource=ca-certificate&amp;format=X509-PEM-CA">https://&lt;engine_host&gt;/ovirt-engine/services/pki-resource?resource=ca-certificate&amp;format=X509-PEM-CA</link> in a browser.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If you are migrating a virtual machine with a direct logical unit number (LUN) disk, ensure that the nodes in the OpenShift Virtualization destination cluster that the VM is expected to run on can access the backend storage.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
			</itemizedlist>
			<note>
				<itemizedlist>
					<listitem>
						<simpara>
							Unlike disk images that <emphasis>are copied</emphasis> from a source provider to a target provider, LUNs are <emphasis>detached</emphasis>, <emphasis>but not removed</emphasis>, from virtual machines in the source provider and then attached to the virtual machines (VMs) that are created in the target provider.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							LUNs are not removed from the source provider during the migration in case fallback to the source provider is required. However, before re-attaching the LUNs to VMs in the source provider, ensure that the LUNs are not used by VMs on the target environment at the same time, which might lead to data corruption.
						</simpara>
					</listitem>
				</itemizedlist>
			</note>
		</section>
		<section xml:id="openstack-prerequisites_mtv">
			<title>OpenStack prerequisites</title>
			<simpara role="_abstract">
				The following prerequisites apply to OpenStack migrations:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						You must use a <link linkend="compatibility-guidelines_mtv">compatible version</link> of OpenStack.
					</simpara>
				</listitem>
			</itemizedlist>
			<section xml:id="additional-authentication-for-osp_mtv">
				<title>Additional authentication methods for migrations with OpenStack source providers</title>
				<simpara role="_abstract">
					Migration Toolkit for Virtualization supports the following authentication methods for migrations with OpenStack source providers in addition to the standard username and password credential set:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Token authentication
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Application credential authentication
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					You can use these methods to migrate virtual machines with OpenStack source providers using the command-line interface (CLI) the same way you migrate other virtual machines, except for how you prepare the <literal>Secret</literal> manifest.
				</simpara>
				<section xml:id="openstack-token-authentication_ostack">
					<title>Using token authentication with an OpenStack source provider</title>
					<simpara role="_abstract">
						You can use token authentication, instead of username and password authentication, when you create an OpenStack source provider.
					</simpara>
					<simpara>
						MTV supports both of the following types of token authentication:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Token with user ID
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Token with user name
							</simpara>
						</listitem>
					</itemizedlist>
					<simpara>
						For each type of token authentication, you need to use data from OpenStack to create a <literal>Secret</literal> manifest.
					</simpara>
					<formalpara>
						<title>Prerequisites</title>
						<para>
							Have an OpenStack account.
						</para>
					</formalpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In the dashboard of the OpenStack web console, click <emphasis role="strong">Project &gt; API Access</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Expand <emphasis role="strong">Download OpenStack RC file</emphasis> and click <emphasis role="strong">OpenStack RC file</emphasis>.
							</simpara>
							<simpara>
								The file that is downloaded, referred to here as <literal>&lt;openstack_rc_file&gt;</literal>, includes the following fields used for token authentication:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">OS_AUTH_URL
OS_PROJECT_ID
OS_PROJECT_NAME
OS_DOMAIN_NAME
OS_USERNAME</programlisting>
						</listitem>
						<listitem>
							<simpara>
								To get the data needed for token authentication, run the following command:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ openstack token issue</programlisting>
							<simpara>
								The output, referred to here as <literal>&lt;openstack_token_output&gt;</literal>, includes the <literal>token</literal>, <literal>userID</literal>, and <literal>projectID</literal> that you need for authentication using a token with user ID.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Create a <literal>Secret</literal> manifest similar to the following:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										For authentication using a token with user ID:
									</simpara>
									
<programlisting language="yaml" linenumbering="unnumbered">cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: openstack-secret-tokenid
  namespace: openshift-mtv
  labels:
    createdForProviderType: openstack
type: Opaque
stringData:
  authType: token
  token: &lt;token_from_openstack_token_output&gt;
  projectID: &lt;projectID_from_openstack_token_output&gt;
  userID: &lt;userID_from_openstack_token_output&gt;
  url: &lt;OS_AUTH_URL_from_openstack_rc_file&gt;
EOF</programlisting>
								</listitem>
								<listitem>
									<simpara>
										For authentication using a token with user name:
									</simpara>
									
<programlisting language="yaml" linenumbering="unnumbered">cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: openstack-secret-tokenname
  namespace: openshift-mtv
  labels:
    createdForProviderType: openstack
type: Opaque
stringData:
  authType: token
  token: &lt;token_from_openstack_token_output&gt;
  domainName: &lt;OS_DOMAIN_NAME_from_openstack_rc_file&gt;
  projectName: &lt;OS_PROJECT_NAME_from_openstack_rc_file&gt;
  username: &lt;OS_USERNAME_from_openstack_rc_file&gt;
  url: &lt;OS_AUTH_URL_from_openstack_rc_file&gt;
EOF</programlisting>
								</listitem>
							</itemizedlist>
						</listitem>
					</orderedlist>
				</section>
				<section xml:id="openstack-application-credential-authentication_ostack">
					<title>Using application credential authentication with an OpenStack source provider</title>
					<simpara role="_abstract">
						You can use application credential authentication, instead of username and password authentication, when you create an OpenStack source provider.
					</simpara>
					<simpara>
						MTV supports both of the following types of application credential authentication:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Application credential ID
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Application credential name
							</simpara>
						</listitem>
					</itemizedlist>
					<simpara>
						For each type of application credential authentication, you need to use data from OpenStack to create a <literal>Secret</literal> manifest.
					</simpara>
					<formalpara>
						<title>Prerequisites</title>
						<para>
							You have an OpenStack account.
						</para>
					</formalpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In the dashboard of the OpenStack web console, click <emphasis role="strong">Project</emphasis> &gt; <emphasis role="strong">API Access</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Expand <emphasis role="strong">Download OpenStack RC file</emphasis> and click <emphasis role="strong">OpenStack RC file</emphasis>.
							</simpara>
							<simpara>
								The file that is downloaded, referred to here as <literal>&lt;openstack_rc_file&gt;</literal>, includes the following fields used for application credential authentication:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">OS_AUTH_URL
OS_PROJECT_ID
OS_PROJECT_NAME
OS_DOMAIN_NAME
OS_USERNAME</programlisting>
						</listitem>
						<listitem>
							<simpara>
								To get the data needed for application credential authentication, run the following command:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ openstack application credential create --role member --role reader --secret redhat forklift</programlisting>
							<simpara>
								The output, referred to here as <literal>&lt;openstack_credential_output&gt;</literal>, includes:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										The <literal>id</literal> and <literal>secret</literal> that you need for authentication using an application credential ID
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The <literal>name</literal> and <literal>secret</literal> that you need for authentication using an application credential name
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								Create a <literal>Secret</literal> manifest similar to the following:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										For authentication using the application credential ID:
									</simpara>
									
<programlisting language="yaml" linenumbering="unnumbered">cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: openstack-secret-appid
  namespace: openshift-mtv
  labels:
    createdForProviderType: openstack
type: Opaque
stringData:
  authType: applicationcredential
  applicationCredentialID: &lt;id_from_openstack_credential_output&gt;
  applicationCredentialSecret: &lt;secret_from_openstack_credential_output&gt;
  url: &lt;OS_AUTH_URL_from_openstack_rc_file&gt;
EOF</programlisting>
								</listitem>
								<listitem>
									<simpara>
										For authentication using the application credential name:
									</simpara>
									
<programlisting language="yaml" linenumbering="unnumbered">cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: openstack-secret-appname
  namespace: openshift-mtv
  labels:
    createdForProviderType: openstack
type: Opaque
stringData:
  authType: applicationcredential
  applicationCredentialName: &lt;name_from_openstack_credential_output&gt;
  applicationCredentialSecret: &lt;secret_from_openstack_credential_output&gt;
  domainName: &lt;OS_DOMAIN_NAME_from_openstack_rc_file&gt;
  username: &lt;OS_USERNAME_from_openstack_rc_file&gt;
  url: &lt;OS_AUTH_URL_from_openstack_rc_file&gt;
EOF</programlisting>
								</listitem>
							</itemizedlist>
						</listitem>
					</orderedlist>
				</section>
			</section>
		</section>
		<section xml:id="ova-prerequisites_mtv">
			<title>Open Virtual Appliance (OVA) prerequisites</title>
			<simpara role="_abstract">
				The following prerequisites apply to Open Virtual Appliance (OVA) file migrations:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						All OVA files are created by VMware vSphere.
					</simpara>
				</listitem>
			</itemizedlist>
			<note>
				<simpara>
					Migration of OVA files that were not created by VMware vSphere but are compatible with vSphere might succeed. However, migration of such files is not supported by MTV. MTV supports only OVA files created by VMware vSphere.
				</simpara>
			</note>
			<itemizedlist>
				<listitem>
					<simpara>
						The OVA files are in one or more folders under an NFS shared directory in one of the following structures:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								In one or more compressed Open Virtualization Format (OVF) packages that hold all the VM information.
							</simpara>
							<simpara>
								The filename of each compressed package <emphasis role="strong">must</emphasis> have the <literal>.ova</literal> extension. Several compressed packages can be stored in the same folder.
							</simpara>
							<simpara>
								When this structure is used, MTV scans the root folder and the first-level subfolders for compressed packages.
							</simpara>
							<simpara>
								For example, if the NFS share is <literal>/nfs</literal>, then:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										The folder <literal>/nfs</literal> is scanned.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The folder <literal>/nfs/subfolder1</literal> is scanned.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										However, <literal>/nfs/subfolder1/subfolder2</literal> is not scanned.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								In extracted OVF packages.
							</simpara>
							<simpara>
								When this structure is used, MTV scans the root folder, first-level subfolders, and second-level subfolders for extracted OVF packages.
							</simpara>
							<simpara>
								However, there can be only one <literal>.ovf</literal> file in a folder. Otherwise, the migration will fail.
							</simpara>
							<simpara>
								For example, if the NFS share is <literal>/nfs</literal>, then:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										The OVF file <literal>/nfs/vm.ovf</literal> is scanned.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The OVF file <literal>/nfs/subfolder1/vm.ovf</literal> is scanned.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The OVF file <literal>/nfs/subfolder1/subfolder2/vm.ovf</literal> is scanned.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										However, the OVF file <literal>/nfs/subfolder1/subfolder2/subfolder3/vm.ovf</literal> is not scanned.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
			</itemizedlist>
		</section>
		<section xml:id="cnv-prerequisites_mtv">
			<title>OpenShift Virtualization prerequisites</title>
			<simpara role="_abstract">
				The following prerequisites apply to migrations from one OpenShift Virtualization cluster to another:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Both the source and destination OpenShift Virtualization clusters must have the same version of Migration Toolkit for Virtualization (MTV) installed.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The source cluster must use OpenShift Virtualization 4.16 or later.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Migration from a later version of OpenShift Virtualization to an earlier one is not supported.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Migration from an earlier version of OpenShift Virtualization to a later version is supported if both are supported by the current version of MTV. For example, if the current version of OpenShift Virtualization is 4.18, a migration from version 4.16 or 4.17 to version 4.18 is supported, but a migration from version 4.15 to any version is not.
					</simpara>
				</listitem>
			</itemizedlist>
			<important>
				<simpara>
					It is strongly recommended to migrate only between clusters with the same version of OpenShift Virtualization, although migration from an earlier version of OpenShift Virtualization to a later one is supported.
				</simpara>
			</important>
		</section>
		<section xml:id="compatibility-guidelines_mtv">
			<title>Software compatibility guidelines</title>
			<simpara role="_abstract">
				You must install compatible software versions. The table that follows lists the relevant software versions for this version of Migration Toolkit for Virtualization (MTV).
			</simpara>
			<table colsep="1" frame="all" rowsep="1">
				<title>Compatible software versions</title>
				<tgroup cols="6">
					<colspec colname="col_1" colwidth="17*"></colspec>
					<colspec colname="col_2" colwidth="17*"></colspec>
					<colspec colname="col_3" colwidth="17*"></colspec>
					<colspec colname="col_4" colwidth="17*"></colspec>
					<colspec colname="col_5" colwidth="17*"></colspec>
					<colspec colname="col_6" colwidth="17*"></colspec>
					<thead>
						<row>
							<entry align="left" valign="top">Migration Toolkit for Virtualization</entry>
							<entry align="left" valign="top">Red Hat OpenShift</entry>
							<entry align="left" valign="top">OpenShift Virtualization</entry>
							<entry align="left" valign="top">VMware vSphere</entry>
							<entry align="left" valign="top">Red Hat Virtualization</entry>
							<entry align="left" valign="top">OpenStack</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry align="left" valign="top">
							<simpara>
								2.9
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								4.19, 4.18, 4.17
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								4.19, 4.18, 4.17
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								6.5 or later
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								4.4 SP1 or later
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								16.1 or later
							</simpara>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
			<note>
				<simpara>
					Migration from Red Hat Virtualization 4.3
				</simpara>
				<simpara>
					MTV was tested only with Red Hat Virtualization 4.4 SP1. Migration from Red Hat Virtualization (RHV) 4.3 has not been tested with MTV 2.9. While not supported, basic migrations from RHV 4.3 are expected to work.
				</simpara>
				<simpara>
					Generally it is advised to upgrade Red Hat Virtualization Manager to the previously mentioned supported version before the migration to OpenShift Virtualization.
				</simpara>
				<simpara>
					Therefore, it is recommended to upgrade RHV to the supported version above before the migration to OpenShift Virtualization.
				</simpara>
				<simpara>
					However, migrations from RHV 4.3.11 were tested with MTV 2.3, and might work in practice in many environments using MTV 2.9. In this case, it is recommended to upgrade Red Hat Virtualization Manager to the previously mentioned supported version before the migration to OpenShift Virtualization.
				</simpara>
			</note>
			<section xml:id="openshift-operator-life-cycles">
				<title>OpenShift Operator Life Cycles</title>
				<simpara>
					For more information about the software maintenance Life Cycle classifications for Operators shipped by Red Hat for use with OpenShift Container Platform, see <link xlink:href="https://access.redhat.com/support/policy/updates/openshift_operators#platform-agnostic">OpenShift Operator Life Cycles</link>.
				</simpara>
			</section>
		</section>
	</chapter>
	<chapter xml:id="installing-the-operator_mtv">
		<title>Installing and configuring the MTV Operator</title>
		<simpara>
			You can install the MTV Operator by using the Red Hat OpenShift web console or the command-line interface (CLI).
		</simpara>
		<simpara>
			In Migration Toolkit for Virtualization (MTV) version 2.4 and later, the MTV Operator includes the MTV plugin for the Red Hat OpenShift web console.
		</simpara>
		<simpara>
			After you install the MTV Operator by using either the Red Hat OpenShift web console or the CLI, you can configure the Operator.
		</simpara>
		<section xml:id="installing-mtv-operator_web">
			<title>Installing the MTV Operator by using the Red Hat OpenShift web console</title>
			<simpara role="_abstract">
				You can install the MTV Operator by using the Red Hat OpenShift web console.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						Red Hat OpenShift 4.19, 4.18, 4.17 installed.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						OpenShift Virtualization Operator installed on an OpenShift migration target cluster.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						You must be logged in as a user with <literal>cluster-admin</literal> permissions.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Operators</emphasis> → <emphasis role="strong">OperatorHub</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Use the <emphasis role="strong">Filter by keyword</emphasis> field to search for <emphasis role="strong">mtv-operator</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Migration Toolkit for Virtualization Operator</emphasis> and then click <emphasis role="strong">Install</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create ForkliftController</emphasis> when the button becomes active.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create</emphasis>.
					</simpara>
					<simpara>
						Your ForkliftController appears in the list that is displayed.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Workloads</emphasis> → <emphasis role="strong">Pods</emphasis> to verify that the MTV pods are running.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Operators</emphasis> → <emphasis role="strong">Installed Operators</emphasis> to verify that <emphasis role="strong">Migration Toolkit for Virtualization Operator</emphasis> appears in the <emphasis role="strong">openshift-mtv</emphasis> project with the status <emphasis role="strong">Succeeded</emphasis>.
					</simpara>
					<simpara>
						When the plugin is ready you will be prompted to reload the page. The <emphasis role="strong">Migration</emphasis> menu item is automatically added to the navigation bar, displayed on the left of the Red Hat OpenShift web console.
					</simpara>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="installing-mtv-operator_cli">
			<title>Installing the MTV Operator by using the command-line interface</title>
			<simpara role="_abstract">
				You can install the MTV Operator by using the command-line interface (CLI).
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						Red Hat OpenShift 4.19, 4.18, 4.17 installed.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						OpenShift Virtualization Operator installed on an OpenShift migration target cluster.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						You must be logged in as a user with <literal>cluster-admin</literal> permissions.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Create the openshift-mtv project:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: project.openshift.io/v1
kind: Project
metadata:
  name: openshift-mtv
EOF</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Create an <literal>OperatorGroup</literal> CR called <literal>migration</literal>:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: migration
  namespace: openshift-mtv
spec:
  targetNamespaces:
    - openshift-mtv
EOF</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Create a <literal>Subscription</literal> CR for the Operator:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: mtv-operator
  namespace: openshift-mtv
spec:
  channel: release-v2.9
  installPlanApproval: Automatic
  name: mtv-operator
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  startingCSV: "mtv-operator.v2.9.4"
EOF</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Create a <literal>ForkliftController</literal> CR:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: ForkliftController
metadata:
  name: forklift-controller
  namespace: openshift-mtv
spec:
  olm_managed: true
EOF</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Verify that the MTV pods are running:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ oc get pods -n openshift-mtv</programlisting>
					<simpara>
						The following is example output:
					</simpara>
					<formalpara>
						<title>Example</title>
						<para>
							
<screen>NAME                                                    READY   STATUS    RESTARTS   AGE
forklift-api-bb45b8db4-cpzlg                            1/1     Running   0          6m34s
forklift-controller-7649db6845-zd25p                    2/2     Running   0          6m38s
forklift-must-gather-api-78fb4bcdf6-h2r4m               1/1     Running   0          6m28s
forklift-operator-59c87cfbdc-pmkfc                      1/1     Running   0          28m
forklift-ui-plugin-5c5564f6d6-zpd85                     1/1     Running   0          6m24s
forklift-validation-7d84c74c6f-fj9xg                    1/1     Running   0          6m30s
forklift-volume-populator-controller-85d5cb64b6-mrlmc   1/1     Running   0          6m36s</screen>
						</para>
					</formalpara>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="configuring-mtv-operator_mtv">
			<title>Configuring the MTV Operator</title>
			<simpara role="_abstract">
				You can configure the following settings of the MTV Operator by modifying the <literal>ForkliftController</literal> custom resource (CR), or in the <emphasis role="strong">Settings</emphasis> section of the <emphasis role="strong">Overview</emphasis> page, unless otherwise indicated.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Maximum number of virtual machines (VMs) or disks per plan that Migration Toolkit for Virtualization (MTV) can migrate simultaneously.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						How long <literal>must gather</literal> reports are retained before being automatically deleted (<literal>ForkliftController</literal> CR only).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						CPU limit allocated to the main controller container.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Memory limit allocated to the main controller container.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Interval at which a new snapshot is requested before initiating a warm migration.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Frequency with which the system checks the status of snapshot creation or removal during a warm migration.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Percentage of space in persistent volumes allocated as file system overhead when the <literal>storageclass</literal> is <literal>filesystem</literal> (<literal>ForkliftController</literal> CR only).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Fixed amount of additional space allocated in persistent block volumes. This setting is applicable for any <literal>storageclass</literal> that is block-based (<literal>ForkliftController</literal> CR only).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Configuration map of operating systems to preferences for vSphere source providers (<literal>ForkliftController</literal> CR only).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Configuration map of operating systems to preferences for Red Hat Virtualization (RHV) source providers (<literal>ForkliftController</literal> CR only).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Whether to retain importer pods so that the Containerized Data Importer (CDI) does not delete them during migration (<literal>ForkliftController</literal> CR only).
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				The procedure for configuring these settings by using the user interface is presented in <link linkend="mtv-overview-page_mtv">Configuring MTV settings</link>. The procedure for configuring these settings by modifying the <literal>ForkliftController</literal> CR is presented following.
			</simpara>
			<itemizedlist>
				<title>Procedure</title>
				<listitem>
					<simpara>
						Change a parameter’s value in the <literal>spec</literal> section of the <literal>ForkliftController</literal> CR by adding the parameter and value as follows:
					</simpara>
					
<programlisting language="YAML" linenumbering="unnumbered">spec:
  parameter: value <co xml:id="CO1-1"></co></programlisting>
					<calloutlist>
						<callout arearefs="CO1-1">
							<para>
								Parameters that you can configure using the CLI are shown in the table that follows, along with a description of each parameter and its default value.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</itemizedlist>
			<table colsep="1" frame="all" rowsep="1">
				<title>MTV Operator parameters</title>
				<tgroup cols="3">
					<colspec colname="col_1" colwidth="33*"></colspec>
					<colspec colname="col_2" colwidth="33*"></colspec>
					<colspec colname="col_3" colwidth="33*"></colspec>
					<thead>
						<row>
							<entry align="left" valign="top">Parameter</entry>
							<entry align="left" valign="top">Description</entry>
							<entry align="left" valign="top">Default value</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>controller_max_vm_inflight</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Varies with provider as follows:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										For all migrations except OVA or VMware migrations: The maximum number of disks that MTV can transfer simultaneously.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										For Open Virtual Appliance (OVA) migrations: The maximum number of VMs that MTV can migrate simultaneously.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										For VMware migrations, the parameter has the following meanings:
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												Cold migration:
											</simpara>
											<itemizedlist>
												<listitem>
													<simpara>
														To local OpenShift Virtualization: VMs for each ESXi host that can migrate simultaneously.
													</simpara>
												</listitem>
												<listitem>
													<simpara>
														To remote OpenShift Virtualization: Disks for each ESXi host that can migrate simultaneously.
													</simpara>
												</listitem>
											</itemizedlist>
										</listitem>
										<listitem>
											<simpara>
												Warm migration: Disks for each ESXi host that can migrate simultaneously.
											</simpara>
											<simpara>
												See <link linkend="max-concurrent-vms_mtv">Configuring the controller_max_vm_inflight parameter</link> for a detailed explanation of this parameter.
											</simpara>
										</listitem>
									</itemizedlist>
								</listitem>
							</itemizedlist>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>20</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>must_gather_api_cleanup_max_age</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								The duration in hours for retaining <literal>must gather</literal> reports before they are automatically deleted.
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>-1</literal> (disabled)
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>controller_container_limits_cpu</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								The CPU limit allocated to the main controller container.
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>500m</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>controller_container_limits_memory</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								The memory limit allocated to the main controller container.
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>800Mi</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>controller_precopy_interval</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								The interval in minutes at which a new snapshot is requested before initiating a warm migration.
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>60</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>controller_snapshot_status_check_rate_seconds</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								The frequency in seconds with which the system checks the status of snapshot creation or removal during a warm migration.
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>10</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>controller_filesystem_overhead</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Percentage of space in persistent volumes allocated as file system overhead when the <literal>storageclass</literal> is <literal>filesystem</literal>.
							</simpara>
							<simpara>
								<literal>ForkliftController</literal> CR only.
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>10</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>controller_block_overhead</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Fixed amount of additional space allocated in persistent block volumes. This setting is applicable for any <literal>storageclass</literal> that is block-based. It can be used when data, such as encryption headers, is written to the persistent volumes in addition to the content of the virtual disk.
							</simpara>
							<simpara>
								<literal>ForkliftController</literal> CR only.
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>0</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>vsphere_osmap_configmap_name</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Config map for vSphere source providers. This config map maps the operating system of the incoming VM to a OpenShift Virtualization preference name. This config map needs to be in the namespace where the MTV Operator is deployed.
							</simpara>
							<simpara>
								To see the list of preferences in your OpenShift Virtualization environment, open the OpenShift web console and click <emphasis role="strong">Virtualization</emphasis> &gt; <emphasis role="strong">Preferences</emphasis>.
							</simpara>
							<simpara>
								Add values to the config map when this parameter has the default value, <literal>forklift-vsphere-osmap.</literal> To override or delete values, specify a config map that is different from <literal>forklift-vsphere-osmap</literal>.
							</simpara>
							<simpara>
								<literal>ForkliftController</literal> CR only.
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>forklift-vsphere-osmap</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>ovirt_osmap_configmap_name</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Config map for RHV source providers. This config map maps the operating system of the incoming VM to a OpenShift Virtualization preference name. This config map needs to be in the namespace where the MTV Operator is deployed.
							</simpara>
							<simpara>
								To see the list of preferences in your OpenShift Virtualization environment, open the OpenShift web console and click <emphasis role="strong">Virtualization</emphasis> → <emphasis role="strong">Preferences</emphasis>.
							</simpara>
							<simpara>
								You can add values to the config map when this parameter has the default value, <literal>forklift-ovirt-osmap.</literal> To override or delete values, specify a config map that is different from <literal>forklift-ovirt-osmap</literal>.
							</simpara>
							<simpara>
								<literal>ForkliftController</literal> CR only.
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>forklift-ovirt-osmap</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>controller_retain_precopy_importer_pods</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Whether to retain importer pods so that the Containerized Data Importer (CDI) does not delete them during migration.
							</simpara>
							<simpara>
								<literal>ForkliftController</literal> CR only.
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>false</literal>
							</simpara>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
			<section xml:id="max-concurrent-vms_mtv">
				<title>Configuring the controller_max_vm_inflight parameter</title>
				<simpara role="_abstract">
					The value of <literal>controller_max_vm_inflight</literal> parameter, which is shown in the UI as <emphasis role="strong">Max concurrent virtual machine migrations</emphasis>, varies by the source provider of the migration
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							For all migrations except Open Virtual Appliance (OVA) or VMware migrations, the parameter specifies the maximum number of <emphasis>disks</emphasis> that Migration Toolkit for Virtualization (MTV) can transfer simultaneously. In these migrations, MTV migrates the disks in parallel. This means that if the combined number of disks that you want to migrate is greater than the value of the setting, additional disks must wait until the queue is free, without regard for whether a VM has finished migrating.
						</simpara>
						<simpara>
							For example, if the value of the parameter is 15, and VM A has 5 disks, VM B has 5 disks, and VM C has 6 disks, all the disks except for the 16th disk start migrating at the same time. Once any of them has migrated, the 16th disk can be migrated, even though not all the disks on VM A and the disks on VM B have finished migrating.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							For OVA migrations, the parameter specifies the maximum number of <emphasis>VMs</emphasis> that MTV can migrate simultaneously, meaning that all additional disks must wait until at least one VM has been completely migrated.
						</simpara>
						<simpara>
							For example, if the value of the parameter is 2, and VM A has 5 disks, VM B has 5 disks, and VM C has 6 disks, all the disks on VM C must wait to migrate until either all the disks on VM A or on VM B finish migrating.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							For VMware migrations, the parameter has the following meanings:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Cold migration:
								</simpara>
								<itemizedlist>
									<listitem>
										<simpara>
											To local OpenShift Virtualization: VMs for each ESXi host that can migrate simultaneously.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											To remote OpenShift Virtualization: Disks for each ESXi host that can migrate simultaneously.
										</simpara>
									</listitem>
								</itemizedlist>
							</listitem>
							<listitem>
								<simpara>
									Warm migration: Disks for each ESXi host that can migrate simultaneously.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
				</itemizedlist>
			</section>
		</section>
	</chapter>
	<chapter xml:id="migrating-vms-ocp-web-console_mtv">
		<title>Migrating virtual machines by using the Red Hat OpenShift web console</title>
		<simpara>
			Use the MTV user interface to migrate virtual machines (VMs). It is located in the <emphasis role="strong">Virtualization</emphasis> section of the Red Hat OpenShift web console.
		</simpara>
		<section xml:id="mtv-ui_mtv">
			<title>The MTV user interface</title>
			<simpara role="_abstract">
				The Migration Toolkit for Virtualization (MTV) user interface is integrated into the OpenShift web console.
			</simpara>
			<simpara>
				In the left panel, you can choose a page related to a component of the migration progress, for example, <emphasis role="strong">Providers</emphasis>. Or, if you are an administrator, you can choose <emphasis role="strong">Overview</emphasis>, which contains information about migrations and lets you configure MTV settings.
			</simpara>
			<simpara>
				In pages related to components, you can click on the <emphasis role="strong">Projects</emphasis> list, which is in the upper-left portion of the page, and see which projects (namespaces) you are allowed to work with.
			</simpara>
			<section xml:id="mtv-overview-page_mtv">
				<title>The MTV Overview page</title>
				<simpara role="_abstract">
					The Migration Toolkit for Virtualization (MTV) <emphasis role="strong">Overview</emphasis> page displays system-wide information about migrations and a list of <emphasis role="strong">Settings</emphasis> you can change.
				</simpara>
				<simpara>
					If you have Administrator privileges, you can access the <emphasis role="strong">Overview</emphasis> page by clicking <emphasis role="strong">Migration</emphasis> → <emphasis role="strong">Overview</emphasis> in the Red Hat OpenShift web console.
				</simpara>
				<simpara>
					The <emphasis role="strong">Overview</emphasis> page has 3 tabs:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Overview
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							YAML
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Health
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							History
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Settings
						</simpara>
					</listitem>
				</itemizedlist>
				<section xml:id="overview-tab_mtv">
					<title>Overview tab</title>
					<simpara>
						The <emphasis role="strong">Overview</emphasis> tab is to help you quickly create providers and find information about the whole system:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								In the upper pane, is the <emphasis role="strong">Welcome</emphasis> section, which includes buttons that let you open the <emphasis role="strong">Create provider</emphasis> UI for each vendor (VMware, Open Virtual Appliance, OpenStack, Red Hat Virtualization, and OpenShift Virtualization). You can close this section by clicking the Options menu 
								<inlinemediaobject>
									<imageobject>
										<imagedata contentdepth="20" fileref="images/modules/images/kebab.png" format="PNG" />
									</imageobject>
									<textobject>
										<phrase>kebab</phrase>
									</textobject>
								</inlinemediaobject>
								 in the upper-right corner and selecting <emphasis role="strong">Hide from view</emphasis>. You can reopen it by clicking <emphasis role="strong">Show the welcome card</emphasis> in the upper-right corner.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the center-left pane is a "donut" chart named <emphasis role="strong">Virtual machines</emphasis>. This chart shows the number of running, failed, and successful virtual machine migrations that MTV ran for the time interval that you select. You can choose a different interval by clicking the list in the upper-right corner of the pane. You can select a different interval by clicking the list. The options are: Last 24 hours, Last 10 days, Last 31 days, and All. By clicking on each division of the chart, you can navigate to the <emphasis role="strong">History</emphasis> tab for information about the migrations.
							</simpara>
							<note>
								<simpara>
									Data for this chart includes only the most recent run of a migration plan that was modified due to a failure. For example, if a plan with 3 VMs fails 4 times, then this chart shows that 3 VMs failed, not 12.
								</simpara>
							</note>
						</listitem>
						<listitem>
							<simpara>
								In the center-right pane is an area chart named <emphasis role="strong">Migration history</emphasis>. This chart shows the number of migrations that succeeded, failed, or were running during the interval shown in the title of the chart. You can choose a different interval by clicking the Options menu 
								<inlinemediaobject>
									<imageobject>
										<imagedata contentdepth="20" fileref="images/modules/images/kebab.png" format="PNG" />
									</imageobject>
									<textobject>
										<phrase>kebab</phrase>
									</textobject>
								</inlinemediaobject>
								 in the upper-right corner of the pane. The options are: Last 24 hours, Last 10 days, and Last 31 days. By clicking on each division of the chart, you can navigate to the <emphasis role="strong">History</emphasis> tab for information about the migrations.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the lower-left pane is a "donut" chart named <emphasis role="strong">Migration plans</emphasis>. This chart shows the current number of migration plans grouped by their status. This includes plans that were not started, cannot be started, are incomplete, archived, paused, or have an unknown status. By clicking the <emphasis role="strong">Show all plans</emphasis> link, you can quickly navigate to the <emphasis role="strong">Migration plans</emphasis> page.
							</simpara>
							<note>
								<simpara>
									Since a single migration might involve many virtual machines, the number of migrations performed using MTV might vary significantly from the number of migrated virtual machines.
								</simpara>
							</note>
						</listitem>
						<listitem>
							<simpara>
								In the lower-right pane is a table named <emphasis role="strong">MTV health</emphasis>. This table lists all of the MTV pods. The most important one, <literal>forklift-controller</literal>, is first. The remaining pods are listed in alphabetical order. The <emphasis role="strong">View all</emphasis> link opens the <emphasis role="strong">Health</emphasis> tab. The status and creation time of each pod are listed. There is also a link to the logs of each pod.
							</simpara>
						</listitem>
					</itemizedlist>
				</section>
				<section xml:id="overview-yaml-tab_mtv">
					<title>YAML tab</title>
					<simpara>
						The <emphasis role="strong">YAML</emphasis> tab displays the <literal>ForkliftController</literal> custom resource (CR) that defines the operation of the MTV Operator. You can modify the CR in this tab.
					</simpara>
				</section>
				<section xml:id="overview-health-tab_mtv">
					<title>Health tab</title>
					<simpara>
						The <emphasis role="strong">Health</emphasis> tab has two panes:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								In the upper pane, there is a table named <emphasis role="strong">Health</emphasis>. It lists all the MTV pods. The most important one, <literal>forklift-controller</literal>, is first. The remaining pods are listed in alphabetical order. For each pod, the status, and creation time of the pod are listed, and there is a link to the logs of the pod.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the lower pane, there is a table named <emphasis role="strong">Conditions</emphasis>. It lists the following possible types (states) of the MTV Operator, the status of the type, the last time the condition was updated, the reason for the update, and a message about the condition.
							</simpara>
						</listitem>
					</itemizedlist>
				</section>
				<section xml:id="overview-history-tab_mtv">
					<title>History tab</title>
					<simpara>
						The <emphasis role="strong">History</emphasis> tab displays information about migrations.
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								In the upper-left of the page, there is a filter that you can use to display only migrations of a certain status, for example, <emphasis role="strong">Succeeded</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To the right of the filter is the <emphasis role="strong">Group by plan</emphasis> toggle switch, which lets you display either all migrations or view only the most recent migration run per plan within the specified time range.
							</simpara>
						</listitem>
					</itemizedlist>
				</section>
				<section xml:id="overview-settings-tab_mtv">
					<title>Settings tab</title>
					<simpara>
						The table that follows describes the settings that are visible in the <emphasis role="strong">Settings</emphasis> tab, their default values, and other possible values that can be set or chosen, if needed.
					</simpara>
					<table colsep="1" frame="all" rowsep="1">
						<title>MTV settings</title>
						<tgroup cols="4">
							<colspec colname="col_1" colwidth="25*"></colspec>
							<colspec colname="col_2" colwidth="25*"></colspec>
							<colspec colname="col_3" colwidth="25*"></colspec>
							<colspec colname="col_4" colwidth="25*"></colspec>
							<thead>
								<row>
									<entry align="left" valign="top">Setting</entry>
									<entry align="left" valign="top">Description</entry>
									<entry align="left" valign="top">Default value</entry>
									<entry align="left" valign="top">Additional values</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Maximum concurrent VM migrations
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Varies with provider as follows:
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												For all migrations except OVA or VMware migrations: The maximum number of disks that MTV can transfer simultaneously.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												For OVA migrations: The maximum number of VMs that MTV can migrate simultaneously.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												For VMware migrations, the setting has the following meanings:
											</simpara>
											<itemizedlist>
												<listitem>
													<simpara>
														Cold migration:
													</simpara>
													<itemizedlist>
														<listitem>
															<simpara>
																To local OpenShift Virtualization: VMs for each ESXi host that can migrate simultaneously.
															</simpara>
														</listitem>
														<listitem>
															<simpara>
																To remote OpenShift Virtualization: Disks for each ESXi host that can migrate simultaneously.
															</simpara>
														</listitem>
													</itemizedlist>
												</listitem>
												<listitem>
													<simpara>
														Warm migration: Disks for each ESXi host that can migrate simultaneously.
													</simpara>
													<simpara>
														See <link linkend="max-concurrent-vms_mtv">Configuring the controller_max_vm_inflight parameter</link> for a detailed explanation of this setting.
													</simpara>
												</listitem>
											</itemizedlist>
										</listitem>
									</itemizedlist>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										20.
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Adjustable by either using the <emphasis role="strong">+</emphasis> and <emphasis role="strong">-</emphasis> keys to set a different value or by clicking the textbox and entering a new value.
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Controller main container CPU limit
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										The CPU limit that is allocated to the main controller container, in milliCPUs (m).
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										500 m.
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Adjustable by selecting another value from the list. Options: 200 m, 500 m, 2000 m, 8000 m.
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Controller main container memory limit
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										The memory limit that is allocated to the main controller container in mebibytes (Mi).
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										800 Mi.
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Adjustable by selecting another value from the list. Options: 200 Mi, 800 Mi, 2000 Mi, 8000 Mi.
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Controller inventory container memory limit
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										The memory limit that is allocated to the inventory controller container in mebibytes (Mi).
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										1000 Mi.
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Adjustable by selecting another value from the list. Options: 400 Mi, 1000 Mi, 2000 Mi, 8000 Mi.
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Precopy internal (minutes)
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										The interval in minutes at which a new snapshot is requested before initiating a warm migration.
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										60 minutes.
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Adjustable by selecting another value from the list. Options: 5 minutes, 30 minutes, 60 minutes, 120 minutes.
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Snapshot polling interval
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										The interval in seconds between which the system checks the status of snapshot creation or removal during a warm migration.
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										10 seconds.
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Adjustable by choosing another value from the list. Options: 1 second, 5 seconds, 10 seconds, 60 seconds.
									</simpara>
									</entry>
								</row>
							</tbody>
						</tgroup>
					</table>
				</section>
			</section>
		</section>
		<section xml:id="migrating-vms-mtv-ui_mtv">
			<title>Migrating virtual machines using the MTV user interface</title>
			<simpara role="_abstract">
				Use the MTV user interface to migrate VMs from the following providers:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						VMware vSphere
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Red Hat Virtualization (RHV)
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						OpenStack
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Open Virtual Appliances (OVAs) that were created by VMware vSphere
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						OpenShift Virtualization clusters
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				For all migrations, you specify the source provider, the destination provider, and the migration plan. The specific procedures vary per provider.
			</simpara>
			<important>
				<simpara>
					You must ensure that all <link linkend="prerequisites-for-all-providers_mtv">Prerequisites and software requirements for all providers</link> and all <link linkend="prerequisites-per-provider_mtv">Specific software requirements for each provider</link> are met.
				</simpara>
				<simpara>
					VMware only: You must have the minimal set of <link linkend="vmware-privileges_mtv">VMware privileges</link>.
				</simpara>
				<simpara>
					VMware only: Creating a <link linkend="creating-vddk-image_mtv">VMware Virtual Disk Development Kit (VDDK)</link> image increases migration speed.
				</simpara>
			</important>
		</section>
	</chapter>
	<chapter xml:id="migrating-vmware">
		<title>Migrating virtual machines from VMware vSphere</title>
		<section xml:id="adding-source-provider_vmware">
			<title>Adding a VMware vSphere source provider</title>
			<simpara role="_abstract">
				You can migrate VMware vSphere VMs from VMware vCenter or from a VMware ESX/ESXi server without going through vCenter.
			</simpara>
			<important>
				<simpara>
					EMS enforcement is disabled for migrations with VMware vSphere source providers in order to enable migrations from versions of vSphere that are supported by Migration Toolkit for Virtualization but do not comply with the 2023 FIPS requirements. Therefore, users should consider whether migrations from vSphere source providers risk their compliance with FIPS. Supported versions of vSphere are specified in <link linkend="compatibility-guidelines_mtv">Software compatibility guidelines</link>.
				</simpara>
			</important>
			<important>
				<simpara>
					Anti-virus software can cause migrations to fail. It is strongly recommended to remove such software from source VMs before you start a migration.
				</simpara>
			</important>
			<important>
				<simpara>
					MTV does not support migrating VMware Non-Volatile Memory Express (NVMe) disks.
				</simpara>
			</important>
			<note>
				<simpara>
					If you input any value of maximum transmission unit (MTU) besides the default value in your migration network, you must also input the same value in the OpenShift transfer network that you use. For more information about the OpenShift transfer network, see <link linkend="creating-plan-wizard-290-vmware_vmware">Creating a VMware vSphere migration plan using the MTV wizard</link>.
				</simpara>
			</note>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						It is strongly recommended to create a VMware Virtual Disk Development Kit (VDDK) image in a secure registry that is accessible to all clusters. A VDDK image accelerates migration and reduces the risk of a plan failing. If you are not using VDDK and a plan fails, retry with VDDK installed. For more information, see <link linkend="creating-vddk-image_mtv">Creating a VDDK image</link>.
					</simpara>
				</listitem>
			</itemizedlist>
			<warning>
				<simpara>
					Virtual machine (VM) migrations do not work without VDDK when a VM is backed by VMware vSAN.
				</simpara>
			</warning>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Access the <emphasis role="strong">Create provider</emphasis> page for VMware by doing one of the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Providers</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										Click <emphasis role="strong">Create Provider</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Click <emphasis role="strong">VMware</emphasis>.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Overview</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										In the <emphasis role="strong">Welcome</emphasis> pane, click <emphasis role="strong">VMware</emphasis>.
									</simpara>
									<simpara>
										If the <emphasis role="strong">Welcome</emphasis> pane is not visible, click <emphasis role="strong">Show the welcome card</emphasis> in the upper-right corner of the page, and click <emphasis role="strong">VMware</emphasis> when the <emphasis role="strong">Welcome</emphasis> pane opens.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Specify the following fields:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								<emphasis role="strong">Provider details</emphasis>
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Provider resource name</emphasis>: Name of the source provider.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Endpoint type</emphasis>: Select the vSphere provider endpoint type. Options: <emphasis role="strong">vCenter</emphasis> or <emphasis role="strong">ESXi</emphasis>. You can migrate virtual machines from vCenter, an ESX/ESXi server that is not managed by vCenter, or from an ESX/ESXi server that is managed by vCenter but does not go through vCenter.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">URL</emphasis>: URL of the SDK endpoint of the vCenter on which the source VM is mounted. Ensure that the URL includes the <literal>sdk</literal> path, usually <literal>/sdk</literal>. For example, <literal>https://vCenter-host-example.com/sdk</literal>. If a certificate for FQDN is specified, the value of this field needs to match the FQDN in the certificate.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">VDDK init image</emphasis>: <literal>VDDKInitImage</literal> path. It is strongly recommended to create a VDDK init image to accelerate migrations. For more information, see <link linkend="creating-vddk-image_mtv">Creating a VDDK image</link>.
									</simpara>
									<simpara>
										Do one of the following:
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												Select the <emphasis role="strong">Skip VMWare Virtual Disk Development Kit (VDDK) SDK acceleration (not recommended)</emphasis>.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Enter the path in the <emphasis role="strong">VDDK init image</emphasis> text box. Format: <literal>&lt;registry_route_or_server_path&gt;/vddk:&lt;tag&gt;</literal>.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Upload a VDDK archive and build a VDDK init image from the archive by doing the following:
											</simpara>
											<itemizedlist>
												<listitem>
													<simpara>
														Click <emphasis role="strong">Browse</emphasis> next to the <emphasis role="strong">VDDK init image archive</emphasis> text box, select the desired file, and click <emphasis role="strong">Select</emphasis>.
													</simpara>
												</listitem>
												<listitem>
													<simpara>
														Click <emphasis role="strong">Upload</emphasis>.
													</simpara>
													<simpara>
														The URL of the uploaded archive is displayed in the <emphasis role="strong">VDDK init image archive</emphasis> text box.
													</simpara>
												</listitem>
											</itemizedlist>
										</listitem>
									</itemizedlist>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Provider credentials</emphasis>
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Username</emphasis>: vCenter user or ESXi user. For example, <literal>user@vsphere.local</literal>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Password</emphasis>: vCenter user password or ESXi user password.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="3">
				<listitem>
					<simpara>
						Choose one of the following options for validating CA certificates:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use a custom CA certificate</emphasis>: Migrate after validating a custom CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use the system CA certificate</emphasis>: Migrate after validating the system CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Skip certificate validation</emphasis> : Migrate without validating a CA certificate.
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										To use a custom CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to left, and <emphasis>either</emphasis> drag the CA certificate to the text box <emphasis>or</emphasis> browse for it and click <emphasis role="strong">Select</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To use the system CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to the left, and leave the <emphasis role="strong">CA certificate</emphasis> text box empty.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To skip certificate validation, toggle the <emphasis role="strong">Skip certificate validation</emphasis> switch to the right.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click <emphasis role="strong">Fetch certificate from URL</emphasis>. The <emphasis role="strong">Verify certificate</emphasis> window opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If the details are correct, select the <emphasis role="strong">I trust the authenticity of this certificate</emphasis> checkbox, and then, click <emphasis role="strong">Confirm</emphasis>. If not, click <emphasis role="strong">Cancel</emphasis>, and then, enter the correct certificate information manually.
							</simpara>
							<simpara>
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create provider</emphasis> to add and save the provider.
					</simpara>
					<simpara>
						The provider appears in the list of providers.
					</simpara>
					<note>
						<simpara>
							It might take a few minutes for the provider to have the status <literal>Ready</literal>.
						</simpara>
					</note>
				</listitem>
				<listitem>
					<simpara>
						Optional: Add access to the UI of the provider:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								On the <emphasis role="strong">Providers</emphasis> page, click the provider.
							</simpara>
							<simpara>
								The <emphasis role="strong">Provider details</emphasis> page opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the <emphasis role="strong">Edit</emphasis> icon under <emphasis role="strong">External UI web link</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Enter the link and click <emphasis role="strong">Save</emphasis>.
							</simpara>
							<note>
								<simpara>
									If you do not enter a link, MTV attempts to calculate the correct link.
								</simpara>
								<itemizedlist>
									<listitem>
										<simpara>
											If MTV succeeds, the hyperlink of the field points to the calculated link.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											If MTV does not succeed, the field remains empty.
										</simpara>
									</listitem>
								</itemizedlist>
							</note>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="selecting-migration-network-for-vmware-source-provider_vmware">
			<title>Selecting a migration network for a VMware source provider</title>
			<simpara role="_abstract">
				You can select a migration network in the Red Hat OpenShift web console for a source provider to reduce risk to the source environment and to improve performance.
			</simpara>
			<simpara>
				Using the default network for migration can result in poor performance because the network might not have sufficient bandwidth. This situation can have a negative effect on the source platform because the disk transfer operation might saturate the network.
			</simpara>
			<note>
				<simpara>
					You can also control the network from which disks are transferred from a host by using the Network File Copy (NFC) service in vSphere.
				</simpara>
			</note>
			<note>
				<simpara>
					If you input any value of maximum transmission unit (MTU) besides the default value in your migration network, you must also input the same value in the OpenShift transfer network that you use. For more information about the OpenShift transfer network, see <link linkend="creating-plan-wizard-290-vmware_vmware">Creating a migration plan</link>.
				</simpara>
			</note>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						The migration network must have enough throughput, minimum speed of 10 Gbps, for disk transfer.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The migration network must be accessible to the OpenShift Virtualization nodes through the default gateway.
					</simpara>
					<note>
						<simpara>
							The source virtual disks are copied by a pod that is connected to the pod network of the target namespace.
						</simpara>
					</note>
				</listitem>
				<listitem>
					<simpara>
						The migration network should have jumbo frames enabled.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration</emphasis> → <emphasis role="strong">Providers for virtualization</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the host number in the <emphasis role="strong">Hosts</emphasis> column beside a provider to view a list of hosts.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Select one or more hosts and click <emphasis role="strong">Select migration network</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Network</emphasis>: Network name
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">ESXi host admin username</emphasis>: For example, <literal>root</literal>
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">ESXi host admin password</emphasis>: Password
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Save</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Verify that the status of each host is <emphasis role="strong">Ready</emphasis>.
					</simpara>
					<simpara>
						If a host status is not <emphasis role="strong">Ready</emphasis>, the host might be unreachable on the migration network or the credentials might be incorrect. You can modify the host configuration and save the changes.
					</simpara>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="adding-source-provider_dest_vmware">
			<title>Adding an OpenShift Virtualization destination provider</title>
			<simpara role="_abstract">
				You can use a Red Hat OpenShift Virtualization provider as both a source provider and a destination provider.
			</simpara>
			<simpara>
				Specifically, the host cluster that is automatically added as a OpenShift Virtualization provider can be used as both a source provider and a destination provider.
			</simpara>
			<simpara>
				You can also add another OpenShift Virtualization destination provider to the Red Hat OpenShift web console in addition to the default OpenShift Virtualization destination provider, which is the cluster where you installed MTV.
			</simpara>
			<simpara>
				You can migrate VMs from the cluster that MTV is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						You must have an OpenShift Virtualization <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/authentication_and_authorization/using-service-accounts">service account token</link> with <literal>cluster-admin</literal> privileges.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Access the <emphasis role="strong">Create OpenShift Virtualization provider</emphasis> interface by doing one of the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Providers</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										Click <emphasis role="strong">Create Provider</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Click <emphasis role="strong">OpenShift Virtualization</emphasis>.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Overview</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										In the <emphasis role="strong">Welcome</emphasis> pane, click <emphasis role="strong">OpenShift Virtualization</emphasis>.
									</simpara>
									<simpara>
										If the <emphasis role="strong">Welcome</emphasis> pane is not visible, click <emphasis role="strong">Show the welcome card</emphasis> in the upper-right corner of the page, and click <emphasis role="strong">OpenShift Virtualization</emphasis> when the <emphasis role="strong">Welcome</emphasis> pane opens.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Provider resource name</emphasis>: Name of the source provider
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">URL</emphasis>: URL of the endpoint of the API server
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Service account bearer token</emphasis>: Token for a service account with <literal>cluster-admin</literal> privileges
							</simpara>
							<simpara>
								If both <emphasis role="strong">URL</emphasis> and <emphasis role="strong">Service account bearer token</emphasis> are left blank, the local OpenShift cluster is used.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Choose one of the following options for validating CA certificates:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use a custom CA certificate</emphasis>: Migrate after validating a custom CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use the system CA certificate</emphasis>: Migrate after validating the system CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Skip certificate validation</emphasis> : Migrate without validating a CA certificate.
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										To use a custom CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to left, and <emphasis>either</emphasis> drag the CA certificate to the text box <emphasis>or</emphasis> browse for it and click <emphasis role="strong">Select</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To use the system CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to the left, and leave the <emphasis role="strong">CA certificate</emphasis> text box empty.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To skip certificate validation, toggle the <emphasis role="strong">Skip certificate validation</emphasis> switch to the right.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click <emphasis role="strong">Fetch certificate from URL</emphasis>. The <emphasis role="strong">Verify certificate</emphasis> window opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If the details are correct, select the <emphasis role="strong">I trust the authenticity of this certificate</emphasis> checkbox, and then, click <emphasis role="strong">Confirm</emphasis>. If not, click <emphasis role="strong">Cancel</emphasis>, and then, enter the correct certificate information manually.
							</simpara>
							<simpara>
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create provider</emphasis> to add and save the provider.
					</simpara>
					<simpara>
						The provider appears in the list of providers.
					</simpara>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="selecting-migration-network-for-virt-provider_dest_vmware">
			<title>Selecting a migration network for an OpenShift Virtualization provider</title>
			<simpara role="_abstract">
				You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.
			</simpara>
			<simpara>
				After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.
			</simpara>
			<simpara>
				If you do not select a migration network, the default migration network is the <literal>pod</literal> network, which might not be optimal for disk transfer.
			</simpara>
			<note>
				<simpara>
					You can override the default migration network of the provider by selecting a different network when you create a migration plan.
				</simpara>
			</note>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration</emphasis> &gt; <emphasis role="strong">Providers for virtualization</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the OpenShift Virtualization provider whose migration network you want to change.
					</simpara>
					<simpara>
						When the <emphasis role="strong">Providers detail</emphasis> page opens:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the <emphasis role="strong">Networks</emphasis> tab.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Set default transfer network</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Select a default transfer network from the list and click <emphasis role="strong">Save</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Configure a gateway in the network used for MTV migrations by completing the following steps:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Networking</emphasis> &gt; <emphasis role="strong">NetworkAttachmentDefinitions</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Select the appropriate default transfer network NAD.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the <emphasis role="strong">YAML</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Add <literal>forklift.konveyor.io/route</literal> to the metadata:annotations section of the YAML, as in the following example:
							</simpara>
							
<programlisting language="yaml" linenumbering="unnumbered">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt; <co xml:id="CO2-1"></co></programlisting>
							<calloutlist>
								<callout arearefs="CO2-1">
									<para>
										The <literal>NetworkAttachmentDefinition</literal> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.
									</para>
								</callout>
							</calloutlist>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Save</emphasis>.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="creating-plan-wizard-290-vmware_vmware">
			<title>Creating a VMware vSphere migration plan by using the MTV wizard</title>
			<simpara role="_abstract">
				You can migrate VMware vSphere virtual machines (VMs) from VMware vCenter or from a VMware ESX or ESXi server by using the Migration Toolkit for Virtualization plan creation wizard.
			</simpara>
			<simpara>
				The wizard is designed to lead you step-by-step in creating a migration plan.
			</simpara>
			<warning>
				<simpara>
					Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.
				</simpara>
				<simpara>
					This prevents concurrent disk access to the storage the guest points to.
				</simpara>
			</warning>
			<important>
				<simpara>
					A plan cannot contain more than 500 VMs or 500 disks.
				</simpara>
			</important>
			<important>
				<simpara>
					When you click <emphasis role="strong">Create plan</emphasis> on the <emphasis role="strong">Review and create</emphasis> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <emphasis role="strong">Plan details</emphasis> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.
				</simpara>
			</important>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						Have a VMware source provider and a OpenShift Virtualization destination provider. For more information, see <link linkend="adding-source-provider_vmware">Adding a VMware vSphere source provider</link> or <link linkend="adding-source-provider_dest_vmware">Adding an OpenShift Virtualization destination provider</link>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If you plan to create a <emphasis role="strong">Network map</emphasis> or a <emphasis role="strong">Storage map</emphasis> that will be used by more than one migration plan, create it in the <emphasis role="strong">Network maps</emphasis> or <emphasis role="strong">Storage maps</emphasis> page of the UI before you create a migration plan that uses that map.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						On the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Migration plans</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create plan</emphasis>.
					</simpara>
					<simpara>
						The <emphasis role="strong">Create migration plan</emphasis> wizard opens.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">General</emphasis> page, specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Plan name</emphasis>: Enter a name.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Plan project</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Source provider</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Target provider</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Target project</emphasis>: Select from the list.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Virtual machines</emphasis> page, select the virtual machines you want to migrate and click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Network map</emphasis> page, choose one of the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use an existing network map</emphasis>: Select an existing network map from the list.
							</simpara>
							<simpara>
								These are network maps available for all plans, and therefore, they are <emphasis>ownerless</emphasis> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <emphasis>owner</emphasis> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</simpara>
							<note>
								<simpara>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</simpara>
							</note>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use a new network map</emphasis>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which will then be considered to be its owner. Maps that you create using this option are not available in the <emphasis role="strong">Use an existing network map</emphasis> option because each is created with an owner.
							</simpara>
							<note>
								<simpara>
									You can create an ownerless network map, which you and others can use for additional migration plans, in the <emphasis role="strong">Network Maps</emphasis> section of the UI.
								</simpara>
							</note>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Source network</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target network</emphasis>: Select from the list.
									</simpara>
									<simpara>
										If needed, click <emphasis role="strong">Add mapping</emphasis> to add another mapping.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Network map name</emphasis>: Enter a name or let MTV automatically generate a name for the network map.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Storage map</emphasis> page, choose one of the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use an existing storage map</emphasis>: Select an existing storage map from the list.
							</simpara>
							<simpara>
								These are storage maps available for all plans, and therefore, they are <emphasis>ownerless</emphasis> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <emphasis>owner</emphasis> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</simpara>
							<note>
								<simpara>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</simpara>
							</note>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use new storage map</emphasis>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. For each map, specify the following. Maps that you create using this option are not available in the <emphasis role="strong">Use an existing storage map</emphasis> option because each is created with an owner.
							</simpara>
							<note>
								<simpara>
									You can create an ownerless storage map, which you and others can use for additional migration plans, in the <emphasis role="strong">Storage Maps</emphasis> section of the UI.
								</simpara>
							</note>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Source storage</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target storage</emphasis>: Select from the list.
									</simpara>
									<simpara>
										If needed, click <emphasis role="strong">Add mapping</emphasis> to add another mapping.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Storage map name</emphasis>: Enter a name or let MTV automatically generate a name for the storage map.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Migration type</emphasis> page, choose one of the following:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Cold migration</emphasis> (default)
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Warm migration</emphasis>
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Other settings (optional)</emphasis> page, specify any of the following settings that are appropriate for your plan. All are optional.
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Disk decryption passphrases</emphasis>: For disks encrypted using Linux Unified Key Setup (LUKS).
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										Enter a decryption passphrase for a LUKS-encrypted device.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To add another passphrase, click <emphasis role="strong">Add passphrase</emphasis> and add a passphrase.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Repeat as needed.
									</simpara>
									<simpara>
										You do not need to enter the passphrases in a specific order. For each LUKS-encrypted device, MTV tries each passphrase until one unlocks the device.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Transfer Network</emphasis>: The network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										Verify that the transfer network is in the selected target project.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To choose a different transfer network, select a different transfer network from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Optional: To configure another OpenShift network in the OpenShift web console, click <emphasis role="strong">Networking &gt; NetworkAttachmentDefinitions</emphasis>.
									</simpara>
									<simpara>
										To learn more about the different types of networks OpenShift supports, see <link xlink:href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</link>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <link linkend="selecting-migration-network-for-vmware-source-provider_vmware">Selecting a migration network for a VMware source provider</link>.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Preserve static IPs</emphasis>: By default, virtual network interface controllers (vNICs) change during the migration process. As a result, vNICs that are configured with a static IP linked to the interface name in the guest VM lose their IP during migration.
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										To preserve static IPs, select the <emphasis role="strong">Preserve the static IPs</emphasis> checkbox.
									</simpara>
									<simpara>
										MTV then issues a warning message about any VMs whose vNIC properties are missing. To retrieve any missing vNIC properties, run those VMs in vSphere. This causes the vNIC properties to be reported to MTV.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Root device</emphasis>: Applies to multi-boot VM migrations only. By default, MTV uses the first bootable device detected as the root device.
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										To specify a different root device, enter it in the text box.
									</simpara>
									<simpara>
										MTV uses the following format for disk location: <literal>/dev/sd&lt;disk_identifier&gt;&lt;disk_partition&gt;</literal>. For example, if the second disk is the root device and the operating system is on the disk’s second partition, the format would be: <literal>/dev/sdb2</literal>. After you enter the boot device, click <emphasis role="strong">Save</emphasis>.
									</simpara>
									<simpara>
										If the conversion fails because the boot device provided is incorrect, it is possible to get the correct information by checking the conversion pod logs.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Shared disks</emphasis>: Applies to cold migrations only. Shared disks are disks that are attached to multiple VMs and that use the multi-writer option. These characteristics make shared disks difficult to migrate. By default, MTV migrates shared disks.
							</simpara>
							<note>
								<simpara>
									Migrating shared disks might slow down the migration process.
								</simpara>
							</note>
							<itemizedlist>
								<listitem>
									<simpara>
										To migrate shared disks in the migration plan, verify that <emphasis role="strong">Shared disks</emphasis> is selected in the checkbox.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To avoid migrating shared disks, clear the <emphasis role="strong">Shared disks</emphasis> checkbox.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Hooks (optional)</emphasis> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						To add a hook, select the appropriate <emphasis role="strong">Enable hook</emphasis> checkbox.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Enter the <emphasis role="strong">Hook runner image</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Enter the <emphasis role="strong">Ansible playbook</emphasis> of the hook in the window.
					</simpara>
					<note>
						<simpara>
							You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.
						</simpara>
					</note>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Review and Create</emphasis> page, review the information displayed.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Edit any item by doing the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click its <emphasis role="strong">Edit step</emphasis> link.
							</simpara>
							<simpara>
								The wizard opens to the page on which you defined the item.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit the item.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Either click <emphasis role="strong">Next</emphasis> to advance to the next page of the wizard, or click <emphasis role="strong">Skip to review</emphasis> to return directly to the <emphasis role="strong">Review and create</emphasis> page.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						When you finish reviewing the details of the plan, click <emphasis role="strong">Create plan</emphasis>. MTV validates your plan.
					</simpara>
					<simpara>
						When your plan is validated, the <emphasis role="strong">Plan details</emphasis> page for your plan opens in the <emphasis role="strong">Details</emphasis> tab.
					</simpara>
					<simpara>
						The <emphasis role="strong">Plan settings</emphasis> section of the page includes settings that you specified in the <emphasis role="strong">Other settings (optional)</emphasis> page and some additional optional settings. The steps below refer to the additional optional steps, but all of the settings can be edited by clicking the Options menu 
						<inlinemediaobject>
							<imageobject>
								<imagedata contentdepth="20" fileref="images/modules/images/kebab.png" format="PNG" />
							</imageobject>
							<textobject>
								<phrase>kebab</phrase>
							</textobject>
						</inlinemediaobject>
						, making the change, and then clicking <emphasis role="strong">Save</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Check the following items on the <emphasis role="strong">Plan settings</emphasis> section of the page:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Volume name template</emphasis>: Specifies a template for the volume interface name for the VMs in your plan.
							</simpara>
							<simpara>
								The template follows the Go template syntax and has access to the following variables:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<literal>.PVCName</literal>: Name of the PVC mounted to the VM using this volume
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.VolumeIndex</literal>: Sequential index of the volume interface (0-based)
									</simpara>
									<simpara>
										Examples
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>"disk-{{.VolumeIndex}}"</literal>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>"pvc-{{.PVCName}}"</literal>
									</simpara>
									<simpara>
										Variable names cannot exceed 63 characters.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To specify a volume name template for all the VMs in your plan, do the following:
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												Click the <emphasis role="strong">Edit</emphasis> icon.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Click <emphasis role="strong">Enter custom naming template</emphasis>.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Enter the template according to the instructions.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Click <emphasis role="strong">Save</emphasis>.
											</simpara>
										</listitem>
									</itemizedlist>
								</listitem>
								<listitem>
									<simpara>
										To specify a different volume name template only for specific VMs, do the following:
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												Click the <emphasis role="strong">Virtual Machines</emphasis> tab.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Select the desired VMs.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Click the Options menu 
												<inlinemediaobject>
													<imageobject>
														<imagedata contentdepth="20" fileref="images/modules/images/kebab.png" format="PNG" />
													</imageobject>
													<textobject>
														<phrase>kebab</phrase>
													</textobject>
												</inlinemediaobject>
												 of the VM.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Select <emphasis role="strong">Edit Volume name template</emphasis>.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Enter the template according to the instructions.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Click <emphasis role="strong">Save</emphasis>.
											</simpara>
											<important>
												<simpara>
													Changes you make on the <emphasis role="strong">Virtual Machines</emphasis> tab override any changes on the <emphasis role="strong">Plan details</emphasis> page.
												</simpara>
											</important>
										</listitem>
									</itemizedlist>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">PVC name template</emphasis>: Specifies a template for the name of the persistent volume claim (PVC) for the VMs in your plan.
							</simpara>
							<simpara>
								The template follows the Go template syntax and has access to the following variables:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<literal>.VmName</literal>: Name of the VM
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.PlanName</literal>: Name of the migration plan
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.DiskIndex</literal>: Initial volume index of the disk
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.RootDiskIndex</literal>: Index of the root disk
									</simpara>
									<simpara>
										Examples
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>"{{.VmName}}-disk-{{.DiskIndex}}"</literal>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>"{{if eq .DiskIndex .RootDiskIndex}}root{{else}}data{{end}}-{{.DiskIndex}}"</literal>
									</simpara>
									<simpara>
										Variable names cannot exceed 63 characters.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To specify a PVC name template for all the VMs in your plan, do the following:
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												Click the <emphasis role="strong">Edit</emphasis> icon.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Click <emphasis role="strong">Enter custom naming template</emphasis>.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Enter the template according to the instructions.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Click <emphasis role="strong">Save</emphasis>.
											</simpara>
										</listitem>
									</itemizedlist>
								</listitem>
								<listitem>
									<simpara>
										To specify a PVC name template only for specific VMs, do the following:
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												Click the <emphasis role="strong">Virtual Machines</emphasis> tab.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Select the desired VMs.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Click the Options menu 
												<inlinemediaobject>
													<imageobject>
														<imagedata contentdepth="20" fileref="images/modules/images/kebab.png" format="PNG" />
													</imageobject>
													<textobject>
														<phrase>kebab</phrase>
													</textobject>
												</inlinemediaobject>
												 of the VM.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Select <emphasis role="strong">Edit PVC name template</emphasis>.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Enter the template according to the instructions.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Click <emphasis role="strong">Save</emphasis>.
											</simpara>
											<important>
												<simpara>
													Changes you make on the <emphasis role="strong">Virtual Machines</emphasis> tab override any changes on the <emphasis role="strong">Plan details</emphasis> page.
												</simpara>
											</important>
										</listitem>
									</itemizedlist>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Network name template</emphasis>: Specifies a template for the network interface name for the VMs in your plan.
							</simpara>
							<simpara>
								The template follows the Go template syntax and has access to the following variables:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<literal>.NetworkName:</literal> If the target network is <literal>multus</literal>, add the name of the Multus Network Attachment Definition. Otherwise, leave this variable empty.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.NetworkNamespace</literal>: If the target network is <literal>multus</literal>, add the namespace where the Multus Network Attachment Definition is located.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.NetworkType</literal>: Network type. Options: <literal>multus</literal> or <literal>pod</literal>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.NetworkIndex</literal>: Sequential index of the network interface (0-based).
									</simpara>
									<simpara>
										Examples
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>"net-{{.NetworkIndex}}"</literal>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>{{if eq .NetworkType "pod"}}pod{{else}}multus-{{.NetworkIndex}}{{end}}"</literal>
									</simpara>
									<simpara>
										Variable names cannot exceed 63 characters.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To specify a network name template for all the VMs in your plan, do the following:
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												Click the <emphasis role="strong">Edit</emphasis> icon.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Click <emphasis role="strong">Enter custom naming template</emphasis>.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Enter the template according to the instructions.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Click <emphasis role="strong">Save</emphasis>.
											</simpara>
										</listitem>
									</itemizedlist>
								</listitem>
								<listitem>
									<simpara>
										To specify a different network name template only for specific VMs, do the following:
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												Click the <emphasis role="strong">Virtual Machines</emphasis> tab.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Select the desired VMs.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Click the Options menu 
												<inlinemediaobject>
													<imageobject>
														<imagedata contentdepth="20" fileref="images/modules/images/kebab.png" format="PNG" />
													</imageobject>
													<textobject>
														<phrase>kebab</phrase>
													</textobject>
												</inlinemediaobject>
												 of the VM.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Select <emphasis role="strong">Edit Network name template</emphasis>.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Enter the template according to the instructions.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Click <emphasis role="strong">Save</emphasis>.
											</simpara>
											<important>
												<simpara>
													Changes you make on the <emphasis role="strong">Virtual Machines</emphasis> tab override any changes on the <emphasis role="strong">Plan details</emphasis> page.
												</simpara>
											</important>
										</listitem>
									</itemizedlist>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Raw copy mode</emphasis>: By default, during migration, virtual machines (VMs) are converted using a tool named <literal>virt-v2v</literal> that makes them compatible with OpenShift Virtualization. This conversion process is discussed in <link linkend="virt-v2v-mtv_mtv">How MTV uses the virt-v2v tool</link>. <emphasis>Raw copy mode</emphasis> copies VMs without converting them. This allows for faster conversions, migrating VMs running a wider range of operating systems, and supporting migrating disks encrypted using Linux Unified Key Setup (LUKS) without needing keys. However, VMs migrated using raw copy mode might not function properly on OpenShift Virtualization.
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										To use raw copy mode for your migration plan, do the following:
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												Click the <emphasis role="strong">Edit</emphasis> icon.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Toggle the <emphasis role="strong">Raw copy mode</emphasis> switch.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												Click <emphasis role="strong">Save</emphasis>.
											</simpara>
											<simpara>
												MTV validates any changes you made on this page.
											</simpara>
										</listitem>
									</itemizedlist>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						In addition to listing details based on your entries in the wizard, the <emphasis role="strong">Plan details</emphasis> tab includes the following two sections after the details of the plan:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Migration history</emphasis>: Details about successful and unsuccessful attempts to run the plan
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Conditions</emphasis>: Any changes that need to be made to the plan so that it can run successfully
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						When you have fixed all conditions listed, you can run your plan from the <emphasis role="strong">Plans</emphasis> page.
					</simpara>
					<simpara>
						The <emphasis role="strong">Plan details</emphasis> page also includes five additional tabs, which are described in the table that follows:
					</simpara>
					<table colsep="1" frame="all" rowsep="1">
						<title>Tabs of the Plan details page</title>
						<tgroup cols="5">
							<colspec colname="col_1" colwidth="20*"></colspec>
							<colspec colname="col_2" colwidth="20*"></colspec>
							<colspec colname="col_3" colwidth="20*"></colspec>
							<colspec colname="col_4" colwidth="20*"></colspec>
							<colspec colname="col_5" colwidth="20*"></colspec>
							<thead>
								<row>
									<entry align="left" valign="top">YAML</entry>
									<entry align="left" valign="top">Virtual Machines</entry>
									<entry align="left" valign="top">Resources</entry>
									<entry align="left" valign="top">Mappings</entry>
									<entry align="left" valign="top">Hooks</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Editable YAML <literal>Plan</literal> manifest based on your plan’s details including source provider, network and storage maps, VMs, and any issues with your VMs
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										The VMs the plan migrates
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Editable specification of the network and storage maps used by your plan
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Updatable specification of the hooks used by your plan, if any
									</simpara>
									</entry>
								</row>
							</tbody>
						</tgroup>
					</table>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="running-migration-plan_vmware">
			<title>Running a migration plan</title>
			<simpara role="_abstract">
				You can run a migration plan and view its progress in the Red Hat OpenShift web console.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						Valid migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration</emphasis> &gt; <emphasis role="strong">Plans for virtualization</emphasis>.
					</simpara>
					<simpara>
						The <emphasis role="strong">Plans</emphasis> list displays the source and target providers, the number of virtual machines (VMs) being migrated, the status, the date that the migration started, and the description of each plan.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Start</emphasis> beside a migration plan to start the migration.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Start</emphasis> in the confirmation window that opens.
					</simpara>
					<simpara>
						The plan’s <emphasis role="strong">Status</emphasis> changes to <emphasis role="strong">Running</emphasis>, and the migration’s progress is displayed.
					</simpara>
					<simpara>
						Warm migration only:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								The precopy stage starts.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Cutover</emphasis> to complete the migration.
							</simpara>
							<warning>
								<simpara>
									Do not take a snapshot of a VM after you start a migration. Taking a snaphot after a migration starts might cause the migration to fail.
								</simpara>
							</warning>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Click the links in the migration’s <emphasis role="strong">Status</emphasis> to see its overall status and the status of each VM:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								The link on the left indicates whether the migration failed, succeeded, or is ongoing. It also reports the number of VMs whose migration succeeded, failed, or was canceled.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The link on the right opens the <emphasis role="strong">Virtual Machines</emphasis> tab of the <emphasis role="strong">Plan Details</emphasis> page. For each VM, the tab displays the following data:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										The name of the VM
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The start and end times of the migration
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The amount of data copied
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										A progress pipeline for the VM’s migration
									</simpara>
									<warning>
										<simpara>
											vMotion, including svMotion, and relocation must be disabled for VMs that are being imported to avoid data corruption.
										</simpara>
									</warning>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: To view your migration’s logs, either as it is running or after it is completed, perform the following actions:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click the <emphasis role="strong">Virtual Machines</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the arrow (<emphasis role="strong">&gt;</emphasis>) to the left of the virtual machine whose migration progress you want to check.
							</simpara>
							<simpara>
								The VM’s details are displayed.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the <emphasis role="strong">Pods</emphasis> section, in the <emphasis role="strong">Pod links</emphasis> column, click the <emphasis role="strong">Logs</emphasis> link.
							</simpara>
							<simpara>
								The <emphasis role="strong">Logs</emphasis> tab opens.
							</simpara>
							<note>
								<simpara>
									Logs are not always available. The following are common reasons for logs not being available:
								</simpara>
								<itemizedlist>
									<listitem>
										<simpara>
											The migration is from OpenShift Virtualization to OpenShift Virtualization. In this case, <literal>virt-v2v</literal> is not involved, so no pod is required.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											No pod was created.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											The pod was deleted.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											The migration failed before running the pod.
										</simpara>
									</listitem>
								</itemizedlist>
							</note>
						</listitem>
						<listitem>
							<simpara>
								To see the raw logs, click the <emphasis role="strong">Raw</emphasis> link.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To download the logs, click the <emphasis role="strong">Download</emphasis> link.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="migration-plan-options-ui_vmware">
			<title>Migration plan options</title>
			<simpara role="_abstract">
				On the <emphasis role="strong">Plans for virtualization</emphasis> page of the Red Hat OpenShift web console, you can click the Options menu 
				<inlinemediaobject>
					<imageobject>
						<imagedata contentdepth="20" fileref="images/modules/images/kebab.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>kebab</phrase>
					</textobject>
				</inlinemediaobject>
				 beside a migration plan to access the following options:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						<emphasis role="strong">Edit Plan</emphasis>: Edit the details of a migration plan. If the plan is running or has completed successfully, you cannot edit the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								All properties on the <emphasis role="strong">Settings</emphasis> section of the <emphasis role="strong">Plan details</emphasis> page. For example, warm or cold migration, target namespace, and preserved static IPs.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The plan’s mapping on the <emphasis role="strong">Mappings</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The hooks listed on the <emphasis role="strong">Hooks</emphasis> tab.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Start migration</emphasis>: Active only if relevant.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Restart migration</emphasis>: Restart a migration that was interrupted. Before choosing this option, make sure there are no error messages. If there are, you need to edit the plan.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Cutover</emphasis>: Warm migrations only. Active only if relevant. Clicking <emphasis role="strong">Cutover</emphasis> opens the <emphasis role="strong">Cutover</emphasis> window, which supports the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Set cutover</emphasis>: Set the date and time for a cutover.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Remove cutover</emphasis>: Cancel a scheduled cutover. Active only if relevant.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Duplicate Plan</emphasis>: Create a new migration plan with the same virtual machines (VMs), parameters, mappings, and hooks as an existing plan. You can use this feature for the following tasks:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Migrate VMs to a different namespace.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit an archived migration plan.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit a migration plan with a different status, for example, failed, canceled, running, critical, or ready.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Archive Plan</emphasis>: Delete the logs, history, and metadata of a migration plan. The plan cannot be edited or restarted. It can only be viewed, duplicated, or deleted.
					</simpara>
					<note>
						<simpara>
							<emphasis role="strong">Archive Plan</emphasis> is irreversible. However, you can duplicate an archived plan.
						</simpara>
					</note>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Delete Plan</emphasis>: Permanently remove a migration plan. You cannot delete a running migration plan.
					</simpara>
					<note>
						<simpara>
							<emphasis role="strong">Delete Plan</emphasis> is irreversible.
						</simpara>
						<simpara>
							Deleting a migration plan does not remove temporary resources. To remove temporary resources, archive the plan first before deleting it.
						</simpara>
					</note>
					<note>
						<simpara>
							The results of archiving and then deleting a migration plan vary by whether you created the plan and its storage and network mappings using the CLI or the UI.
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									If you created them using the UI, then the migration plan and its mappings no longer appear in the UI.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									If you created them using the CLI, then the mappings might still appear in the UI. This is because mappings in the CLI can be used by more than one migration plan, but mappings created in the UI can only be used in one migration plan.
								</simpara>
							</listitem>
						</itemizedlist>
					</note>
				</listitem>
			</itemizedlist>
		</section>
		<section xml:id="about-network-maps_vmware">
			<title>About network maps in migration plans</title>
			<simpara role="_abstract">
				You can create network maps in Migration Toolkit for Virtualization (MTV) migration plans to map source networks to OpenShift Virtualization networks.
			</simpara>
			<simpara>
				There are two types of network maps: maps created for a specific migration plan and maps created for use by any migration plan.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Maps created for a specific plan are said to be <emphasis>owned</emphasis> by that plan. You can create these kinds of maps in the <emphasis role="strong">Network maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created for use by any migration plan are to said to be <emphasis>ownerless</emphasis>. You can create these kinds of maps in the <emphasis role="strong">Network maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console.
					</simpara>
					<simpara>
						You, or anyone working in the same project, can use them when creating a migration plan in the <emphasis role="strong">Plan creation wizard</emphasis>. When you choose one of these unowned maps for a migration plan, MTV creates a copy of the map and defines your migration plan as the <emphasis>owner of that copy</emphasis>. Any changes you make to the copy do not affect the original map, nor do they apply to any other plan that uses a copy of the map. Both types of network maps for a project are shown in the <emphasis role="strong">Network maps</emphasis> page, but there is an important difference in the information displayed in the <emphasis role="strong">Owner</emphasis> column of that page for each:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Network maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console are shown as having no owner.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Network maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis> are shown as being owned by the migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<section xml:id="creating-yaml-based-network-maps-ui_vmware">
				<title>Creating ownerless network maps in the MTV UI</title>
				<simpara role="_abstract">
					You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Network maps</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Create NetworkMap</emphasis>.
						</simpara>
						<simpara>
							The <emphasis role="strong">Create NetworkMap</emphasis> page opens.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							If you enter YAML definitions, use the following:
						</simpara>
					</listitem>
				</orderedlist>
				
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <co xml:id="CO3-1"></co>
      source: <co xml:id="CO3-2"></co>
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
    - destination:
        name: &lt;network_attachment_definition&gt; <co xml:id="CO3-3"></co>
        namespace: &lt;network_attachment_definition_namespace&gt; <co xml:id="CO3-4"></co>
        type: multus
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
				<calloutlist>
					<callout arearefs="CO3-1">
						<para>
							Allowed values are <literal>pod</literal>, <literal>multus</literal>, and <literal>ignored</literal>. Use <literal>ignored</literal> to avoid attaching VMs to this network for this migration.
						</para>
					</callout>
					<callout arearefs="CO3-2">
						<para>
							You can use either the <literal>id</literal> or the <literal>name</literal> parameter to specify the source network. For <literal>id</literal>, specify the VMware vSphere network Managed Object Reference (moRef). To retrieve the moRef, see <link linkend="retrieving-vmware-moref_vmware">Retrieving a VMware vSphere moRef</link>.
						</para>
					</callout>
					<callout arearefs="CO3-3">
						<para>
							Specify a network attachment definition for each additional OpenShift Virtualization network.
						</para>
					</callout>
					<callout arearefs="CO3-4">
						<para>
							Required only when <literal>type</literal> is <literal>multus</literal>. Specify the namespace of the OpenShift Virtualization network attachment definition.
						</para>
					</callout>
				</calloutlist>
				<orderedlist numeration="arabic" startingnumber="5">
					<listitem>
						<simpara>
							Optional: To download your input, click <emphasis role="strong">Download</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Create</emphasis>.
						</simpara>
						<simpara>
							Your map appears in the list of network maps.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
		</section>
		<section xml:id="about-storage-maps_vmware">
			<title>About storage maps in migration plans</title>
			<simpara role="_abstract">
				You can create storage maps in Migration Toolkit for Virtualization (MTV) migration plans to map source disk storages to OpenShift Virtualization storage classes.
			</simpara>
			<simpara>
				There are two types of storage maps: maps created for a specific migration plan and maps created for use by any migration plan.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Maps created for a specific plan are said to be <emphasis>owned</emphasis> by that plan. You can create these kinds of maps in the <emphasis role="strong">Storage maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created for use by any migration plan are to said to be <emphasis>ownerless</emphasis>. You can create these kinds of maps in the <emphasis role="strong">Storage maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console.
					</simpara>
					<simpara>
						You, or anyone working in the same project, can use them when creating a migration plan in the <emphasis role="strong">Plan creation wizard</emphasis>. When you choose one of these unowned maps for a migration plan, MTV creates a copy of the map and defines your migration plan as the <emphasis>owner of that copy</emphasis>. Any changes you make to the copy do not affect the original map, nor do they apply to any other plan that uses a copy of the map. Both types of storage maps for a project are shown in the <emphasis role="strong">Storage maps</emphasis> page, but there is an important difference in the information displayed in the <emphasis role="strong">Owner</emphasis> column of that page for each:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Storage maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console are shown as having no owner.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Storage maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis> are shown as being owned by the migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<section xml:id="creating-ownerless-storage-maps-ui_vmware">
				<title>Creating ownerless storage maps in the MTV UI</title>
				<simpara role="_abstract">
					You can create ownerless storage maps by using the MTV UI to map source disk storages to OpenShift Virtualization storage classes.
				</simpara>
				<simpara>
					You can create this type of map by using one of the following methods:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							<emphasis role="strong">Create with form</emphasis>, selecting items such as a source provider from lists.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<emphasis role="strong">Create with YAML</emphasis>, either by entering YAML or JSON definitions or by attaching files containing the same.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara role="_abstract" xml:id="creating-form-based-storage-maps-ui-vmware_vmware">
					You can create ownerless storage maps by using the form page of the MTV UI.
				</simpara>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							Have a VMware source provider and a OpenShift Virtualization destination provider. For more information, see <link linkend="adding-source-provider_vmware">Adding a VMware vSphere source provider</link> or <link linkend="adding-source-provider_dest_vmware">Adding an OpenShift Virtualization destination provider</link>.
						</simpara>
					</listitem>
				</itemizedlist>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Storage maps</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Create storage map</emphasis> &gt; <emphasis role="strong">Create with form</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Specify the following:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									<emphasis role="strong">Map name</emphasis>: Name of the storage map.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Project</emphasis>: Select from the list.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Source provider</emphasis>: Select from the list.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Target provider</emphasis>: Select from the list.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Source storage</emphasis>: Select from the list.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Target storage</emphasis>: Select from the list
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							Optional: If this is a storage map for a migration using storage copy offload, specify the following offload options:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									<emphasis role="strong">Offload plugin</emphasis>: Select from the list.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Storage secret</emphasis>: Select from the list.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<emphasis role="strong">Storage product</emphasis>: Select from the list
								</simpara>
								<important>
									<simpara>
										Storage copy offload is Developer Preview software only. Developer Preview software is not supported by Red Hat in any way and is not functionally complete or production-ready. Do not use Developer Preview software for production or business-critical workloads. Developer Preview software provides early access to upcoming product software in advance of its possible inclusion in a Red Hat product offering. Customers can use this software to test functionality and provide feedback during the development process. This software might not have any documentation, is subject to change or removal at any time, and has received limited testing. Red Hat might provide ways to submit feedback on Developer Preview software without an associated SLA.
									</simpara>
									<simpara>
										For more information about the support scope of Red Hat Developer Preview software, see <link xlink:href="https://access.redhat.com/support/offerings/devpreview/">Developer Preview Support Scope</link>.
									</simpara>
								</important>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							Optional: Click <emphasis role="strong">Add mapping</emphasis> to create additional storage maps, including mapping multiple storage sources to a single target storage class.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Create</emphasis>.
						</simpara>
						<simpara>
							Your map appears in the list of storage maps.
						</simpara>
					</listitem>
				</orderedlist>
				<section xml:id="creating-yaml-based-stoarge-maps-ui_vmware">
					<title>Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</title>
					<simpara role="_abstract">
						You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Storage maps</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create storage map</emphasis> &gt; <emphasis role="strong">Create with YAML</emphasis>.
							</simpara>
							<simpara>
								The <emphasis role="strong">Create StorageMap</emphasis> page opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If you enter YAML definitions, use the following:
							</simpara>
						</listitem>
					</orderedlist>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <co xml:id="CO4-1"></co>
      source:
        id: &lt;source_datastore&gt; <co xml:id="CO4-2"></co>
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO4-1">
							<para>
								Allowed values are <literal>ReadWriteOnce</literal> and <literal>ReadWriteMany</literal>.
							</para>
						</callout>
						<callout arearefs="CO4-2">
							<para>
								Specify the VMware vSphere datastore moRef. For example, <literal>f2737930-b567-451a-9ceb-2887f6207009</literal>. To retrieve the moRef, see <link linkend="retrieving-vmware-moref_vmware">Retrieving a VMware vSphere moRef</link>.
							</para>
						</callout>
					</calloutlist>
					<orderedlist numeration="arabic" startingnumber="5">
						<listitem>
							<simpara>
								Optional: To download your input, click <emphasis role="strong">Download</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create</emphasis>.
							</simpara>
							<simpara>
								Your map appears in the list of storage maps.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
			</section>
		</section>
		<section xml:id="canceling-migration-ui_vmware">
			<title>Canceling a migration</title>
			<simpara role="_abstract">
				You can cancel the migration of some or all virtual machines (VMs) while a migration plan is in progress by using the Red Hat OpenShift web console.
			</simpara>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Plans for virtualization</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the name of a running migration plan to view the migration details.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Select one or more VMs and click <emphasis role="strong">Cancel</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Yes, cancel</emphasis> to confirm the cancellation.
					</simpara>
					<simpara>
						In the <emphasis role="strong">Migration details by VM</emphasis> list, the status of the canceled VMs is <emphasis role="strong">Canceled</emphasis>. The unmigrated and the migrated virtual machines are not affected.
					</simpara>
				</listitem>
			</orderedlist>
			<simpara>
				You can restart a canceled migration by clicking <emphasis role="strong">Restart</emphasis> beside the migration plan on the <emphasis role="strong">Migration plans</emphasis> page.
			</simpara>
		</section>
	</chapter>
	<chapter xml:id="migrating-rhv_rhv">
		<title>Migrating virtual machines from Red Hat Virtualization</title>
		<section xml:id="adding-source-provider_rhv">
			<title>Adding a Red Hat Virtualization source provider</title>
			<simpara role="_abstract">
				You can add a Red Hat Virtualization source provider by using the Red Hat OpenShift web console.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						Manager CA certificate, unless it was replaced by a third-party certificate, in which case, specify the Manager Apache CA certificate
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Access the <emphasis role="strong">Create provider</emphasis> page for Red Hat Virtualization by doing one of the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Providers</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										Click <emphasis role="strong">Create Provider</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Click <emphasis role="strong">Red Hat Virtualization</emphasis>.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Overview</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										In the <emphasis role="strong">Welcome</emphasis> pane, click <emphasis role="strong">Red Hat Virtualization</emphasis>.
									</simpara>
									<simpara>
										If the <emphasis role="strong">Welcome</emphasis> pane is not visible, click <emphasis role="strong">Show the welcome card</emphasis> in the upper-right corner of the page, and click <emphasis role="strong">Red Hat Virtualization</emphasis> when the <emphasis role="strong">Welcome</emphasis> pane opens.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Provider resource name</emphasis>: Name of the source provider.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">URL</emphasis>: URL of the API endpoint of the Red Hat Virtualization Manager (RHVM) on which the source VM is mounted. Ensure that the URL includes the path leading to the RHVM API server, usually <literal>/ovirt-engine/api</literal>. For example, <literal>https://rhv-host-example.com/ovirt-engine/api</literal>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Username</emphasis>: Username.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Password</emphasis>: Password.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Choose one of the following options for validating CA certificates:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use a custom CA certificate</emphasis>: Migrate after validating a custom CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use the system CA certificate</emphasis>: Migrate after validating the system CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Skip certificate validation</emphasis> : Migrate without validating a CA certificate.
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										To use a custom CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to left, and <emphasis>either</emphasis> drag the CA certificate to the text box <emphasis>or</emphasis> browse for it and click <emphasis role="strong">Select</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To use the system CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to the left, and leave the <emphasis role="strong">CA certificate</emphasis> text box empty.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To skip certificate validation, toggle the <emphasis role="strong">Skip certificate validation</emphasis> switch to the right.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click <emphasis role="strong">Fetch certificate from URL</emphasis>. The <emphasis role="strong">Verify certificate</emphasis> window opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If the details are correct, select the <emphasis role="strong">I trust the authenticity of this certificate</emphasis> checkbox, and then, click <emphasis role="strong">Confirm</emphasis>. If not, click <emphasis role="strong">Cancel</emphasis>, and then, enter the correct certificate information manually.
							</simpara>
							<simpara>
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create provider</emphasis> to add and save the provider.
					</simpara>
					<simpara>
						The provider appears in the list of providers.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Optional: Add access to the UI of the provider:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								On the <emphasis role="strong">Providers</emphasis> page, click the provider.
							</simpara>
							<simpara>
								The <emphasis role="strong">Provider details</emphasis> page opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the <emphasis role="strong">Edit</emphasis> icon under <emphasis role="strong">External UI web link</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Enter the link and click <emphasis role="strong">Save</emphasis>.
							</simpara>
							<note>
								<simpara>
									If you do not enter a link, MTV attempts to calculate the correct link.
								</simpara>
								<itemizedlist>
									<listitem>
										<simpara>
											If MTV succeeds, the hyperlink of the field points to the calculated link.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											If MTV does not succeed, the field remains empty.
										</simpara>
									</listitem>
								</itemizedlist>
							</note>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="adding-source-provider_dest_rhv">
			<title>Adding an OpenShift Virtualization destination provider</title>
			<simpara role="_abstract">
				You can use a Red Hat OpenShift Virtualization provider as both a source provider and a destination provider.
			</simpara>
			<simpara>
				Specifically, the host cluster that is automatically added as a OpenShift Virtualization provider can be used as both a source provider and a destination provider.
			</simpara>
			<simpara>
				You can also add another OpenShift Virtualization destination provider to the Red Hat OpenShift web console in addition to the default OpenShift Virtualization destination provider, which is the cluster where you installed MTV.
			</simpara>
			<simpara>
				You can migrate VMs from the cluster that MTV is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						You must have an OpenShift Virtualization <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/authentication_and_authorization/using-service-accounts">service account token</link> with <literal>cluster-admin</literal> privileges.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Access the <emphasis role="strong">Create OpenShift Virtualization provider</emphasis> interface by doing one of the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Providers</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										Click <emphasis role="strong">Create Provider</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Click <emphasis role="strong">OpenShift Virtualization</emphasis>.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Overview</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										In the <emphasis role="strong">Welcome</emphasis> pane, click <emphasis role="strong">OpenShift Virtualization</emphasis>.
									</simpara>
									<simpara>
										If the <emphasis role="strong">Welcome</emphasis> pane is not visible, click <emphasis role="strong">Show the welcome card</emphasis> in the upper-right corner of the page, and click <emphasis role="strong">OpenShift Virtualization</emphasis> when the <emphasis role="strong">Welcome</emphasis> pane opens.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Provider resource name</emphasis>: Name of the source provider
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">URL</emphasis>: URL of the endpoint of the API server
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Service account bearer token</emphasis>: Token for a service account with <literal>cluster-admin</literal> privileges
							</simpara>
							<simpara>
								If both <emphasis role="strong">URL</emphasis> and <emphasis role="strong">Service account bearer token</emphasis> are left blank, the local OpenShift cluster is used.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Choose one of the following options for validating CA certificates:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use a custom CA certificate</emphasis>: Migrate after validating a custom CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use the system CA certificate</emphasis>: Migrate after validating the system CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Skip certificate validation</emphasis> : Migrate without validating a CA certificate.
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										To use a custom CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to left, and <emphasis>either</emphasis> drag the CA certificate to the text box <emphasis>or</emphasis> browse for it and click <emphasis role="strong">Select</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To use the system CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to the left, and leave the <emphasis role="strong">CA certificate</emphasis> text box empty.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To skip certificate validation, toggle the <emphasis role="strong">Skip certificate validation</emphasis> switch to the right.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click <emphasis role="strong">Fetch certificate from URL</emphasis>. The <emphasis role="strong">Verify certificate</emphasis> window opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If the details are correct, select the <emphasis role="strong">I trust the authenticity of this certificate</emphasis> checkbox, and then, click <emphasis role="strong">Confirm</emphasis>. If not, click <emphasis role="strong">Cancel</emphasis>, and then, enter the correct certificate information manually.
							</simpara>
							<simpara>
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create provider</emphasis> to add and save the provider.
					</simpara>
					<simpara>
						The provider appears in the list of providers.
					</simpara>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="selecting-migration-network-for-virt-provider_dest_rhv">
			<title>Selecting a migration network for an OpenShift Virtualization provider</title>
			<simpara role="_abstract">
				You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.
			</simpara>
			<simpara>
				After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.
			</simpara>
			<simpara>
				If you do not select a migration network, the default migration network is the <literal>pod</literal> network, which might not be optimal for disk transfer.
			</simpara>
			<note>
				<simpara>
					You can override the default migration network of the provider by selecting a different network when you create a migration plan.
				</simpara>
			</note>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration</emphasis> &gt; <emphasis role="strong">Providers for virtualization</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the OpenShift Virtualization provider whose migration network you want to change.
					</simpara>
					<simpara>
						When the <emphasis role="strong">Providers detail</emphasis> page opens:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the <emphasis role="strong">Networks</emphasis> tab.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Set default transfer network</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Select a default transfer network from the list and click <emphasis role="strong">Save</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Configure a gateway in the network used for MTV migrations by completing the following steps:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Networking</emphasis> &gt; <emphasis role="strong">NetworkAttachmentDefinitions</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Select the appropriate default transfer network NAD.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the <emphasis role="strong">YAML</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Add <literal>forklift.konveyor.io/route</literal> to the metadata:annotations section of the YAML, as in the following example:
							</simpara>
							
<programlisting language="yaml" linenumbering="unnumbered">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt; <co xml:id="CO5-1"></co></programlisting>
							<calloutlist>
								<callout arearefs="CO5-1">
									<para>
										The <literal>NetworkAttachmentDefinition</literal> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.
									</para>
								</callout>
							</calloutlist>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Save</emphasis>.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="creating-plan-wizard-290-rhv_rhv">
			<title>Creating a Red Hat Virtualization migration plan by using the MTV wizard</title>
			<simpara role="_abstract">
				You can migrate Red Hat Virtualization virtual machines (VMs) by using the Migration Toolkit for Virtualization plan creation wizard.
			</simpara>
			<simpara>
				The wizard is designed to lead you step-by-step in creating a migration plan.
			</simpara>
			<warning>
				<simpara>
					Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.
				</simpara>
				<simpara>
					This prevents concurrent disk access to the storage the guest points to.
				</simpara>
			</warning>
			<important>
				<simpara>
					A plan cannot contain more than 500 VMs or 500 disks.
				</simpara>
			</important>
			<important>
				<simpara>
					When you click <emphasis role="strong">Create plan</emphasis> on the <emphasis role="strong">Review and create</emphasis> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <emphasis role="strong">Plan details</emphasis> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.
				</simpara>
			</important>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						Have an Red Hat Virtualization source provider and a OpenShift Virtualization destination provider. For more information, see <link linkend="adding-source-provider_rhv">Adding a Red Hat Virtualization source provider</link> or <link linkend="adding-source-provider_dest_rhv">Adding an OpenShift Virtualization destination provider</link>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If you plan to create a <emphasis role="strong">Network map</emphasis> or a <emphasis role="strong">Storage map</emphasis> that will be used by more than one migration plan, create it in the <emphasis role="strong">Network maps</emphasis> or <emphasis role="strong">Storage maps</emphasis> page of the UI before you create a migration plan that uses that map.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Migration plans</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create plan</emphasis>.
					</simpara>
					<simpara>
						The <emphasis role="strong">Create migration plan</emphasis> wizard opens.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">General</emphasis> page, specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Plan name</emphasis>: Enter a name.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Plan project</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Source provider</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Target provider</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Target project</emphasis>: Select from the list.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Virtual machines</emphasis> page, select the virtual machines you want to migrate and click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Network map</emphasis> page, choose one of the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use an existing network map</emphasis>: Select an existing network map from the list.
							</simpara>
							<simpara>
								These are network maps available for all plans, and therefore, they are <emphasis>ownerless</emphasis> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <emphasis>owner</emphasis> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</simpara>
							<note>
								<simpara>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</simpara>
							</note>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use a new network map</emphasis>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which will then be considered to be its owner. Maps that you create using this option are not available in the <emphasis role="strong">Use an existing network map</emphasis> option because each is created with an owner.
							</simpara>
							<note>
								<simpara>
									You can create an ownerless network map, which you and others can use for additional migration plans, in the <emphasis role="strong">Network Maps</emphasis> section of the UI.
								</simpara>
							</note>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Source network</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target network</emphasis>: Select from the list.
									</simpara>
									<simpara>
										If needed, click <emphasis role="strong">Add mapping</emphasis> to add another mapping.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Network map name</emphasis>: Enter a name or let MTV automatically generate a name for the network map.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Storage map</emphasis> page, choose one of the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use an existing storage map</emphasis>: Select an existing storage map from the list.
							</simpara>
							<simpara>
								These are storage maps available for all plans, and therefore, they are <emphasis>ownerless</emphasis> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <emphasis>owner</emphasis> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</simpara>
							<note>
								<simpara>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</simpara>
							</note>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use new storage map</emphasis>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. For each map, specify the following. Maps that you create using this option are not available in the <emphasis role="strong">Use an existing storage map</emphasis> option because each is created with an owner.
							</simpara>
							<note>
								<simpara>
									You can create an ownerless storage map, which you and others can use for additional migration plans, in the <emphasis role="strong">Storage Maps</emphasis> section of the UI.
								</simpara>
							</note>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Source storage</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target storage</emphasis>: Select from the list.
									</simpara>
									<simpara>
										If needed, click <emphasis role="strong">Add mapping</emphasis> to add another mapping.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Storage map name</emphasis>: Enter a name or let MTV automatically generate a name for the storage map.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Migration type</emphasis> page, choose one of the following:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Cold migration</emphasis> (default)
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Warm migration</emphasis>
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Other settings (optional)</emphasis> page, you have the option to change the <emphasis role="strong">Transfer network</emphasis> of your migration plan.
					</simpara>
					<simpara>
						The transfer network is the network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Verify that the transfer network is in the selected target project.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To choose a different transfer network, select a different transfer network from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Optional: To configure another OpenShift network in the OpenShift web console, click <emphasis role="strong">Networking &gt; NetworkAttachmentDefinitions</emphasis>.
							</simpara>
							<simpara>
								To learn more about the different types of networks OpenShift supports, see <link xlink:href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</link>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <link linkend="selecting-migration-network-for-vmware-source-provider_vmware">Selecting a migration network for a VMware source provider</link>.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Hooks (optional)</emphasis> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						To add a hook, select the appropriate <emphasis role="strong">Enable hook</emphasis> checkbox.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Enter the <emphasis role="strong">Hook runner image</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Enter the <emphasis role="strong">Ansible playbook</emphasis> of the hook in the window.
					</simpara>
					<note>
						<simpara>
							You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.
						</simpara>
					</note>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Review and Create</emphasis> page, review the information displayed.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Edit any item by doing the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click its <emphasis role="strong">Edit step</emphasis> link.
							</simpara>
							<simpara>
								The wizard opens to the page on which you defined the item.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit the item.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Either click <emphasis role="strong">Next</emphasis> to advance to the next page of the wizard, or click <emphasis role="strong">Skip to review</emphasis> to return directly to the <emphasis role="strong">Review and create</emphasis> page.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						When you finish reviewing the details of the plan, click <emphasis role="strong">Create plan</emphasis>. MTV validates your plan.
					</simpara>
					<simpara>
						When your plan is validated, the <emphasis role="strong">Plan details</emphasis> page for your plan opens in the <emphasis role="strong">Details</emphasis> tab.
					</simpara>
					<simpara>
						The <emphasis role="strong">Plan settings</emphasis> section of the page includes settings that you specified in the <emphasis role="strong">Other settings (optional)</emphasis> page and some additional optional settings. The steps below refer to the additional optional steps, but all of the settings can be edited by clicking the Options menu 
						<inlinemediaobject>
							<imageobject>
								<imagedata contentdepth="20" fileref="images/modules/images/kebab.png" format="PNG" />
							</imageobject>
							<textobject>
								<phrase>kebab</phrase>
							</textobject>
						</inlinemediaobject>
						, making the change, and then clicking <emphasis role="strong">Save</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Check the following item on the <emphasis role="strong">Plan settings</emphasis> section of the page:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Preserve CPU mode</emphasis>: Generally, the CPU model (type) for Red Hat Virtualization VMs is set at the cluster level. However, the CPU model can be set at the VM level, which is called a custom CPU model.
							</simpara>
							<simpara>
								By default, MTV sets the CPU model on the destination cluster as follows: MTV preserves custom CPU settings for VMs that have them. For VMs without custom CPU settings, MTV does not set the CPU model. Instead, the CPU model is later set by OpenShift Virtualization.
							</simpara>
							<simpara>
								To preserve the cluster-level CPU model of your Red Hat Virtualization VMs, do the following:
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										Click the Options menu 
										<inlinemediaobject>
											<imageobject>
												<imagedata contentdepth="20" fileref="images/modules/images/kebab.png" format="PNG" />
											</imageobject>
											<textobject>
												<phrase>kebab</phrase>
											</textobject>
										</inlinemediaobject>
										.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Toggle the <emphasis role="strong">Whether to preserve the CPU model</emphasis> switch.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Click Save.
									</simpara>
									<simpara>
										MTV validates any changes you made on this page.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						In addition to listing details based on your entries in the wizard, the <emphasis role="strong">Plan details</emphasis> tab includes the following two sections after the details of the plan:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Migration history</emphasis>: Details about successful and unsuccessful attempts to run the plan
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Conditions</emphasis>: Any changes that need to be made to the plan so that it can run successfully
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						When you have fixed all conditions listed, you can run your plan from the <emphasis role="strong">Plans</emphasis> page.
					</simpara>
					<simpara>
						The <emphasis role="strong">Plan details</emphasis> page also includes five additional tabs, which are described in the table that follows:
					</simpara>
					<table colsep="1" frame="all" rowsep="1">
						<title>Tabs of the Plan details page</title>
						<tgroup cols="5">
							<colspec colname="col_1" colwidth="20*"></colspec>
							<colspec colname="col_2" colwidth="20*"></colspec>
							<colspec colname="col_3" colwidth="20*"></colspec>
							<colspec colname="col_4" colwidth="20*"></colspec>
							<colspec colname="col_5" colwidth="20*"></colspec>
							<thead>
								<row>
									<entry align="left" valign="top">YAML</entry>
									<entry align="left" valign="top">Virtual Machines</entry>
									<entry align="left" valign="top">Resources</entry>
									<entry align="left" valign="top">Mappings</entry>
									<entry align="left" valign="top">Hooks</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Editable YAML <literal>Plan</literal> manifest based on your plan’s details including source provider, network and storage maps, VMs, and any issues with your VMs
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										The VMs the plan migrates
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Editable specification of the network and storage maps used by your plan
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Updatable specification of the hooks used by your plan, if any
									</simpara>
									</entry>
								</row>
							</tbody>
						</tgroup>
					</table>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="running-migration-plan_rhv">
			<title>Running a migration plan</title>
			<simpara role="_abstract">
				You can run a migration plan and view its progress in the Red Hat OpenShift web console.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						Valid migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration</emphasis> &gt; <emphasis role="strong">Plans for virtualization</emphasis>.
					</simpara>
					<simpara>
						The <emphasis role="strong">Plans</emphasis> list displays the source and target providers, the number of virtual machines (VMs) being migrated, the status, the date that the migration started, and the description of each plan.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Start</emphasis> beside a migration plan to start the migration.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Start</emphasis> in the confirmation window that opens.
					</simpara>
					<simpara>
						The plan’s <emphasis role="strong">Status</emphasis> changes to <emphasis role="strong">Running</emphasis>, and the migration’s progress is displayed.
					</simpara>
					<simpara>
						Warm migration only:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								The precopy stage starts.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Cutover</emphasis> to complete the migration.
							</simpara>
							<warning>
								<simpara>
									Do not take a snapshot of a VM after you start a migration. Taking a snaphot after a migration starts might cause the migration to fail.
								</simpara>
							</warning>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Click the links in the migration’s <emphasis role="strong">Status</emphasis> to see its overall status and the status of each VM:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								The link on the left indicates whether the migration failed, succeeded, or is ongoing. It also reports the number of VMs whose migration succeeded, failed, or was canceled.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The link on the right opens the <emphasis role="strong">Virtual Machines</emphasis> tab of the <emphasis role="strong">Plan Details</emphasis> page. For each VM, the tab displays the following data:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										The name of the VM
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The start and end times of the migration
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The amount of data copied
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										A progress pipeline for the VM’s migration
									</simpara>
									<warning>
										<simpara>
											vMotion, including svMotion, and relocation must be disabled for VMs that are being imported to avoid data corruption.
										</simpara>
									</warning>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: To view your migration’s logs, either as it is running or after it is completed, perform the following actions:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click the <emphasis role="strong">Virtual Machines</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the arrow (<emphasis role="strong">&gt;</emphasis>) to the left of the virtual machine whose migration progress you want to check.
							</simpara>
							<simpara>
								The VM’s details are displayed.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the <emphasis role="strong">Pods</emphasis> section, in the <emphasis role="strong">Pod links</emphasis> column, click the <emphasis role="strong">Logs</emphasis> link.
							</simpara>
							<simpara>
								The <emphasis role="strong">Logs</emphasis> tab opens.
							</simpara>
							<note>
								<simpara>
									Logs are not always available. The following are common reasons for logs not being available:
								</simpara>
								<itemizedlist>
									<listitem>
										<simpara>
											The migration is from OpenShift Virtualization to OpenShift Virtualization. In this case, <literal>virt-v2v</literal> is not involved, so no pod is required.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											No pod was created.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											The pod was deleted.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											The migration failed before running the pod.
										</simpara>
									</listitem>
								</itemizedlist>
							</note>
						</listitem>
						<listitem>
							<simpara>
								To see the raw logs, click the <emphasis role="strong">Raw</emphasis> link.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To download the logs, click the <emphasis role="strong">Download</emphasis> link.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="migration-plan-options-ui_rhv">
			<title>Migration plan options</title>
			<simpara role="_abstract">
				On the <emphasis role="strong">Plans for virtualization</emphasis> page of the Red Hat OpenShift web console, you can click the Options menu 
				<inlinemediaobject>
					<imageobject>
						<imagedata contentdepth="20" fileref="images/modules/images/kebab.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>kebab</phrase>
					</textobject>
				</inlinemediaobject>
				 beside a migration plan to access the following options:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						<emphasis role="strong">Edit Plan</emphasis>: Edit the details of a migration plan. If the plan is running or has completed successfully, you cannot edit the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								All properties on the <emphasis role="strong">Settings</emphasis> section of the <emphasis role="strong">Plan details</emphasis> page. For example, warm or cold migration, target namespace, and preserved static IPs.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The plan’s mapping on the <emphasis role="strong">Mappings</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The hooks listed on the <emphasis role="strong">Hooks</emphasis> tab.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Start migration</emphasis>: Active only if relevant.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Restart migration</emphasis>: Restart a migration that was interrupted. Before choosing this option, make sure there are no error messages. If there are, you need to edit the plan.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Cutover</emphasis>: Warm migrations only. Active only if relevant. Clicking <emphasis role="strong">Cutover</emphasis> opens the <emphasis role="strong">Cutover</emphasis> window, which supports the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Set cutover</emphasis>: Set the date and time for a cutover.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Remove cutover</emphasis>: Cancel a scheduled cutover. Active only if relevant.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Duplicate Plan</emphasis>: Create a new migration plan with the same virtual machines (VMs), parameters, mappings, and hooks as an existing plan. You can use this feature for the following tasks:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Migrate VMs to a different namespace.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit an archived migration plan.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit a migration plan with a different status, for example, failed, canceled, running, critical, or ready.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Archive Plan</emphasis>: Delete the logs, history, and metadata of a migration plan. The plan cannot be edited or restarted. It can only be viewed, duplicated, or deleted.
					</simpara>
					<note>
						<simpara>
							<emphasis role="strong">Archive Plan</emphasis> is irreversible. However, you can duplicate an archived plan.
						</simpara>
					</note>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Delete Plan</emphasis>: Permanently remove a migration plan. You cannot delete a running migration plan.
					</simpara>
					<note>
						<simpara>
							<emphasis role="strong">Delete Plan</emphasis> is irreversible.
						</simpara>
						<simpara>
							Deleting a migration plan does not remove temporary resources. To remove temporary resources, archive the plan first before deleting it.
						</simpara>
					</note>
					<note>
						<simpara>
							The results of archiving and then deleting a migration plan vary by whether you created the plan and its storage and network mappings using the CLI or the UI.
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									If you created them using the UI, then the migration plan and its mappings no longer appear in the UI.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									If you created them using the CLI, then the mappings might still appear in the UI. This is because mappings in the CLI can be used by more than one migration plan, but mappings created in the UI can only be used in one migration plan.
								</simpara>
							</listitem>
						</itemizedlist>
					</note>
				</listitem>
			</itemizedlist>
		</section>
		<section xml:id="about-network-maps_rhv">
			<title>About network maps in migration plans</title>
			<simpara role="_abstract">
				You can create network maps in Migration Toolkit for Virtualization (MTV) migration plans to map source networks to OpenShift Virtualization networks.
			</simpara>
			<simpara>
				There are two types of network maps: maps created for a specific migration plan and maps created for use by any migration plan.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Maps created for a specific plan are said to be <emphasis>owned</emphasis> by that plan. You can create these kinds of maps in the <emphasis role="strong">Network maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created for use by any migration plan are to said to be <emphasis>ownerless</emphasis>. You can create these kinds of maps in the <emphasis role="strong">Network maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console.
					</simpara>
					<simpara>
						You, or anyone working in the same project, can use them when creating a migration plan in the <emphasis role="strong">Plan creation wizard</emphasis>. When you choose one of these unowned maps for a migration plan, MTV creates a copy of the map and defines your migration plan as the <emphasis>owner of that copy</emphasis>. Any changes you make to the copy do not affect the original map, nor do they apply to any other plan that uses a copy of the map. Both types of network maps for a project are shown in the <emphasis role="strong">Network maps</emphasis> page, but there is an important difference in the information displayed in the <emphasis role="strong">Owner</emphasis> column of that page for each:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Network maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console are shown as having no owner.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Network maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis> are shown as being owned by the migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<section xml:id="creating-yaml-based-network-maps-ui_rhv">
				<title>Creating ownerless network maps in the MTV UI</title>
				<simpara role="_abstract">
					You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Network maps</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Create NetworkMap</emphasis>.
						</simpara>
						<simpara>
							The <emphasis role="strong">Create NetworkMap</emphasis> page opens.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							If you enter YAML definitions, use the following:
						</simpara>
					</listitem>
				</orderedlist>
				
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <co xml:id="CO6-1"></co>
      source: <co xml:id="CO6-2"></co>
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
    - destination:
        name: &lt;network_attachment_definition&gt; <co xml:id="CO6-3"></co>
        namespace: &lt;network_attachment_definition_namespace&gt; <co xml:id="CO6-4"></co>
        type: multus
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
				<calloutlist>
					<callout arearefs="CO6-1">
						<para>
							Allowed values are <literal>pod</literal> and <literal>multus</literal>.
						</para>
					</callout>
					<callout arearefs="CO6-2">
						<para>
							You can use either the <literal>id</literal> or the <literal>name</literal> parameter to specify the source network. For <literal>id</literal>, specify the RHV network Universal Unique ID (UUID).
						</para>
					</callout>
					<callout arearefs="CO6-3">
						<para>
							Specify a network attachment definition for each additional OpenShift Virtualization network.
						</para>
					</callout>
					<callout arearefs="CO6-4">
						<para>
							Required only when <literal>type</literal> is <literal>multus</literal>. Specify the namespace of the OpenShift Virtualization network attachment definition.
						</para>
					</callout>
				</calloutlist>
				<orderedlist numeration="arabic" startingnumber="5">
					<listitem>
						<simpara>
							Optional: To download your input, click <emphasis role="strong">Download</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Create</emphasis>.
						</simpara>
						<simpara>
							Your map appears in the list of network maps.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
		</section>
		<section xml:id="about-storage-maps_rhv">
			<title>About storage maps in migration plans</title>
			<simpara role="_abstract">
				You can create storage maps in Migration Toolkit for Virtualization (MTV) migration plans to map source disk storages to OpenShift Virtualization storage classes.
			</simpara>
			<simpara>
				There are two types of storage maps: maps created for a specific migration plan and maps created for use by any migration plan.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Maps created for a specific plan are said to be <emphasis>owned</emphasis> by that plan. You can create these kinds of maps in the <emphasis role="strong">Storage maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created for use by any migration plan are to said to be <emphasis>ownerless</emphasis>. You can create these kinds of maps in the <emphasis role="strong">Storage maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console.
					</simpara>
					<simpara>
						You, or anyone working in the same project, can use them when creating a migration plan in the <emphasis role="strong">Plan creation wizard</emphasis>. When you choose one of these unowned maps for a migration plan, MTV creates a copy of the map and defines your migration plan as the <emphasis>owner of that copy</emphasis>. Any changes you make to the copy do not affect the original map, nor do they apply to any other plan that uses a copy of the map. Both types of storage maps for a project are shown in the <emphasis role="strong">Storage maps</emphasis> page, but there is an important difference in the information displayed in the <emphasis role="strong">Owner</emphasis> column of that page for each:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Storage maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console are shown as having no owner.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Storage maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis> are shown as being owned by the migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<section xml:id="creating-ownerless-storage-maps-ui_rhv">
				<title>Creating ownerless storage maps in the MTV UI</title>
				<simpara role="_abstract">
					You can create ownerless storage maps by using the MTV UI to map source disk storages to OpenShift Virtualization storage classes.
				</simpara>
				<simpara>
					You can create this type of map by using one of the following methods:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							<emphasis role="strong">Create with form</emphasis>, selecting items such as a source provider from lists.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<emphasis role="strong">Create with YAML</emphasis>, either by entering YAML or JSON definitions or by attaching files containing the same.
						</simpara>
					</listitem>
				</itemizedlist>
				<section xml:id="creating-form-based-storage-maps-ui-ova_rhv">
					<title>Creating ownerless storage maps using the form page of the MTV UI</title>
					<simpara>
						You can create ownerless storage maps by using the form page of the MTV UI.
					</simpara>
					<itemizedlist role="_abstract">
						<title>Prerequisites</title>
						<listitem>
							<simpara>
								Have a Red Hat Virtualization source provider and a OpenShift Virtualization destination provider. For more information, see <link linkend="adding-source-provider_rhv">Adding a Red Hat Virtualization source provider</link> or <link linkend="adding-source-provider_dest_cnv">Adding an OpenShift Virtualization destination provider</link>.
							</simpara>
						</listitem>
					</itemizedlist>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Storage maps</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create storage map</emphasis> &gt; <emphasis role="strong">Create with form</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Specify the following:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Map name</emphasis>: Name of the storage map.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Project</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Source provider</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target provider</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Source storage</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target storage</emphasis>: Select from the list
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								Optional: Click <emphasis role="strong">Add mapping</emphasis> to create additional storage maps, including mapping multiple storage sources to a single target storage class.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create</emphasis>.
							</simpara>
							<simpara>
								Your map appears in the list of storage maps.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
				<section xml:id="creating-yaml-based-stoarge-maps-ui_rhv">
					<title>Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</title>
					<simpara role="_abstract">
						You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Storage maps</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create storage map</emphasis> &gt; <emphasis role="strong">Create with YAML</emphasis>.
							</simpara>
							<simpara>
								The <emphasis role="strong">Create StorageMap</emphasis> page opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If you enter YAML definitions, use the following:
							</simpara>
						</listitem>
					</orderedlist>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <co xml:id="CO7-1"></co>
      source:
        id: &lt;source_storage_domain&gt; <co xml:id="CO7-2"></co>
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO7-1">
							<para>
								Allowed values are <literal>ReadWriteOnce</literal> and <literal>ReadWriteMany</literal>.
							</para>
						</callout>
						<callout arearefs="CO7-2">
							<para>
								Specify the RHV storage domain UUID. For example, <literal>f2737930-b567-451a-9ceb-2887f6207009</literal>.
							</para>
						</callout>
					</calloutlist>
					<orderedlist numeration="arabic" startingnumber="5">
						<listitem>
							<simpara>
								Optional: To download your input, click <emphasis role="strong">Download</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create</emphasis>.
							</simpara>
							<simpara>
								Your map appears in the list of storage maps.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
			</section>
		</section>
		<section xml:id="canceling-migration-ui_rhv">
			<title>Canceling a migration</title>
			<simpara role="_abstract">
				You can cancel the migration of some or all virtual machines (VMs) while a migration plan is in progress by using the Red Hat OpenShift web console.
			</simpara>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Plans for virtualization</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the name of a running migration plan to view the migration details.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Select one or more VMs and click <emphasis role="strong">Cancel</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Yes, cancel</emphasis> to confirm the cancellation.
					</simpara>
					<simpara>
						In the <emphasis role="strong">Migration details by VM</emphasis> list, the status of the canceled VMs is <emphasis role="strong">Canceled</emphasis>. The unmigrated and the migrated virtual machines are not affected.
					</simpara>
				</listitem>
			</orderedlist>
			<simpara>
				You can restart a canceled migration by clicking <emphasis role="strong">Restart</emphasis> beside the migration plan on the <emphasis role="strong">Migration plans</emphasis> page.
			</simpara>
		</section>
	</chapter>
	<chapter xml:id="migrating-osp_ostack">
		<title>Migrating virtual machines from OpenStack</title>
		<section xml:id="adding-source-provider_ostack">
			<title>Adding an OpenStack source provider</title>
			<simpara role="_abstract">
				You can add an OpenStack source provider by using the Red Hat OpenShift web console.
			</simpara>
			<important>
				<simpara>
					When you migrate an image-based VM from an OpenStack provider, a snapshot is created for the image that is attached to the source VM, and the data from the snapshot is copied over to the target VM. This means that the target VM will have the same state as that of the source VM at the time the snapshot was created.
				</simpara>
			</important>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Access the <emphasis role="strong">Create provider</emphasis> page for OpenStack by doing one of the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Providers</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										Click <emphasis role="strong">Create Provider</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Click <emphasis role="strong">OpenStack</emphasis>.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Overview</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										In the <emphasis role="strong">Welcome</emphasis> pane, click <emphasis role="strong">OpenStack</emphasis>.
									</simpara>
									<simpara>
										If the <emphasis role="strong">Welcome</emphasis> pane is not visible, click <emphasis role="strong">Show the welcome card</emphasis> in the upper-right corner of the page, and click <emphasis role="strong">OpenStack</emphasis> when the <emphasis role="strong">Welcome</emphasis> pane opens.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Provider resource name</emphasis>: Name of the source provider.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">URL</emphasis>: URL of the OpenStack Identity (Keystone) endpoint. For example, <literal>http://controller:5000/v3</literal>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Authentication type</emphasis>: Choose one of the following methods of authentication and supply the information related to your choice. For example, if you choose <emphasis role="strong">Application credential ID</emphasis> as the authentication type, the <emphasis role="strong">Application credential ID</emphasis> and the <emphasis role="strong">Application credential secret</emphasis> fields become active, and you need to supply the ID and the secret.
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Application credential ID</emphasis>
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												<emphasis role="strong">Application credential ID</emphasis>: OpenStack application credential ID
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												<emphasis role="strong">Application credential secret</emphasis>: OpenStack application credential <literal>Secret</literal>
											</simpara>
										</listitem>
									</itemizedlist>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Application credential name</emphasis>
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												<emphasis role="strong">Application credential name</emphasis>: OpenStack application credential name
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												<emphasis role="strong">Application credential secret</emphasis>: OpenStack application credential <literal>Secret</literal>
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												<emphasis role="strong">Username</emphasis>: OpenStack username
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												<emphasis role="strong">Domain</emphasis>: OpenStack domain name
											</simpara>
										</listitem>
									</itemizedlist>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Token with user ID</emphasis>
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												<emphasis role="strong">Token</emphasis>: OpenStack token
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												<emphasis role="strong">User ID</emphasis>: OpenStack user ID
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												<emphasis role="strong">Project ID</emphasis>: OpenStack project ID
											</simpara>
										</listitem>
									</itemizedlist>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Token with user Name</emphasis>
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												<emphasis role="strong">Token</emphasis>: OpenStack token
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												<emphasis role="strong">Username</emphasis>: OpenStack username
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												<emphasis role="strong">Project</emphasis>: OpenStack project
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												<emphasis role="strong">Domain name</emphasis>: OpenStack domain name
											</simpara>
										</listitem>
									</itemizedlist>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Password</emphasis>
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												<emphasis role="strong">Username</emphasis>: OpenStack username
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												<emphasis role="strong">Password</emphasis>: OpenStack password
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												<emphasis role="strong">Project</emphasis>: OpenStack project
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												<emphasis role="strong">Domain</emphasis>: OpenStack domain name
											</simpara>
										</listitem>
									</itemizedlist>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Choose one of the following options for validating CA certificates:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use a custom CA certificate</emphasis>: Migrate after validating a custom CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use the system CA certificate</emphasis>: Migrate after validating the system CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Skip certificate validation</emphasis> : Migrate without validating a CA certificate.
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										To use a custom CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to left, and <emphasis>either</emphasis> drag the CA certificate to the text box <emphasis>or</emphasis> browse for it and click <emphasis role="strong">Select</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To use the system CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to the left, and leave the <emphasis role="strong">CA certificate</emphasis> text box empty.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To skip certificate validation, toggle the <emphasis role="strong">Skip certificate validation</emphasis> switch to the right.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click <emphasis role="strong">Fetch certificate from URL</emphasis>. The <emphasis role="strong">Verify certificate</emphasis> window opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If the details are correct, select the <emphasis role="strong">I trust the authenticity of this certificate</emphasis> checkbox, and then, click <emphasis role="strong">Confirm</emphasis>. If not, click <emphasis role="strong">Cancel</emphasis>, and then, enter the correct certificate information manually.
							</simpara>
							<simpara>
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create provider</emphasis> to add and save the provider.
					</simpara>
					<simpara>
						The provider appears in the list of providers.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Optional: Add access to the UI of the provider:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								On the <emphasis role="strong">Providers</emphasis> page, click the provider.
							</simpara>
							<simpara>
								The <emphasis role="strong">Provider details</emphasis> page opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the <emphasis role="strong">Edit</emphasis> icon under <emphasis role="strong">External UI web link</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Enter the link and click <emphasis role="strong">Save</emphasis>.
							</simpara>
							<note>
								<simpara>
									If you do not enter a link, MTV attempts to calculate the correct link.
								</simpara>
								<itemizedlist>
									<listitem>
										<simpara>
											If MTV succeeds, the hyperlink of the field points to the calculated link.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											If MTV does not succeed, the field remains empty.
										</simpara>
									</listitem>
								</itemizedlist>
							</note>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="adding-source-provider_dest_ostack">
			<title>Adding an OpenShift Virtualization destination provider</title>
			<simpara role="_abstract">
				You can use a Red Hat OpenShift Virtualization provider as both a source provider and a destination provider.
			</simpara>
			<simpara>
				Specifically, the host cluster that is automatically added as a OpenShift Virtualization provider can be used as both a source provider and a destination provider.
			</simpara>
			<simpara>
				You can also add another OpenShift Virtualization destination provider to the Red Hat OpenShift web console in addition to the default OpenShift Virtualization destination provider, which is the cluster where you installed MTV.
			</simpara>
			<simpara>
				You can migrate VMs from the cluster that MTV is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						You must have an OpenShift Virtualization <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/authentication_and_authorization/using-service-accounts">service account token</link> with <literal>cluster-admin</literal> privileges.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Access the <emphasis role="strong">Create OpenShift Virtualization provider</emphasis> interface by doing one of the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Providers</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										Click <emphasis role="strong">Create Provider</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Click <emphasis role="strong">OpenShift Virtualization</emphasis>.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Overview</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										In the <emphasis role="strong">Welcome</emphasis> pane, click <emphasis role="strong">OpenShift Virtualization</emphasis>.
									</simpara>
									<simpara>
										If the <emphasis role="strong">Welcome</emphasis> pane is not visible, click <emphasis role="strong">Show the welcome card</emphasis> in the upper-right corner of the page, and click <emphasis role="strong">OpenShift Virtualization</emphasis> when the <emphasis role="strong">Welcome</emphasis> pane opens.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Provider resource name</emphasis>: Name of the source provider
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">URL</emphasis>: URL of the endpoint of the API server
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Service account bearer token</emphasis>: Token for a service account with <literal>cluster-admin</literal> privileges
							</simpara>
							<simpara>
								If both <emphasis role="strong">URL</emphasis> and <emphasis role="strong">Service account bearer token</emphasis> are left blank, the local OpenShift cluster is used.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Choose one of the following options for validating CA certificates:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use a custom CA certificate</emphasis>: Migrate after validating a custom CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use the system CA certificate</emphasis>: Migrate after validating the system CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Skip certificate validation</emphasis> : Migrate without validating a CA certificate.
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										To use a custom CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to left, and <emphasis>either</emphasis> drag the CA certificate to the text box <emphasis>or</emphasis> browse for it and click <emphasis role="strong">Select</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To use the system CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to the left, and leave the <emphasis role="strong">CA certificate</emphasis> text box empty.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To skip certificate validation, toggle the <emphasis role="strong">Skip certificate validation</emphasis> switch to the right.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click <emphasis role="strong">Fetch certificate from URL</emphasis>. The <emphasis role="strong">Verify certificate</emphasis> window opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If the details are correct, select the <emphasis role="strong">I trust the authenticity of this certificate</emphasis> checkbox, and then, click <emphasis role="strong">Confirm</emphasis>. If not, click <emphasis role="strong">Cancel</emphasis>, and then, enter the correct certificate information manually.
							</simpara>
							<simpara>
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create provider</emphasis> to add and save the provider.
					</simpara>
					<simpara>
						The provider appears in the list of providers.
					</simpara>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="selecting-migration-network-for-virt-provider_dest_ostack">
			<title>Selecting a migration network for an OpenShift Virtualization provider</title>
			<simpara role="_abstract">
				You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.
			</simpara>
			<simpara>
				After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.
			</simpara>
			<simpara>
				If you do not select a migration network, the default migration network is the <literal>pod</literal> network, which might not be optimal for disk transfer.
			</simpara>
			<note>
				<simpara>
					You can override the default migration network of the provider by selecting a different network when you create a migration plan.
				</simpara>
			</note>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration</emphasis> &gt; <emphasis role="strong">Providers for virtualization</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the OpenShift Virtualization provider whose migration network you want to change.
					</simpara>
					<simpara>
						When the <emphasis role="strong">Providers detail</emphasis> page opens:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the <emphasis role="strong">Networks</emphasis> tab.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Set default transfer network</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Select a default transfer network from the list and click <emphasis role="strong">Save</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Configure a gateway in the network used for MTV migrations by completing the following steps:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Networking</emphasis> &gt; <emphasis role="strong">NetworkAttachmentDefinitions</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Select the appropriate default transfer network NAD.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the <emphasis role="strong">YAML</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Add <literal>forklift.konveyor.io/route</literal> to the metadata:annotations section of the YAML, as in the following example:
							</simpara>
							
<programlisting language="yaml" linenumbering="unnumbered">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt; <co xml:id="CO8-1"></co></programlisting>
							<calloutlist>
								<callout arearefs="CO8-1">
									<para>
										The <literal>NetworkAttachmentDefinition</literal> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.
									</para>
								</callout>
							</calloutlist>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Save</emphasis>.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="creating-plan-wizard-290-ostack_ostack">
			<title>Creating an OpenStack migration plan by using the MTV wizard</title>
			<simpara role="_abstract">
				You can migrate OpenStack virtual machines (VMs) by using the Migration Toolkit for Virtualization plan creation wizard.
			</simpara>
			<simpara>
				The wizard is designed to lead you step-by-step in creating a migration plan.
			</simpara>
			<warning>
				<simpara>
					Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.
				</simpara>
				<simpara>
					This prevents concurrent disk access to the storage the guest points to.
				</simpara>
			</warning>
			<important>
				<simpara>
					A plan cannot contain more than 500 VMs or 500 disks.
				</simpara>
			</important>
			<important>
				<simpara>
					When you click <emphasis role="strong">Create plan</emphasis> on the <emphasis role="strong">Review and create</emphasis> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <emphasis role="strong">Plan details</emphasis> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.
				</simpara>
			</important>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						Have an OpenStack source provider and an OpenShift Virtualization destination provider. For more information, see <link linkend="adding-source-provider_ostack">Adding an OpenStack source provider</link> or <link linkend="adding-source-provider_dest_ostack">Adding an OpenShift Virtualization destination provider</link>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If you plan to create a <emphasis role="strong">Network map</emphasis> or a <emphasis role="strong">Storage map</emphasis> that will be used by more than one migration plan, create it in the <emphasis role="strong">Network maps</emphasis> or <emphasis role="strong">Storage maps</emphasis> page of the UI before you create a migration plan that uses that map.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Migration plans</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create plan</emphasis>.
					</simpara>
					<simpara>
						The <emphasis role="strong">Create migration plan</emphasis> wizard opens.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">General</emphasis> page, specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Plan name</emphasis>: Enter a name.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Plan project</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Source provider</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Target provider</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Target project</emphasis>: Select from the list.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Virtual machines</emphasis> page, select the virtual machines you want to migrate and click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Network map</emphasis> page, choose one of the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use an existing network map</emphasis>: Select an existing network map from the list.
							</simpara>
							<simpara>
								These are network maps available for all plans, and therefore, they are <emphasis>ownerless</emphasis> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <emphasis>owner</emphasis> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</simpara>
							<note>
								<simpara>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</simpara>
							</note>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use a new network map</emphasis>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which will then be considered to be its owner. Maps that you create using this option are not available in the <emphasis role="strong">Use an existing network map</emphasis> option because each is created with an owner.
							</simpara>
							<note>
								<simpara>
									You can create an ownerless network map, which you and others can use for additional migration plans, in the <emphasis role="strong">Network Maps</emphasis> section of the UI.
								</simpara>
							</note>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Source network</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target network</emphasis>: Select from the list.
									</simpara>
									<simpara>
										If needed, click <emphasis role="strong">Add mapping</emphasis> to add another mapping.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Network map name</emphasis>: Enter a name or let MTV automatically generate a name for the network map.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Storage map</emphasis> page, choose one of the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use an existing storage map</emphasis>: Select an existing storage map from the list.
							</simpara>
							<simpara>
								These are storage maps available for all plans, and therefore, they are <emphasis>ownerless</emphasis> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <emphasis>owner</emphasis> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</simpara>
							<note>
								<simpara>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</simpara>
							</note>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use new storage map</emphasis>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. For each map, specify the following. Maps that you create using this option are not available in the <emphasis role="strong">Use an existing storage map</emphasis> option because each is created with an owner.
							</simpara>
							<note>
								<simpara>
									You can create an ownerless storage map, which you and others can use for additional migration plans, in the <emphasis role="strong">Storage Maps</emphasis> section of the UI.
								</simpara>
							</note>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Source storage</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target storage</emphasis>: Select from the list.
									</simpara>
									<simpara>
										If needed, click <emphasis role="strong">Add mapping</emphasis> to add another mapping.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Storage map name</emphasis>: Enter a name or let MTV automatically generate a name for the storage map.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Other settings (optional)</emphasis> page, you have the option to change the <emphasis role="strong">Transfer network</emphasis> of your migration plan.
					</simpara>
					<simpara>
						The transfer network is the network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Verify that the transfer network is in the selected target project.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To choose a different transfer network, select a different transfer network from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Optional: To configure another OpenShift network in the OpenShift web console, click <emphasis role="strong">Networking &gt; NetworkAttachmentDefinitions</emphasis>.
							</simpara>
							<simpara>
								To learn more about the different types of networks OpenShift supports, see <link xlink:href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</link>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <link linkend="selecting-migration-network-for-vmware-source-provider_vmware">Selecting a migration network for a VMware source provider</link>.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Hooks (optional)</emphasis> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						To add a hook, select the appropriate <emphasis role="strong">Enable hook</emphasis> checkbox.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Enter the <emphasis role="strong">Hook runner image</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Enter the <emphasis role="strong">Ansible playbook</emphasis> of the hook in the window.
					</simpara>
					<note>
						<simpara>
							You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.
						</simpara>
					</note>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Review and Create</emphasis> page, review the information displayed.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Edit any item by doing the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click its <emphasis role="strong">Edit step</emphasis> link.
							</simpara>
							<simpara>
								The wizard opens to the page on which you defined the item.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit the item.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Either click <emphasis role="strong">Next</emphasis> to advance to the next page of the wizard, or click <emphasis role="strong">Skip to review</emphasis> to return directly to the <emphasis role="strong">Review and create</emphasis> page.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						When you finish reviewing the details of the plan, click <emphasis role="strong">Create plan</emphasis>. MTV validates your plan.
					</simpara>
					<simpara>
						When your plan is validated, the <emphasis role="strong">Plan details</emphasis> page for your plan opens in the <emphasis role="strong">Details</emphasis> tab.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						In addition to listing details based on your entries in the wizard, the <emphasis role="strong">Plan details</emphasis> tab includes the following two sections after the details of the plan:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Migration history</emphasis>: Details about successful and unsuccessful attempts to run the plan
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Conditions</emphasis>: Any changes that need to be made to the plan so that it can run successfully
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						When you have fixed all conditions listed, you can run your plan from the <emphasis role="strong">Plans</emphasis> page.
					</simpara>
					<simpara>
						The <emphasis role="strong">Plan details</emphasis> page also includes five additional tabs, which are described in the table that follows:
					</simpara>
					<table colsep="1" frame="all" rowsep="1">
						<title>Tabs of the Plan details page</title>
						<tgroup cols="5">
							<colspec colname="col_1" colwidth="20*"></colspec>
							<colspec colname="col_2" colwidth="20*"></colspec>
							<colspec colname="col_3" colwidth="20*"></colspec>
							<colspec colname="col_4" colwidth="20*"></colspec>
							<colspec colname="col_5" colwidth="20*"></colspec>
							<thead>
								<row>
									<entry align="left" valign="top">YAML</entry>
									<entry align="left" valign="top">Virtual Machines</entry>
									<entry align="left" valign="top">Resources</entry>
									<entry align="left" valign="top">Mappings</entry>
									<entry align="left" valign="top">Hooks</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Editable YAML <literal>Plan</literal> manifest based on your plan’s details including source provider, network and storage maps, VMs, and any issues with your VMs
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										The VMs the plan migrates
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Editable specification of the network and storage maps used by your plan
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Updatable specification of the hooks used by your plan, if any
									</simpara>
									</entry>
								</row>
							</tbody>
						</tgroup>
					</table>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="running-migration-plan_ostack">
			<title>Running a migration plan</title>
			<simpara role="_abstract">
				You can run a migration plan and view its progress in the Red Hat OpenShift web console.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						Valid migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration</emphasis> &gt; <emphasis role="strong">Plans for virtualization</emphasis>.
					</simpara>
					<simpara>
						The <emphasis role="strong">Plans</emphasis> list displays the source and target providers, the number of virtual machines (VMs) being migrated, the status, the date that the migration started, and the description of each plan.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Start</emphasis> beside a migration plan to start the migration.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Start</emphasis> in the confirmation window that opens.
					</simpara>
					<simpara>
						The plan’s <emphasis role="strong">Status</emphasis> changes to <emphasis role="strong">Running</emphasis>, and the migration’s progress is displayed.
					</simpara>
					<warning>
						<simpara>
							Do not take a snapshot of a VM after you start a migration. Taking a snaphot after a migration starts might cause the migration to fail.
						</simpara>
					</warning>
				</listitem>
				<listitem>
					<simpara>
						Optional: Click the links in the migration’s <emphasis role="strong">Status</emphasis> to see its overall status and the status of each VM:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								The link on the left indicates whether the migration failed, succeeded, or is ongoing. It also reports the number of VMs whose migration succeeded, failed, or was canceled.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The link on the right opens the <emphasis role="strong">Virtual Machines</emphasis> tab of the <emphasis role="strong">Plan Details</emphasis> page. For each VM, the tab displays the following data:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										The name of the VM
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The start and end times of the migration
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The amount of data copied
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										A progress pipeline for the VM’s migration
									</simpara>
									<warning>
										<simpara>
											vMotion, including svMotion, and relocation must be disabled for VMs that are being imported to avoid data corruption.
										</simpara>
									</warning>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: To view your migration’s logs, either as it is running or after it is completed, perform the following actions:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click the <emphasis role="strong">Virtual Machines</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the arrow (<emphasis role="strong">&gt;</emphasis>) to the left of the virtual machine whose migration progress you want to check.
							</simpara>
							<simpara>
								The VM’s details are displayed.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the <emphasis role="strong">Pods</emphasis> section, in the <emphasis role="strong">Pod links</emphasis> column, click the <emphasis role="strong">Logs</emphasis> link.
							</simpara>
							<simpara>
								The <emphasis role="strong">Logs</emphasis> tab opens.
							</simpara>
							<note>
								<simpara>
									Logs are not always available. The following are common reasons for logs not being available:
								</simpara>
								<itemizedlist>
									<listitem>
										<simpara>
											The migration is from OpenShift Virtualization to OpenShift Virtualization. In this case, <literal>virt-v2v</literal> is not involved, so no pod is required.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											No pod was created.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											The pod was deleted.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											The migration failed before running the pod.
										</simpara>
									</listitem>
								</itemizedlist>
							</note>
						</listitem>
						<listitem>
							<simpara>
								To see the raw logs, click the <emphasis role="strong">Raw</emphasis> link.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To download the logs, click the <emphasis role="strong">Download</emphasis> link.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="migration-plan-options-ui_ostack">
			<title>Migration plan options</title>
			<simpara role="_abstract">
				On the <emphasis role="strong">Plans for virtualization</emphasis> page of the Red Hat OpenShift web console, you can click the Options menu 
				<inlinemediaobject>
					<imageobject>
						<imagedata contentdepth="20" fileref="images/modules/images/kebab.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>kebab</phrase>
					</textobject>
				</inlinemediaobject>
				 beside a migration plan to access the following options:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						<emphasis role="strong">Edit Plan</emphasis>: Edit the details of a migration plan. If the plan is running or has completed successfully, you cannot edit the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								All properties on the <emphasis role="strong">Settings</emphasis> section of the <emphasis role="strong">Plan details</emphasis> page. For example, warm or cold migration, target namespace, and preserved static IPs.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The plan’s mapping on the <emphasis role="strong">Mappings</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The hooks listed on the <emphasis role="strong">Hooks</emphasis> tab.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Start migration</emphasis>: Active only if relevant.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Restart migration</emphasis>: Restart a migration that was interrupted. Before choosing this option, make sure there are no error messages. If there are, you need to edit the plan.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Cutover</emphasis>: Warm migrations only. Active only if relevant. Clicking <emphasis role="strong">Cutover</emphasis> opens the <emphasis role="strong">Cutover</emphasis> window, which supports the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Set cutover</emphasis>: Set the date and time for a cutover.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Remove cutover</emphasis>: Cancel a scheduled cutover. Active only if relevant.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Duplicate Plan</emphasis>: Create a new migration plan with the same virtual machines (VMs), parameters, mappings, and hooks as an existing plan. You can use this feature for the following tasks:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Migrate VMs to a different namespace.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit an archived migration plan.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit a migration plan with a different status, for example, failed, canceled, running, critical, or ready.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Archive Plan</emphasis>: Delete the logs, history, and metadata of a migration plan. The plan cannot be edited or restarted. It can only be viewed, duplicated, or deleted.
					</simpara>
					<note>
						<simpara>
							<emphasis role="strong">Archive Plan</emphasis> is irreversible. However, you can duplicate an archived plan.
						</simpara>
					</note>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Delete Plan</emphasis>: Permanently remove a migration plan. You cannot delete a running migration plan.
					</simpara>
					<note>
						<simpara>
							<emphasis role="strong">Delete Plan</emphasis> is irreversible.
						</simpara>
						<simpara>
							Deleting a migration plan does not remove temporary resources. To remove temporary resources, archive the plan first before deleting it.
						</simpara>
					</note>
					<note>
						<simpara>
							The results of archiving and then deleting a migration plan vary by whether you created the plan and its storage and network mappings using the CLI or the UI.
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									If you created them using the UI, then the migration plan and its mappings no longer appear in the UI.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									If you created them using the CLI, then the mappings might still appear in the UI. This is because mappings in the CLI can be used by more than one migration plan, but mappings created in the UI can only be used in one migration plan.
								</simpara>
							</listitem>
						</itemizedlist>
					</note>
				</listitem>
			</itemizedlist>
		</section>
		<section xml:id="about-network-maps_ostack">
			<title>About network maps in migration plans</title>
			<simpara role="_abstract">
				You can create network maps in Migration Toolkit for Virtualization (MTV) migration plans to map source networks to OpenShift Virtualization networks.
			</simpara>
			<simpara>
				There are two types of network maps: maps created for a specific migration plan and maps created for use by any migration plan.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Maps created for a specific plan are said to be <emphasis>owned</emphasis> by that plan. You can create these kinds of maps in the <emphasis role="strong">Network maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created for use by any migration plan are to said to be <emphasis>ownerless</emphasis>. You can create these kinds of maps in the <emphasis role="strong">Network maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console.
					</simpara>
					<simpara>
						You, or anyone working in the same project, can use them when creating a migration plan in the <emphasis role="strong">Plan creation wizard</emphasis>. When you choose one of these unowned maps for a migration plan, MTV creates a copy of the map and defines your migration plan as the <emphasis>owner of that copy</emphasis>. Any changes you make to the copy do not affect the original map, nor do they apply to any other plan that uses a copy of the map. Both types of network maps for a project are shown in the <emphasis role="strong">Network maps</emphasis> page, but there is an important difference in the information displayed in the <emphasis role="strong">Owner</emphasis> column of that page for each:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Network maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console are shown as having no owner.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Network maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis> are shown as being owned by the migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<section xml:id="creating-yaml-based-network-maps-ui_ostack">
				<title>Creating ownerless network maps in the MTV UI</title>
				<simpara role="_abstract">
					You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Network maps</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Create NetworkMap</emphasis>.
						</simpara>
						<simpara>
							The <emphasis role="strong">Create NetworkMap</emphasis> page opens.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							If you enter YAML definitions, use the following:
						</simpara>
					</listitem>
				</orderedlist>
				
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <co xml:id="CO9-1"></co>
      source:<co xml:id="CO9-2"></co>
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
    - destination:
        name: &lt;network_attachment_definition&gt; <co xml:id="CO9-3"></co>
        namespace: &lt;network_attachment_definition_namespace&gt; <co xml:id="CO9-4"></co>
        type: multus
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
				<calloutlist>
					<callout arearefs="CO9-1">
						<para>
							Allowed values are <literal>pod</literal> and <literal>multus</literal>.
						</para>
					</callout>
					<callout arearefs="CO9-2">
						<para>
							You can use either the <literal>id</literal> or the <literal>name</literal> parameter to specify the source network. For <literal>id</literal>, specify the OpenStack network UUID.
						</para>
					</callout>
					<callout arearefs="CO9-3">
						<para>
							Specify a network attachment definition for each additional OpenShift Virtualization network.
						</para>
					</callout>
					<callout arearefs="CO9-4">
						<para>
							Required only when <literal>type</literal> is <literal>multus</literal>. Specify the namespace of the OpenShift Virtualization network attachment definition.
						</para>
					</callout>
				</calloutlist>
				<orderedlist numeration="arabic" startingnumber="5">
					<listitem>
						<simpara>
							Optional: To download your input, click <emphasis role="strong">Download</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Create</emphasis>.
						</simpara>
						<simpara>
							Your map appears in the list of network maps.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
		</section>
		<section xml:id="about-storage-maps_ostack">
			<title>About storage maps in migration plans</title>
			<simpara role="_abstract">
				You can create storage maps in Migration Toolkit for Virtualization (MTV) migration plans to map source disk storages to OpenShift Virtualization storage classes.
			</simpara>
			<simpara>
				There are two types of storage maps: maps created for a specific migration plan and maps created for use by any migration plan.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Maps created for a specific plan are said to be <emphasis>owned</emphasis> by that plan. You can create these kinds of maps in the <emphasis role="strong">Storage maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created for use by any migration plan are to said to be <emphasis>ownerless</emphasis>. You can create these kinds of maps in the <emphasis role="strong">Storage maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console.
					</simpara>
					<simpara>
						You, or anyone working in the same project, can use them when creating a migration plan in the <emphasis role="strong">Plan creation wizard</emphasis>. When you choose one of these unowned maps for a migration plan, MTV creates a copy of the map and defines your migration plan as the <emphasis>owner of that copy</emphasis>. Any changes you make to the copy do not affect the original map, nor do they apply to any other plan that uses a copy of the map. Both types of storage maps for a project are shown in the <emphasis role="strong">Storage maps</emphasis> page, but there is an important difference in the information displayed in the <emphasis role="strong">Owner</emphasis> column of that page for each:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Storage maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console are shown as having no owner.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Storage maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis> are shown as being owned by the migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<section xml:id="creating-ownerless-storage-maps-ui_ostack">
				<title>Creating ownerless storage maps in the MTV UI</title>
				<simpara role="_abstract">
					You can create ownerless storage maps by using the MTV UI to map source disk storages to OpenShift Virtualization storage classes.
				</simpara>
				<simpara>
					You can create this type of map by using one of the following methods:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							<emphasis role="strong">Create with form</emphasis>, selecting items such as a source provider from lists.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<emphasis role="strong">Create with YAML</emphasis>, either by entering YAML or JSON definitions or by attaching files containing the same.
						</simpara>
					</listitem>
				</itemizedlist>
				<section xml:id="creating-form-based-storage-maps-ui-ostack_ostack">
					<title>Creating ownerless storage maps using the form page of the MTV UI</title>
					<simpara role="_abstract">
						You can create ownerless storage maps by using the form page of the MTV UI.
					</simpara>
					<itemizedlist>
						<title>Prerequisites</title>
						<listitem>
							<simpara>
								Have an OpenStack source provider and a OpenShift Virtualization destination provider. For more information, see <link linkend="adding-source-provider_cnv">Adding an Red Hat OpenShift source provider</link> or <link linkend="adding-source-provider_dest_cnv">Adding an OpenShift Virtualization destination provider</link>.
							</simpara>
						</listitem>
					</itemizedlist>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Storage maps</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create storage map</emphasis> &gt; <emphasis role="strong">Create with form</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Specify the following:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Map name</emphasis>: Name of the storage map.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Project</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Source provider</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target provider</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Source storage</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target storage</emphasis>: Select from the list
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								Optional: Click <emphasis role="strong">Add mapping</emphasis> to create additional storage maps, including mapping multiple storage sources to a single target storage class.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create</emphasis>.
							</simpara>
							<simpara>
								Your map appears in the list of storage maps.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
				<section xml:id="creating-yaml-based-stoarge-maps-ui_ostack">
					<title>Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</title>
					<simpara role="_abstract">
						You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Storage maps</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create storage map</emphasis> &gt; <emphasis role="strong">Create with YAML</emphasis>.
							</simpara>
							<simpara>
								The <emphasis role="strong">Create StorageMap</emphasis> page opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If you enter YAML definitions, use the following:
							</simpara>
						</listitem>
					</orderedlist>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <co xml:id="CO10-1"></co>
      source:
        id: &lt;source_volume_type&gt; <co xml:id="CO10-2"></co>
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO10-1">
							<para>
								Allowed values are <literal>ReadWriteOnce</literal> and <literal>ReadWriteMany</literal>.
							</para>
						</callout>
						<callout arearefs="CO10-2">
							<para>
								Specify the OpenStack <literal>volume_type</literal> UUID. For example, <literal>f2737930-b567-451a-9ceb-2887f6207009</literal>.
							</para>
						</callout>
					</calloutlist>
					<orderedlist numeration="arabic" startingnumber="5">
						<listitem>
							<simpara>
								Optional: To download your input, click <emphasis role="strong">Download</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create</emphasis>.
							</simpara>
							<simpara>
								Your map appears in the list of storage maps.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
			</section>
		</section>
		<section xml:id="canceling-migration-ui_ostack">
			<title>Canceling a migration</title>
			<simpara role="_abstract">
				You can cancel the migration of some or all virtual machines (VMs) while a migration plan is in progress by using the Red Hat OpenShift web console.
			</simpara>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Plans for virtualization</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the name of a running migration plan to view the migration details.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Select one or more VMs and click <emphasis role="strong">Cancel</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Yes, cancel</emphasis> to confirm the cancellation.
					</simpara>
					<simpara>
						In the <emphasis role="strong">Migration details by VM</emphasis> list, the status of the canceled VMs is <emphasis role="strong">Canceled</emphasis>. The unmigrated and the migrated virtual machines are not affected.
					</simpara>
				</listitem>
			</orderedlist>
			<simpara>
				You can restart a canceled migration by clicking <emphasis role="strong">Restart</emphasis> beside the migration plan on the <emphasis role="strong">Migration plans</emphasis> page.
			</simpara>
		</section>
	</chapter>
	<chapter xml:id="migrating-ova_ova">
		<title>Migrating virtual machines from OVA</title>
		<section xml:id="adding-source-provider_ova">
			<title>Adding an Open Virtual Appliance (OVA) source provider</title>
			<simpara role="_abstract">
				You can add Open Virtual Appliance (OVA) files that were created by VMware vSphere as a source provider by using the Red Hat OpenShift web console.
			</simpara>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Access the <emphasis role="strong">Create provider</emphasis> page for Open Virtual Appliance by doing one of the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Providers</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										Click <emphasis role="strong">Create Provider</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Click <emphasis role="strong">Open Virtual Appliance</emphasis>.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Overview</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										In the <emphasis role="strong">Welcome</emphasis> pane, click <emphasis role="strong">Open Virtual Appliance</emphasis>.
									</simpara>
									<simpara>
										If the <emphasis role="strong">Welcome</emphasis> pane is not visible, click <emphasis role="strong">Show the welcome card</emphasis> in the upper-right corner of the page, and click <emphasis role="strong">Open Virtual Appliance</emphasis> when the <emphasis role="strong">Welcome</emphasis> pane opens.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Provider resource name</emphasis>: Name of the source provider
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">URL</emphasis>: URL of the NFS file share that serves the OVA
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create provider</emphasis> to add and save the provider.
					</simpara>
					<simpara>
						The provider appears in the list of providers.
					</simpara>
					<note>
						<simpara>
							An error message might appear that states that an error has occurred. You can ignore this message.
						</simpara>
					</note>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="adding-source-provider_dest_ova">
			<title>Adding an OpenShift Virtualization destination provider</title>
			<simpara role="_abstract">
				You can use a Red Hat OpenShift Virtualization provider as both a source provider and a destination provider.
			</simpara>
			<simpara>
				Specifically, the host cluster that is automatically added as a OpenShift Virtualization provider can be used as both a source provider and a destination provider.
			</simpara>
			<simpara>
				You can also add another OpenShift Virtualization destination provider to the Red Hat OpenShift web console in addition to the default OpenShift Virtualization destination provider, which is the cluster where you installed MTV.
			</simpara>
			<simpara>
				You can migrate VMs from the cluster that MTV is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						You must have an OpenShift Virtualization <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/authentication_and_authorization/using-service-accounts">service account token</link> with <literal>cluster-admin</literal> privileges.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Access the <emphasis role="strong">Create OpenShift Virtualization provider</emphasis> interface by doing one of the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Providers</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										Click <emphasis role="strong">Create Provider</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Click <emphasis role="strong">OpenShift Virtualization</emphasis>.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Overview</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										In the <emphasis role="strong">Welcome</emphasis> pane, click <emphasis role="strong">OpenShift Virtualization</emphasis>.
									</simpara>
									<simpara>
										If the <emphasis role="strong">Welcome</emphasis> pane is not visible, click <emphasis role="strong">Show the welcome card</emphasis> in the upper-right corner of the page, and click <emphasis role="strong">OpenShift Virtualization</emphasis> when the <emphasis role="strong">Welcome</emphasis> pane opens.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Provider resource name</emphasis>: Name of the source provider
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">URL</emphasis>: URL of the endpoint of the API server
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Service account bearer token</emphasis>: Token for a service account with <literal>cluster-admin</literal> privileges
							</simpara>
							<simpara>
								If both <emphasis role="strong">URL</emphasis> and <emphasis role="strong">Service account bearer token</emphasis> are left blank, the local OpenShift cluster is used.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Choose one of the following options for validating CA certificates:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use a custom CA certificate</emphasis>: Migrate after validating a custom CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use the system CA certificate</emphasis>: Migrate after validating the system CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Skip certificate validation</emphasis> : Migrate without validating a CA certificate.
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										To use a custom CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to left, and <emphasis>either</emphasis> drag the CA certificate to the text box <emphasis>or</emphasis> browse for it and click <emphasis role="strong">Select</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To use the system CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to the left, and leave the <emphasis role="strong">CA certificate</emphasis> text box empty.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To skip certificate validation, toggle the <emphasis role="strong">Skip certificate validation</emphasis> switch to the right.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click <emphasis role="strong">Fetch certificate from URL</emphasis>. The <emphasis role="strong">Verify certificate</emphasis> window opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If the details are correct, select the <emphasis role="strong">I trust the authenticity of this certificate</emphasis> checkbox, and then, click <emphasis role="strong">Confirm</emphasis>. If not, click <emphasis role="strong">Cancel</emphasis>, and then, enter the correct certificate information manually.
							</simpara>
							<simpara>
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create provider</emphasis> to add and save the provider.
					</simpara>
					<simpara>
						The provider appears in the list of providers.
					</simpara>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="selecting-migration-network-for-virt-provider_dest_ova">
			<title>Selecting a migration network for an OpenShift Virtualization provider</title>
			<simpara role="_abstract">
				You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.
			</simpara>
			<simpara>
				After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.
			</simpara>
			<simpara>
				If you do not select a migration network, the default migration network is the <literal>pod</literal> network, which might not be optimal for disk transfer.
			</simpara>
			<note>
				<simpara>
					You can override the default migration network of the provider by selecting a different network when you create a migration plan.
				</simpara>
			</note>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration</emphasis> &gt; <emphasis role="strong">Providers for virtualization</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the OpenShift Virtualization provider whose migration network you want to change.
					</simpara>
					<simpara>
						When the <emphasis role="strong">Providers detail</emphasis> page opens:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the <emphasis role="strong">Networks</emphasis> tab.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Set default transfer network</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Select a default transfer network from the list and click <emphasis role="strong">Save</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Configure a gateway in the network used for MTV migrations by completing the following steps:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Networking</emphasis> &gt; <emphasis role="strong">NetworkAttachmentDefinitions</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Select the appropriate default transfer network NAD.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the <emphasis role="strong">YAML</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Add <literal>forklift.konveyor.io/route</literal> to the metadata:annotations section of the YAML, as in the following example:
							</simpara>
							
<programlisting language="yaml" linenumbering="unnumbered">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt; <co xml:id="CO11-1"></co></programlisting>
							<calloutlist>
								<callout arearefs="CO11-1">
									<para>
										The <literal>NetworkAttachmentDefinition</literal> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.
									</para>
								</callout>
							</calloutlist>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Save</emphasis>.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="creating-plan-wizard-290-ova_ova">
			<title>Creating an Open Virtualization Appliance (OVA) migration plan by using the MTV wizard</title>
			<simpara role="_abstract">
				You can migrate Open Virtual Appliance (OVA) files that were created by VMware vSphere by using the Migration Toolkit for Virtualization plan creation wizard.
			</simpara>
			<simpara>
				The wizard is designed to lead you step-by-step in creating a migration plan.
			</simpara>
			<warning>
				<simpara>
					Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.
				</simpara>
				<simpara>
					This prevents concurrent disk access to the storage the guest points to.
				</simpara>
			</warning>
			<important>
				<simpara>
					A plan cannot contain more than 500 VMs or 500 disks.
				</simpara>
			</important>
			<important>
				<simpara>
					When you click <emphasis role="strong">Create plan</emphasis> on the <emphasis role="strong">Review and create</emphasis> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <emphasis role="strong">Plan details</emphasis> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.
				</simpara>
			</important>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						Have an OVA source provider and a OpenShift Virtualization destination provider. For more information, see <link linkend="adding-source-provider_ova">Adding an Open Virtual Appliance (OVA) source provider</link> or <link linkend="adding-source-provider_dest_ova">Adding an OpenShift Virtualization destination provider</link>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If you plan to create a <emphasis role="strong">Network map</emphasis> or a <emphasis role="strong">Storage map</emphasis> that will be used by more than one migration plan, create it in the <emphasis role="strong">Network maps</emphasis> or <emphasis role="strong">Storage maps</emphasis> page of the UI before you create a migration plan that uses that map.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Migration plans</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create plan</emphasis>.
					</simpara>
					<simpara>
						The <emphasis role="strong">Create migration plan</emphasis> wizard opens.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">General</emphasis> page, specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Plan name</emphasis>: Enter a name.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Plan project</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Source provider</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Target provider</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Target project</emphasis>: Select from the list.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Virtual machines</emphasis> page, select the virtual machines you want to migrate and click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Network map</emphasis> page, choose one of the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use an existing network map</emphasis>: Select an existing network map from the list.
							</simpara>
							<simpara>
								These are network maps available for all plans, and therefore, they are <emphasis>ownerless</emphasis> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <emphasis>owner</emphasis> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</simpara>
							<note>
								<simpara>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</simpara>
							</note>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use a new network map</emphasis>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which will then be considered to be its owner. Maps that you create using this option are not available in the <emphasis role="strong">Use an existing network map</emphasis> option because each is created with an owner.
							</simpara>
							<note>
								<simpara>
									You can create an ownerless network map, which you and others can use for additional migration plans, in the <emphasis role="strong">Network Maps</emphasis> section of the UI.
								</simpara>
							</note>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Source network</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target network</emphasis>: Select from the list.
									</simpara>
									<simpara>
										If needed, click <emphasis role="strong">Add mapping</emphasis> to add another mapping.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Network map name</emphasis>: Enter a name or let MTV automatically generate a name for the network map.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Storage map</emphasis> page, choose one of the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use an existing storage map</emphasis>: Select an existing storage map from the list.
							</simpara>
							<simpara>
								These are storage maps available for all plans, and therefore, they are <emphasis>ownerless</emphasis> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <emphasis>owner</emphasis> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</simpara>
							<note>
								<simpara>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</simpara>
							</note>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use new storage map</emphasis>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. For each map, specify the following. Maps that you create using this option are not available in the <emphasis role="strong">Use an existing storage map</emphasis> option because each is created with an owner.
							</simpara>
							<note>
								<simpara>
									You can create an ownerless storage map, which you and others can use for additional migration plans, in the <emphasis role="strong">Storage Maps</emphasis> section of the UI.
								</simpara>
							</note>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Source storage</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target storage</emphasis>: Select from the list.
									</simpara>
									<simpara>
										If needed, click <emphasis role="strong">Add mapping</emphasis> to add another mapping.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Storage map name</emphasis>: Enter a name or let MTV automatically generate a name for the storage map.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Other settings (optional)</emphasis> page, you have the option to change the <emphasis role="strong">Transfer network</emphasis> of your migration plan.
					</simpara>
					<simpara>
						The transfer network is the network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Verify that the transfer network is in the selected target project.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To choose a different transfer network, select a different transfer network from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Optional: To configure another OpenShift network in the OpenShift web console, click <emphasis role="strong">Networking &gt; NetworkAttachmentDefinitions</emphasis>.
							</simpara>
							<simpara>
								To learn more about the different types of networks OpenShift supports, see <link xlink:href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</link>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <link linkend="selecting-migration-network-for-vmware-source-provider_vmware">Selecting a migration network for a VMware source provider</link>.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Hooks (optional)</emphasis> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						To add a hook, select the appropriate <emphasis role="strong">Enable hook</emphasis> checkbox.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Enter the <emphasis role="strong">Hook runner image</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Enter the <emphasis role="strong">Ansible playbook</emphasis> of the hook in the window.
					</simpara>
					<note>
						<simpara>
							You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.
						</simpara>
					</note>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Review and Create</emphasis> page, review the information displayed.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Edit any item by doing the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click its <emphasis role="strong">Edit step</emphasis> link.
							</simpara>
							<simpara>
								The wizard opens to the page on which you defined the item.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit the item.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Either click <emphasis role="strong">Next</emphasis> to advance to the next page of the wizard, or click <emphasis role="strong">Skip to review</emphasis> to return directly to the <emphasis role="strong">Review and create</emphasis> page.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						When you finish reviewing the details of the plan, click <emphasis role="strong">Create plan</emphasis>. MTV validates your plan.
					</simpara>
					<simpara>
						When your plan is validated, the <emphasis role="strong">Plan details</emphasis> page for your plan opens in the <emphasis role="strong">Details</emphasis> tab.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						In addition to listing details based on your entries in the wizard, the <emphasis role="strong">Plan details</emphasis> tab includes the following two sections after the details of the plan:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Migration history</emphasis>: Details about successful and unsuccessful attempts to run the plan
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Conditions</emphasis>: Any changes that need to be made to the plan so that it can run successfully
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						When you have fixed all conditions listed, you can run your plan from the <emphasis role="strong">Plans</emphasis> page.
					</simpara>
					<simpara>
						The <emphasis role="strong">Plan details</emphasis> page also includes five additional tabs, which are described in the table that follows:
					</simpara>
					<table colsep="1" frame="all" rowsep="1">
						<title>Tabs of the Plan details page</title>
						<tgroup cols="5">
							<colspec colname="col_1" colwidth="20*"></colspec>
							<colspec colname="col_2" colwidth="20*"></colspec>
							<colspec colname="col_3" colwidth="20*"></colspec>
							<colspec colname="col_4" colwidth="20*"></colspec>
							<colspec colname="col_5" colwidth="20*"></colspec>
							<thead>
								<row>
									<entry align="left" valign="top">YAML</entry>
									<entry align="left" valign="top">Virtual Machines</entry>
									<entry align="left" valign="top">Resources</entry>
									<entry align="left" valign="top">Mappings</entry>
									<entry align="left" valign="top">Hooks</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Editable YAML <literal>Plan</literal> manifest based on your plan’s details including source provider, network and storage maps, VMs, and any issues with your VMs
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										The VMs the plan migrates
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Editable specification of the network and storage maps used by your plan
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Updatable specification of the hooks used by your plan, if any
									</simpara>
									</entry>
								</row>
							</tbody>
						</tgroup>
					</table>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="running-migration-plan_ova">
			<title>Running a migration plan</title>
			<simpara role="_abstract">
				You can run a migration plan and view its progress in the Red Hat OpenShift web console.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						Valid migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration</emphasis> &gt; <emphasis role="strong">Plans for virtualization</emphasis>.
					</simpara>
					<simpara>
						The <emphasis role="strong">Plans</emphasis> list displays the source and target providers, the number of virtual machines (VMs) being migrated, the status, the date that the migration started, and the description of each plan.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Start</emphasis> beside a migration plan to start the migration.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Start</emphasis> in the confirmation window that opens.
					</simpara>
					<simpara>
						The plan’s <emphasis role="strong">Status</emphasis> changes to <emphasis role="strong">Running</emphasis>, and the migration’s progress is displayed.
					</simpara>
					<warning>
						<simpara>
							Do not take a snapshot of a VM after you start a migration. Taking a snaphot after a migration starts might cause the migration to fail.
						</simpara>
					</warning>
				</listitem>
				<listitem>
					<simpara>
						Optional: Click the links in the migration’s <emphasis role="strong">Status</emphasis> to see its overall status and the status of each VM:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								The link on the left indicates whether the migration failed, succeeded, or is ongoing. It also reports the number of VMs whose migration succeeded, failed, or was canceled.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The link on the right opens the <emphasis role="strong">Virtual Machines</emphasis> tab of the <emphasis role="strong">Plan Details</emphasis> page. For each VM, the tab displays the following data:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										The name of the VM
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The start and end times of the migration
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The amount of data copied
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										A progress pipeline for the VM’s migration
									</simpara>
									<warning>
										<simpara>
											vMotion, including svMotion, and relocation must be disabled for VMs that are being imported to avoid data corruption.
										</simpara>
									</warning>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: To view your migration’s logs, either as it is running or after it is completed, perform the following actions:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click the <emphasis role="strong">Virtual Machines</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the arrow (<emphasis role="strong">&gt;</emphasis>) to the left of the virtual machine whose migration progress you want to check.
							</simpara>
							<simpara>
								The VM’s details are displayed.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the <emphasis role="strong">Pods</emphasis> section, in the <emphasis role="strong">Pod links</emphasis> column, click the <emphasis role="strong">Logs</emphasis> link.
							</simpara>
							<simpara>
								The <emphasis role="strong">Logs</emphasis> tab opens.
							</simpara>
							<note>
								<simpara>
									Logs are not always available. The following are common reasons for logs not being available:
								</simpara>
								<itemizedlist>
									<listitem>
										<simpara>
											The migration is from OpenShift Virtualization to OpenShift Virtualization. In this case, <literal>virt-v2v</literal> is not involved, so no pod is required.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											No pod was created.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											The pod was deleted.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											The migration failed before running the pod.
										</simpara>
									</listitem>
								</itemizedlist>
							</note>
						</listitem>
						<listitem>
							<simpara>
								To see the raw logs, click the <emphasis role="strong">Raw</emphasis> link.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To download the logs, click the <emphasis role="strong">Download</emphasis> link.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="migration-plan-options-ui_ova">
			<title>Migration plan options</title>
			<simpara role="_abstract">
				On the <emphasis role="strong">Plans for virtualization</emphasis> page of the Red Hat OpenShift web console, you can click the Options menu 
				<inlinemediaobject>
					<imageobject>
						<imagedata contentdepth="20" fileref="images/modules/images/kebab.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>kebab</phrase>
					</textobject>
				</inlinemediaobject>
				 beside a migration plan to access the following options:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						<emphasis role="strong">Edit Plan</emphasis>: Edit the details of a migration plan. If the plan is running or has completed successfully, you cannot edit the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								All properties on the <emphasis role="strong">Settings</emphasis> section of the <emphasis role="strong">Plan details</emphasis> page. For example, warm or cold migration, target namespace, and preserved static IPs.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The plan’s mapping on the <emphasis role="strong">Mappings</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The hooks listed on the <emphasis role="strong">Hooks</emphasis> tab.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Start migration</emphasis>: Active only if relevant.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Restart migration</emphasis>: Restart a migration that was interrupted. Before choosing this option, make sure there are no error messages. If there are, you need to edit the plan.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Cutover</emphasis>: Warm migrations only. Active only if relevant. Clicking <emphasis role="strong">Cutover</emphasis> opens the <emphasis role="strong">Cutover</emphasis> window, which supports the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Set cutover</emphasis>: Set the date and time for a cutover.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Remove cutover</emphasis>: Cancel a scheduled cutover. Active only if relevant.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Duplicate Plan</emphasis>: Create a new migration plan with the same virtual machines (VMs), parameters, mappings, and hooks as an existing plan. You can use this feature for the following tasks:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Migrate VMs to a different namespace.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit an archived migration plan.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit a migration plan with a different status, for example, failed, canceled, running, critical, or ready.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Archive Plan</emphasis>: Delete the logs, history, and metadata of a migration plan. The plan cannot be edited or restarted. It can only be viewed, duplicated, or deleted.
					</simpara>
					<note>
						<simpara>
							<emphasis role="strong">Archive Plan</emphasis> is irreversible. However, you can duplicate an archived plan.
						</simpara>
					</note>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Delete Plan</emphasis>: Permanently remove a migration plan. You cannot delete a running migration plan.
					</simpara>
					<note>
						<simpara>
							<emphasis role="strong">Delete Plan</emphasis> is irreversible.
						</simpara>
						<simpara>
							Deleting a migration plan does not remove temporary resources. To remove temporary resources, archive the plan first before deleting it.
						</simpara>
					</note>
					<note>
						<simpara>
							The results of archiving and then deleting a migration plan vary by whether you created the plan and its storage and network mappings using the CLI or the UI.
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									If you created them using the UI, then the migration plan and its mappings no longer appear in the UI.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									If you created them using the CLI, then the mappings might still appear in the UI. This is because mappings in the CLI can be used by more than one migration plan, but mappings created in the UI can only be used in one migration plan.
								</simpara>
							</listitem>
						</itemizedlist>
					</note>
				</listitem>
			</itemizedlist>
		</section>
		<section xml:id="about-network-maps_ova">
			<title>About network maps in migration plans</title>
			<simpara role="_abstract">
				You can create network maps in Migration Toolkit for Virtualization (MTV) migration plans to map source networks to OpenShift Virtualization networks.
			</simpara>
			<simpara>
				There are two types of network maps: maps created for a specific migration plan and maps created for use by any migration plan.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Maps created for a specific plan are said to be <emphasis>owned</emphasis> by that plan. You can create these kinds of maps in the <emphasis role="strong">Network maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created for use by any migration plan are to said to be <emphasis>ownerless</emphasis>. You can create these kinds of maps in the <emphasis role="strong">Network maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console.
					</simpara>
					<simpara>
						You, or anyone working in the same project, can use them when creating a migration plan in the <emphasis role="strong">Plan creation wizard</emphasis>. When you choose one of these unowned maps for a migration plan, MTV creates a copy of the map and defines your migration plan as the <emphasis>owner of that copy</emphasis>. Any changes you make to the copy do not affect the original map, nor do they apply to any other plan that uses a copy of the map. Both types of network maps for a project are shown in the <emphasis role="strong">Network maps</emphasis> page, but there is an important difference in the information displayed in the <emphasis role="strong">Owner</emphasis> column of that page for each:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Network maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console are shown as having no owner.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Network maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis> are shown as being owned by the migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<section xml:id="creating-yaml-based-network-maps-ui_ova">
				<title>Creating ownerless network maps in the MTV UI</title>
				<simpara role="_abstract">
					You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Network maps</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Create NetworkMap</emphasis>.
						</simpara>
						<simpara>
							The <emphasis role="strong">Create NetworkMap</emphasis> page opens.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							If you enter YAML definitions, use the following:
						</simpara>
					</listitem>
				</orderedlist>
				
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <co xml:id="CO12-1"></co>
      source:
        id: &lt;source_network_id&gt; <co xml:id="CO12-2"></co>
    - destination:
        name: &lt;network_attachment_definition&gt; <co xml:id="CO12-3"></co>
        namespace: &lt;network_attachment_definition_namespace&gt; <co xml:id="CO12-4"></co>
        type: multus
      source:
        id: &lt;source_network_id&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
				<calloutlist>
					<callout arearefs="CO12-1">
						<para>
							Allowed values are <literal>pod</literal> and <literal>multus</literal>.
						</para>
					</callout>
					<callout arearefs="CO12-2">
						<para>
							Specify the OVA network Universal Unique ID (UUID).
						</para>
					</callout>
					<callout arearefs="CO12-3">
						<para>
							Specify a network attachment definition for each additional OpenShift Virtualization network.
						</para>
					</callout>
					<callout arearefs="CO12-4">
						<para>
							Required only when <literal>type</literal> is <literal>multus</literal>. Specify the namespace of the OpenShift Virtualization network attachment definition.
						</para>
					</callout>
				</calloutlist>
				<orderedlist numeration="arabic" startingnumber="5">
					<listitem>
						<simpara>
							Optional: To download your input, click <emphasis role="strong">Download</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Create</emphasis>.
						</simpara>
						<simpara>
							Your map appears in the list of network maps.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
		</section>
		<section xml:id="about-storage-maps_ova">
			<title>About storage maps in migration plans</title>
			<simpara role="_abstract">
				You can create storage maps in Migration Toolkit for Virtualization (MTV) migration plans to map source disk storages to OpenShift Virtualization storage classes.
			</simpara>
			<simpara>
				There are two types of storage maps: maps created for a specific migration plan and maps created for use by any migration plan.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Maps created for a specific plan are said to be <emphasis>owned</emphasis> by that plan. You can create these kinds of maps in the <emphasis role="strong">Storage maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created for use by any migration plan are to said to be <emphasis>ownerless</emphasis>. You can create these kinds of maps in the <emphasis role="strong">Storage maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console.
					</simpara>
					<simpara>
						You, or anyone working in the same project, can use them when creating a migration plan in the <emphasis role="strong">Plan creation wizard</emphasis>. When you choose one of these unowned maps for a migration plan, MTV creates a copy of the map and defines your migration plan as the <emphasis>owner of that copy</emphasis>. Any changes you make to the copy do not affect the original map, nor do they apply to any other plan that uses a copy of the map. Both types of storage maps for a project are shown in the <emphasis role="strong">Storage maps</emphasis> page, but there is an important difference in the information displayed in the <emphasis role="strong">Owner</emphasis> column of that page for each:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Storage maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console are shown as having no owner.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Storage maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis> are shown as being owned by the migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<section xml:id="creating-ownerless-storage-maps-ui_ova">
				<title>Creating ownerless storage maps in the MTV UI</title>
				<simpara role="_abstract">
					You can create ownerless storage maps by using the MTV UI to map source disk storages to OpenShift Virtualization storage classes.
				</simpara>
				<simpara>
					You can create this type of map by using one of the following methods:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							<emphasis role="strong">Create with form</emphasis>, selecting items such as a source provider from lists.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<emphasis role="strong">Create with YAML</emphasis>, either by entering YAML or JSON definitions or by attaching files containing the same.
						</simpara>
					</listitem>
				</itemizedlist>
				<section xml:id="creating-form-based-storage-maps-ui-ova_ova">
					<title>Creating ownerless storage maps using the form page of the MTV UI</title>
					<simpara role="_abstract">
						You can create ownerless storage maps by using the form page of the MTV UI.
					</simpara>
					<itemizedlist>
						<title>Prerequisites</title>
						<listitem>
							<simpara>
								Have an Open Virtual Appliance (OVA) source provider and a OpenShift Virtualization destination provider. For more information, see <link linkend="adding-source-provider_ova">Adding an Open Virtual Appliance (OVA) source provider</link> or <link linkend="adding-source-provider_dest_cnv">Adding an OpenShift Virtualization destination provider</link>.
							</simpara>
						</listitem>
					</itemizedlist>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Storage maps</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create storage map</emphasis> &gt; <emphasis role="strong">Create with form</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Specify the following:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Map name</emphasis>: Name of the storage map.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Project</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Source provider</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target provider</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Source storage</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target storage</emphasis>: Select from the list
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								Optional: Click <emphasis role="strong">Add mapping</emphasis> to create additional storage maps, including mapping multiple storage sources to a single target storage class.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create</emphasis>.
							</simpara>
							<simpara>
								Your map appears in the list of storage maps.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
				<section xml:id="creating-yaml-based-stoarge-maps-ui_ova">
					<title>Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</title>
					<simpara role="_abstract">
						You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Storage maps</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create storage map</emphasis> &gt; <emphasis role="strong">Create with YAML</emphasis>.
							</simpara>
							<simpara>
								The <emphasis role="strong">Create StorageMap</emphasis> page opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If you enter YAML definitions, use the following:
							</simpara>
						</listitem>
					</orderedlist>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <co xml:id="CO13-1"></co>
      source:
        name:  Dummy storage for source provider &lt;provider_name&gt; <co xml:id="CO13-2"></co>
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO13-1">
							<para>
								Allowed values are <literal>ReadWriteOnce</literal> and <literal>ReadWriteMany</literal>.
							</para>
						</callout>
						<callout arearefs="CO13-2">
							<para>
								For OVA, the <literal>StorageMap</literal> can map only a single storage, which all the disks from the OVA are associated with, to a storage class at the destination. For this reason, the storage is referred to in the UI as "Dummy storage for source provider &lt;provider_name&gt;". In the YAML, write the phrase as it appears above, without the quotation marks and replacing &lt;provider_name&gt; with the actual name of the provider.
							</para>
						</callout>
					</calloutlist>
					<orderedlist numeration="arabic" startingnumber="5">
						<listitem>
							<simpara>
								Optional: To download your input, click <emphasis role="strong">Download</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create</emphasis>.
							</simpara>
							<simpara>
								Your map appears in the list of storage maps.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
			</section>
		</section>
		<section xml:id="canceling-migration-ui_ova">
			<title>Canceling a migration</title>
			<simpara role="_abstract">
				You can cancel the migration of some or all virtual machines (VMs) while a migration plan is in progress by using the Red Hat OpenShift web console.
			</simpara>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Plans for virtualization</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the name of a running migration plan to view the migration details.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Select one or more VMs and click <emphasis role="strong">Cancel</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Yes, cancel</emphasis> to confirm the cancellation.
					</simpara>
					<simpara>
						In the <emphasis role="strong">Migration details by VM</emphasis> list, the status of the canceled VMs is <emphasis role="strong">Canceled</emphasis>. The unmigrated and the migrated virtual machines are not affected.
					</simpara>
				</listitem>
			</orderedlist>
			<simpara>
				You can restart a canceled migration by clicking <emphasis role="strong">Restart</emphasis> beside the migration plan on the <emphasis role="strong">Migration plans</emphasis> page.
			</simpara>
		</section>
	</chapter>
	<chapter xml:id="migrating-virt_cnv">
		<title>Migrating virtual machines from OpenShift Virtualization</title>
		<section xml:id="adding-source-provider_cnv">
			<title>Adding a Red Hat OpenShift Virtualization source provider</title>
			<simpara role="_abstract">
				You can use a Red Hat OpenShift Virtualization provider as both a source provider and a destination provider.
			</simpara>
			<simpara>
				Specifically, the host cluster that is automatically added as a OpenShift Virtualization provider can be used as both a source provider and a destination provider.
			</simpara>
			<simpara>
				You can migrate VMs from the cluster that MTV is deployed on to another cluster, or from a remote cluster to the cluster that MTV is deployed on.
			</simpara>
			<note>
				<simpara>
					The Red Hat OpenShift cluster version of the source provider must be 4.16 or later.
				</simpara>
			</note>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Access the <emphasis role="strong">Create provider</emphasis> interface OpenShift Virtualization by doing one of the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Providers</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										Click <emphasis role="strong">Create Provider</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Click <emphasis role="strong">OpenShift Virtualization</emphasis>.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Overview</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										In the <emphasis role="strong">Welcome</emphasis> pane, click <emphasis role="strong">OpenShift Virtualization</emphasis>.
									</simpara>
									<simpara>
										If the <emphasis role="strong">Welcome</emphasis> pane is not visible, click <emphasis role="strong">Show the welcome card</emphasis> in the upper-right corner of the page, and click <emphasis role="strong">OpenShift Virtualization</emphasis> when the <emphasis role="strong">Welcome</emphasis> pane opens.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Provider resource name</emphasis>: Name of the source provider
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">URL</emphasis>: URL of the endpoint of the API server
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Service account bearer token</emphasis>: Token for a service account with <literal>cluster-admin</literal> privileges
							</simpara>
							<simpara>
								If both <emphasis role="strong">URL</emphasis> and <emphasis role="strong">Service account bearer token</emphasis> are left blank, the local OpenShift cluster is used.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Choose one of the following options for validating CA certificates:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use a custom CA certificate</emphasis>: Migrate after validating a custom CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use the system CA certificate</emphasis>: Migrate after validating the system CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Skip certificate validation</emphasis> : Migrate without validating a CA certificate.
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										To use a custom CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to left, and <emphasis>either</emphasis> drag the CA certificate to the text box <emphasis>or</emphasis> browse for it and click <emphasis role="strong">Select</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To use the system CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to the left, and leave the <emphasis role="strong">CA certificate</emphasis> text box empty.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To skip certificate validation, toggle the <emphasis role="strong">Skip certificate validation</emphasis> switch to the right.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click <emphasis role="strong">Fetch certificate from URL</emphasis>. The <emphasis role="strong">Verify certificate</emphasis> window opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If the details are correct, select the <emphasis role="strong">I trust the authenticity of this certificate</emphasis> checkbox, and then, click <emphasis role="strong">Confirm</emphasis>. If not, click <emphasis role="strong">Cancel</emphasis>, and then, enter the correct certificate information manually.
							</simpara>
							<simpara>
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create provider</emphasis> to add and save the provider.
					</simpara>
					<simpara>
						The provider appears in the list of providers.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Optional: Add access to the UI of the provider:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								On the <emphasis role="strong">Providers</emphasis> page, click the provider.
							</simpara>
							<simpara>
								The <emphasis role="strong">Provider details</emphasis> page opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the <emphasis role="strong">Edit</emphasis> icon under <emphasis role="strong">External UI web link</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Enter the link and click <emphasis role="strong">Save</emphasis>.
							</simpara>
							<note>
								<simpara>
									If you do not enter a link, MTV attempts to calculate the correct link.
								</simpara>
								<itemizedlist>
									<listitem>
										<simpara>
											If MTV succeeds, the hyperlink of the field points to the calculated link.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											If MTV does not succeed, the field remains empty.
										</simpara>
									</listitem>
								</itemizedlist>
							</note>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="adding-source-provider_dest_cnv">
			<title>Adding an OpenShift Virtualization destination provider</title>
			<simpara role="_abstract">
				You can use a Red Hat OpenShift Virtualization provider as both a source provider and a destination provider.
			</simpara>
			<simpara>
				Specifically, the host cluster that is automatically added as a OpenShift Virtualization provider can be used as both a source provider and a destination provider.
			</simpara>
			<simpara>
				You can also add another OpenShift Virtualization destination provider to the Red Hat OpenShift web console in addition to the default OpenShift Virtualization destination provider, which is the cluster where you installed MTV.
			</simpara>
			<simpara>
				You can migrate VMs from the cluster that MTV is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						You must have an OpenShift Virtualization <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/authentication_and_authorization/using-service-accounts">service account token</link> with <literal>cluster-admin</literal> privileges.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Access the <emphasis role="strong">Create OpenShift Virtualization provider</emphasis> interface by doing one of the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Providers</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										Click <emphasis role="strong">Create Provider</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Click <emphasis role="strong">OpenShift Virtualization</emphasis>.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								If you have Administrator privileges, in the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization &gt; Overview</emphasis>.
							</simpara>
							<orderedlist numeration="lowerroman">
								<listitem>
									<simpara>
										In the <emphasis role="strong">Welcome</emphasis> pane, click <emphasis role="strong">OpenShift Virtualization</emphasis>.
									</simpara>
									<simpara>
										If the <emphasis role="strong">Welcome</emphasis> pane is not visible, click <emphasis role="strong">Show the welcome card</emphasis> in the upper-right corner of the page, and click <emphasis role="strong">OpenShift Virtualization</emphasis> when the <emphasis role="strong">Welcome</emphasis> pane opens.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										Select a <emphasis role="strong">Project</emphasis> from the list. The default project shown depends on the active project of MTV.
									</simpara>
									<simpara>
										If the active project is <emphasis role="strong">All projects</emphasis>, then the default project is <literal>openshift-mtv</literal>. Otherwise, the default project is the same as the active project.
									</simpara>
									<simpara>
										If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Provider resource name</emphasis>: Name of the source provider
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">URL</emphasis>: URL of the endpoint of the API server
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Service account bearer token</emphasis>: Token for a service account with <literal>cluster-admin</literal> privileges
							</simpara>
							<simpara>
								If both <emphasis role="strong">URL</emphasis> and <emphasis role="strong">Service account bearer token</emphasis> are left blank, the local OpenShift cluster is used.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Choose one of the following options for validating CA certificates:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use a custom CA certificate</emphasis>: Migrate after validating a custom CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use the system CA certificate</emphasis>: Migrate after validating the system CA certificate.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Skip certificate validation</emphasis> : Migrate without validating a CA certificate.
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										To use a custom CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to left, and <emphasis>either</emphasis> drag the CA certificate to the text box <emphasis>or</emphasis> browse for it and click <emphasis role="strong">Select</emphasis>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To use the system CA certificate, leave the <emphasis role="strong">Skip certificate validation</emphasis> switch toggled to the left, and leave the <emphasis role="strong">CA certificate</emphasis> text box empty.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										To skip certificate validation, toggle the <emphasis role="strong">Skip certificate validation</emphasis> switch to the right.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Ask MTV to fetch a custom CA certificate from the provider’s API endpoint URL.
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click <emphasis role="strong">Fetch certificate from URL</emphasis>. The <emphasis role="strong">Verify certificate</emphasis> window opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If the details are correct, select the <emphasis role="strong">I trust the authenticity of this certificate</emphasis> checkbox, and then, click <emphasis role="strong">Confirm</emphasis>. If not, click <emphasis role="strong">Cancel</emphasis>, and then, enter the correct certificate information manually.
							</simpara>
							<simpara>
								Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create provider</emphasis> to add and save the provider.
					</simpara>
					<simpara>
						The provider appears in the list of providers.
					</simpara>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="selecting-migration-network-for-virt-provider_dest_cnv">
			<title>Selecting a migration network for an OpenShift Virtualization provider</title>
			<simpara role="_abstract">
				You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.
			</simpara>
			<simpara>
				After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.
			</simpara>
			<simpara>
				If you do not select a migration network, the default migration network is the <literal>pod</literal> network, which might not be optimal for disk transfer.
			</simpara>
			<note>
				<simpara>
					You can override the default migration network of the provider by selecting a different network when you create a migration plan.
				</simpara>
			</note>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration</emphasis> &gt; <emphasis role="strong">Providers for virtualization</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the OpenShift Virtualization provider whose migration network you want to change.
					</simpara>
					<simpara>
						When the <emphasis role="strong">Providers detail</emphasis> page opens:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the <emphasis role="strong">Networks</emphasis> tab.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Set default transfer network</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Select a default transfer network from the list and click <emphasis role="strong">Save</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Configure a gateway in the network used for MTV migrations by completing the following steps:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Networking</emphasis> &gt; <emphasis role="strong">NetworkAttachmentDefinitions</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Select the appropriate default transfer network NAD.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the <emphasis role="strong">YAML</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Add <literal>forklift.konveyor.io/route</literal> to the metadata:annotations section of the YAML, as in the following example:
							</simpara>
							
<programlisting language="yaml" linenumbering="unnumbered">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt; <co xml:id="CO14-1"></co></programlisting>
							<calloutlist>
								<callout arearefs="CO14-1">
									<para>
										The <literal>NetworkAttachmentDefinition</literal> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.
									</para>
								</callout>
							</calloutlist>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Save</emphasis>.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="creating-plan-wizard-290-cnv_cnv">
			<title>Creating an OpenShift Virtualization migration plan by using the MTV wizard</title>
			<simpara role="_abstract">
				You can migrate OpenShift Virtualization virtual machines (VMs) by using the Migration Toolkit for Virtualization plan creation wizard.
			</simpara>
			<simpara>
				The wizard is designed to lead you step-by-step in creating a migration plan.
			</simpara>
			<warning>
				<simpara>
					Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.
				</simpara>
				<simpara>
					This prevents concurrent disk access to the storage the guest points to.
				</simpara>
			</warning>
			<important>
				<simpara>
					A plan cannot contain more than 500 VMs or 500 disks.
				</simpara>
			</important>
			<important>
				<simpara>
					When you click <emphasis role="strong">Create plan</emphasis> on the <emphasis role="strong">Review and create</emphasis> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <emphasis role="strong">Plan details</emphasis> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.
				</simpara>
			</important>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						Have an OpenShift Virtualization source provider and an OpenShift Virtualization destination provider. For more information, see <link linkend="adding-source-provider_cnv">Adding an OpenShift Virtualization source provider</link> or <link linkend="adding-source-provider_dest_cnv">Adding an OpenShift Virtualization destination provider</link>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If you plan to create a <emphasis role="strong">Network map</emphasis> or a <emphasis role="strong">Storage map</emphasis> that will be used by more than one migration plan, create it in the <emphasis role="strong">Network maps</emphasis> or <emphasis role="strong">Storage maps</emphasis> page of the UI before you create a migration plan that uses that map.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Migration plans</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Create plan</emphasis>.
					</simpara>
					<simpara>
						The <emphasis role="strong">Create migration plan</emphasis> wizard opens.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">General</emphasis> page, specify the following fields:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Plan name</emphasis>: Enter a name.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Plan project</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Source provider</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Target provider</emphasis>: Select from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Target project</emphasis>: Select from the list.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Virtual machines</emphasis> page, select the virtual machines you want to migrate and click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Network map</emphasis> page, choose one of the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use an existing network map</emphasis>: Select an existing network map from the list.
							</simpara>
							<simpara>
								These are network maps available for all plans, and therefore, they are <emphasis>ownerless</emphasis> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <emphasis>owner</emphasis> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</simpara>
							<note>
								<simpara>
									If you choose an existing map, be sure it has the same source provider and target provider as the ones you want to use in your plan.
								</simpara>
							</note>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use a new network map</emphasis>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which will then be considered to be its owner. Maps that you create using this option are not available in the <emphasis role="strong">Use an existing network map</emphasis> option because each is created with an owner.
							</simpara>
							<note>
								<simpara>
									You can create an ownerless network map, which you and others can use for additional migration plans, in the <emphasis role="strong">Network Maps</emphasis> section of the UI.
								</simpara>
							</note>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Source network</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target network</emphasis>: Select from the list.
									</simpara>
									<simpara>
										If needed, click <emphasis role="strong">Add mapping</emphasis> to add another mapping.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Network map name</emphasis>: Enter a name or let MTV automatically generate a name for the network map.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Storage map</emphasis> page, choose one of the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Use an existing storage map</emphasis>: Select an existing storage map from the list.
							</simpara>
							<simpara>
								These are storage maps available for all plans, and therefore, they are <emphasis>ownerless</emphasis> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <emphasis>owner</emphasis> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.
							</simpara>
							<note>
								<simpara>
									If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.
								</simpara>
							</note>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Use new storage map</emphasis>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. For each map, specify the following. Maps that you create using this option are not available in the <emphasis role="strong">Use an existing storage map</emphasis> option because each is created with an owner.
							</simpara>
							<note>
								<simpara>
									You can create an ownerless storage map, which you and others can use for additional migration plans, in the <emphasis role="strong">Storage Maps</emphasis> section of the UI.
								</simpara>
							</note>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Source storage</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target storage</emphasis>: Select from the list.
									</simpara>
									<simpara>
										If needed, click <emphasis role="strong">Add mapping</emphasis> to add another mapping.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Storage map name</emphasis>: Enter a name or let MTV automatically generate a name for the storage map.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Other settings (optional)</emphasis> page, you have the option to change the <emphasis role="strong">Transfer network</emphasis> of your migration plan.
					</simpara>
					<simpara>
						The transfer network is the network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Verify that the transfer network is in the selected target project.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To choose a different transfer network, select a different transfer network from the list.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Optional: To configure another OpenShift network in the OpenShift web console, click <emphasis role="strong">Networking &gt; NetworkAttachmentDefinitions</emphasis>.
							</simpara>
							<simpara>
								To learn more about the different types of networks OpenShift supports, see <link xlink:href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</link>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <link linkend="selecting-migration-network-for-vmware-source-provider_vmware">Selecting a migration network for a VMware source provider</link>.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Hooks (optional)</emphasis> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						To add a hook, select the appropriate <emphasis role="strong">Enable hook</emphasis> checkbox.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Enter the <emphasis role="strong">Hook runner image</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Enter the <emphasis role="strong">Ansible playbook</emphasis> of the hook in the window.
					</simpara>
					<note>
						<simpara>
							You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.
						</simpara>
					</note>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Next</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the <emphasis role="strong">Review and Create</emphasis> page, review the information displayed.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Edit any item by doing the following:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click its <emphasis role="strong">Edit step</emphasis> link.
							</simpara>
							<simpara>
								The wizard opens to the page on which you defined the item.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit the item.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Either click <emphasis role="strong">Next</emphasis> to advance to the next page of the wizard, or click <emphasis role="strong">Skip to review</emphasis> to return directly to the <emphasis role="strong">Review and create</emphasis> page.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem>
					<simpara>
						When you finish reviewing the details of the plan, click <emphasis role="strong">Create plan</emphasis>. MTV validates your plan.
					</simpara>
					<simpara>
						When your plan is validated, the <emphasis role="strong">Plan details</emphasis> page for your plan opens in the <emphasis role="strong">Details</emphasis> tab.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						In addition to listing details based on your entries in the wizard, the <emphasis role="strong">Plan details</emphasis> tab includes the following two sections after the details of the plan:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Migration history</emphasis>: Details about successful and unsuccessful attempts to run the plan
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Conditions</emphasis>: Any changes that need to be made to the plan so that it can run successfully
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						When you have fixed all conditions listed, you can run your plan from the <emphasis role="strong">Plans</emphasis> page.
					</simpara>
					<simpara>
						The <emphasis role="strong">Plan details</emphasis> page also includes five additional tabs, which are described in the table that follows:
					</simpara>
					<table colsep="1" frame="all" rowsep="1">
						<title>Tabs of the Plan details page</title>
						<tgroup cols="5">
							<colspec colname="col_1" colwidth="20*"></colspec>
							<colspec colname="col_2" colwidth="20*"></colspec>
							<colspec colname="col_3" colwidth="20*"></colspec>
							<colspec colname="col_4" colwidth="20*"></colspec>
							<colspec colname="col_5" colwidth="20*"></colspec>
							<thead>
								<row>
									<entry align="left" valign="top">YAML</entry>
									<entry align="left" valign="top">Virtual Machines</entry>
									<entry align="left" valign="top">Resources</entry>
									<entry align="left" valign="top">Mappings</entry>
									<entry align="left" valign="top">Hooks</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Editable YAML <literal>Plan</literal> manifest based on your plan’s details including source provider, network and storage maps, VMs, and any issues with your VMs
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										The VMs the plan migrates
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Editable specification of the network and storage maps used by your plan
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										Updatable specification of the hooks used by your plan, if any
									</simpara>
									</entry>
								</row>
							</tbody>
						</tgroup>
					</table>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="running-migration-plan_cnv">
			<title>Running a migration plan</title>
			<simpara role="_abstract">
				You can run a migration plan and view its progress in the Red Hat OpenShift web console.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						Valid migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration</emphasis> &gt; <emphasis role="strong">Plans for virtualization</emphasis>.
					</simpara>
					<simpara>
						The <emphasis role="strong">Plans</emphasis> list displays the source and target providers, the number of virtual machines (VMs) being migrated, the status, the date that the migration started, and the description of each plan.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Start</emphasis> beside a migration plan to start the migration.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Start</emphasis> in the confirmation window that opens.
					</simpara>
					<simpara>
						The plan’s <emphasis role="strong">Status</emphasis> changes to <emphasis role="strong">Running</emphasis>, and the migration’s progress is displayed.
					</simpara>
					<warning>
						<simpara>
							Do not take a snapshot of a VM after you start a migration. Taking a snaphot after a migration starts might cause the migration to fail.
						</simpara>
					</warning>
				</listitem>
				<listitem>
					<simpara>
						Optional: Click the links in the migration’s <emphasis role="strong">Status</emphasis> to see its overall status and the status of each VM:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								The link on the left indicates whether the migration failed, succeeded, or is ongoing. It also reports the number of VMs whose migration succeeded, failed, or was canceled.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The link on the right opens the <emphasis role="strong">Virtual Machines</emphasis> tab of the <emphasis role="strong">Plan Details</emphasis> page. For each VM, the tab displays the following data:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										The name of the VM
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The start and end times of the migration
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										The amount of data copied
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										A progress pipeline for the VM’s migration
									</simpara>
									<warning>
										<simpara>
											vMotion, including svMotion, and relocation must be disabled for VMs that are being imported to avoid data corruption.
										</simpara>
									</warning>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: To view your migration’s logs, either as it is running or after it is completed, perform the following actions:
					</simpara>
					<orderedlist numeration="loweralpha">
						<listitem>
							<simpara>
								Click the <emphasis role="strong">Virtual Machines</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click the arrow (<emphasis role="strong">&gt;</emphasis>) to the left of the virtual machine whose migration progress you want to check.
							</simpara>
							<simpara>
								The VM’s details are displayed.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								In the <emphasis role="strong">Pods</emphasis> section, in the <emphasis role="strong">Pod links</emphasis> column, click the <emphasis role="strong">Logs</emphasis> link.
							</simpara>
							<simpara>
								The <emphasis role="strong">Logs</emphasis> tab opens.
							</simpara>
							<note>
								<simpara>
									Logs are not always available. The following are common reasons for logs not being available:
								</simpara>
								<itemizedlist>
									<listitem>
										<simpara>
											The migration is from OpenShift Virtualization to OpenShift Virtualization. In this case, <literal>virt-v2v</literal> is not involved, so no pod is required.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											No pod was created.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											The pod was deleted.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											The migration failed before running the pod.
										</simpara>
									</listitem>
								</itemizedlist>
							</note>
						</listitem>
						<listitem>
							<simpara>
								To see the raw logs, click the <emphasis role="strong">Raw</emphasis> link.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								To download the logs, click the <emphasis role="strong">Download</emphasis> link.
							</simpara>
						</listitem>
					</orderedlist>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="migration-plan-options-ui_cnv">
			<title>Migration plan options</title>
			<simpara role="_abstract">
				On the <emphasis role="strong">Plans for virtualization</emphasis> page of the Red Hat OpenShift web console, you can click the Options menu 
				<inlinemediaobject>
					<imageobject>
						<imagedata contentdepth="20" fileref="images/modules/images/kebab.png" format="PNG" />
					</imageobject>
					<textobject>
						<phrase>kebab</phrase>
					</textobject>
				</inlinemediaobject>
				 beside a migration plan to access the following options:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						<emphasis role="strong">Edit Plan</emphasis>: Edit the details of a migration plan. If the plan is running or has completed successfully, you cannot edit the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								All properties on the <emphasis role="strong">Settings</emphasis> section of the <emphasis role="strong">Plan details</emphasis> page. For example, warm or cold migration, target namespace, and preserved static IPs.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The plan’s mapping on the <emphasis role="strong">Mappings</emphasis> tab.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								The hooks listed on the <emphasis role="strong">Hooks</emphasis> tab.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Start migration</emphasis>: Active only if relevant.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Restart migration</emphasis>: Restart a migration that was interrupted. Before choosing this option, make sure there are no error messages. If there are, you need to edit the plan.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Cutover</emphasis>: Warm migrations only. Active only if relevant. Clicking <emphasis role="strong">Cutover</emphasis> opens the <emphasis role="strong">Cutover</emphasis> window, which supports the following options:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<emphasis role="strong">Set cutover</emphasis>: Set the date and time for a cutover.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<emphasis role="strong">Remove cutover</emphasis>: Cancel a scheduled cutover. Active only if relevant.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Duplicate Plan</emphasis>: Create a new migration plan with the same virtual machines (VMs), parameters, mappings, and hooks as an existing plan. You can use this feature for the following tasks:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Migrate VMs to a different namespace.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit an archived migration plan.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Edit a migration plan with a different status, for example, failed, canceled, running, critical, or ready.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Archive Plan</emphasis>: Delete the logs, history, and metadata of a migration plan. The plan cannot be edited or restarted. It can only be viewed, duplicated, or deleted.
					</simpara>
					<note>
						<simpara>
							<emphasis role="strong">Archive Plan</emphasis> is irreversible. However, you can duplicate an archived plan.
						</simpara>
					</note>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Delete Plan</emphasis>: Permanently remove a migration plan. You cannot delete a running migration plan.
					</simpara>
					<note>
						<simpara>
							<emphasis role="strong">Delete Plan</emphasis> is irreversible.
						</simpara>
						<simpara>
							Deleting a migration plan does not remove temporary resources. To remove temporary resources, archive the plan first before deleting it.
						</simpara>
					</note>
					<note>
						<simpara>
							The results of archiving and then deleting a migration plan vary by whether you created the plan and its storage and network mappings using the CLI or the UI.
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									If you created them using the UI, then the migration plan and its mappings no longer appear in the UI.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									If you created them using the CLI, then the mappings might still appear in the UI. This is because mappings in the CLI can be used by more than one migration plan, but mappings created in the UI can only be used in one migration plan.
								</simpara>
							</listitem>
						</itemizedlist>
					</note>
				</listitem>
			</itemizedlist>
		</section>
		<section xml:id="about-network-maps_cnv">
			<title>About network maps in migration plans</title>
			<simpara role="_abstract">
				You can create network maps in Migration Toolkit for Virtualization (MTV) migration plans to map source networks to OpenShift Virtualization networks.
			</simpara>
			<simpara>
				There are two types of network maps: maps created for a specific migration plan and maps created for use by any migration plan.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Maps created for a specific plan are said to be <emphasis>owned</emphasis> by that plan. You can create these kinds of maps in the <emphasis role="strong">Network maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created for use by any migration plan are to said to be <emphasis>ownerless</emphasis>. You can create these kinds of maps in the <emphasis role="strong">Network maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console.
					</simpara>
					<simpara>
						You, or anyone working in the same project, can use them when creating a migration plan in the <emphasis role="strong">Plan creation wizard</emphasis>. When you choose one of these unowned maps for a migration plan, MTV creates a copy of the map and defines your migration plan as the <emphasis>owner of that copy</emphasis>. Any changes you make to the copy do not affect the original map, nor do they apply to any other plan that uses a copy of the map. Both types of network maps for a project are shown in the <emphasis role="strong">Network maps</emphasis> page, but there is an important difference in the information displayed in the <emphasis role="strong">Owner</emphasis> column of that page for each:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Network maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console are shown as having no owner.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Network maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis> are shown as being owned by the migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<section xml:id="creating-yaml-based-network-maps-ui_cnv">
				<title>Creating ownerless network maps in the MTV UI</title>
				<simpara role="_abstract">
					You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Network maps</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Create NetworkMap</emphasis>.
						</simpara>
						<simpara>
							The <emphasis role="strong">Create NetworkMap</emphasis> page opens.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							If you enter YAML definitions, use the following:
						</simpara>
					</listitem>
				</orderedlist>
				
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <co xml:id="CO15-1"></co>
      source:
        name: &lt;network_name&gt;
        type: pod
    - destination:
        name: &lt;network_attachment_definition&gt; <co xml:id="CO15-2"></co>
        namespace: &lt;network_attachment_definition_namespace&gt; <co xml:id="CO15-3"></co>
        type: multus
      source:
        name: &lt;network_attachment_definition&gt;
        namespace: &lt;network_attachment_definition_namespace&gt;
        type: multus
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
				<calloutlist>
					<callout arearefs="CO15-1">
						<para>
							Allowed values are <literal>pod</literal> and <literal>multus</literal>.
						</para>
					</callout>
					<callout arearefs="CO15-2">
						<para>
							Specify a network attachment definition for each additional OpenShift Virtualization network. Specify the <literal>namespace</literal> either by using the <literal>namespace property</literal> or with a name built as follows: <literal>&lt;network_namespace&gt;/&lt;network_name&gt;</literal>.
						</para>
					</callout>
					<callout arearefs="CO15-3">
						<para>
							Required only when <literal>type</literal> is <literal>multus</literal>. Specify the namespace of the OpenShift Virtualization network attachment definition.
						</para>
					</callout>
				</calloutlist>
				<orderedlist numeration="arabic" startingnumber="5">
					<listitem>
						<simpara>
							Optional: To download your input, click <emphasis role="strong">Download</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Create</emphasis>.
						</simpara>
						<simpara>
							Your map appears in the list of network maps.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
		</section>
		<section xml:id="about-storage-maps_cnv">
			<title>About storage maps in migration plans</title>
			<simpara role="_abstract">
				You can create storage maps in Migration Toolkit for Virtualization (MTV) migration plans to map source disk storages to OpenShift Virtualization storage classes.
			</simpara>
			<simpara>
				There are two types of storage maps: maps created for a specific migration plan and maps created for use by any migration plan.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Maps created for a specific plan are said to be <emphasis>owned</emphasis> by that plan. You can create these kinds of maps in the <emphasis role="strong">Storage maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created for use by any migration plan are to said to be <emphasis>ownerless</emphasis>. You can create these kinds of maps in the <emphasis role="strong">Storage maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console.
					</simpara>
					<simpara>
						You, or anyone working in the same project, can use them when creating a migration plan in the <emphasis role="strong">Plan creation wizard</emphasis>. When you choose one of these unowned maps for a migration plan, MTV creates a copy of the map and defines your migration plan as the <emphasis>owner of that copy</emphasis>. Any changes you make to the copy do not affect the original map, nor do they apply to any other plan that uses a copy of the map. Both types of storage maps for a project are shown in the <emphasis role="strong">Storage maps</emphasis> page, but there is an important difference in the information displayed in the <emphasis role="strong">Owner</emphasis> column of that page for each:
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Storage maps</emphasis> page of the <emphasis role="strong">Migration for Virtualization</emphasis> section of the OpenShift Virtualization web console are shown as having no owner.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maps created in the <emphasis role="strong">Storage maps</emphasis> step of the <emphasis role="strong">Plan creation wizard</emphasis> are shown as being owned by the migration plan.
					</simpara>
				</listitem>
			</itemizedlist>
			<section xml:id="creating-ownerless-storage-maps-ui_cnv">
				<title>Creating ownerless storage maps in the MTV UI</title>
				<simpara role="_abstract">
					You can create ownerless storage maps by using the MTV UI to map source disk storages to OpenShift Virtualization storage classes.
				</simpara>
				<simpara>
					You can create this type of map by using one of the following methods:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							<emphasis role="strong">Create with form</emphasis>, selecting items such as a source provider from lists.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<emphasis role="strong">Create with YAML</emphasis>, either by entering YAML or JSON definitions or by attaching files containing the same.
						</simpara>
					</listitem>
				</itemizedlist>
				<section xml:id="creating-form-based-storage-maps-ui-cnv_cnv">
					<title>Creating ownerless storage maps using the form page of the MTV UI</title>
					<simpara role="_abstract">
						You can create ownerless storage maps by using the form page of the MTV UI.
					</simpara>
					<itemizedlist>
						<title>Prerequisites</title>
						<listitem>
							<simpara>
								Have a OpenShift Virtualization source provider and a OpenShift Virtualization destination provider. For more information, see <link linkend="adding-source-provider_cnv">Adding an OpenShift Virtualization source provider</link> or <link linkend="adding-source-provider_dest_cnv">Adding an OpenShift Virtualization destination provider</link>.
							</simpara>
						</listitem>
					</itemizedlist>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Storage maps</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create storage map</emphasis> &gt; <emphasis role="strong">Create with form</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Specify the following:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<emphasis role="strong">Map name</emphasis>: Name of the storage map.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Project</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Source provider</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target provider</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Source storage</emphasis>: Select from the list.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<emphasis role="strong">Target storage</emphasis>: Select from the list
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								Optional: Click <emphasis role="strong">Add mapping</emphasis> to create additional storage maps, including mapping multiple storage sources to a single target storage class.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create</emphasis>.
							</simpara>
							<simpara>
								Your map appears in the list of storage maps.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
				<section xml:id="creating-yaml-based-stoarge-maps-ui_cnv">
					<title>Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</title>
					<simpara role="_abstract">
						You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								In the Red Hat OpenShift web console, click <emphasis role="strong">Migration for Virtualization</emphasis> &gt; <emphasis role="strong">Storage maps</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create storage map</emphasis> &gt; <emphasis role="strong">Create with YAML</emphasis>.
							</simpara>
							<simpara>
								The <emphasis role="strong">Create StorageMap</emphasis> page opens.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If you enter YAML definitions, use the following:
							</simpara>
						</listitem>
					</orderedlist>
					<simpara>
						<literal>[source,yaml,subs="attributes</literal>"]
					</simpara>
					
<screen>$ cat &lt;&lt; EOF | {oc} apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <co xml:id="CO16-1"></co>
      source:
        name: &lt;storage_class&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</screen>
					<calloutlist>
						<callout arearefs="CO16-1">
							<para>
								Allowed values are <literal>ReadWriteOnce</literal> and <literal>ReadWriteMany</literal>.
							</para>
						</callout>
					</calloutlist>
					<orderedlist numeration="arabic" startingnumber="5">
						<listitem>
							<simpara>
								Optional: To download your input, click <emphasis role="strong">Download</emphasis>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Click <emphasis role="strong">Create</emphasis>.
							</simpara>
							<simpara>
								Your map appears in the list of storage maps.
							</simpara>
						</listitem>
					</orderedlist>
				</section>
			</section>
		</section>
		<section xml:id="canceling-migration-ui_cnv">
			<title>Canceling a migration</title>
			<simpara role="_abstract">
				You can cancel the migration of some or all virtual machines (VMs) while a migration plan is in progress by using the Red Hat OpenShift web console.
			</simpara>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Plans for virtualization</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the name of a running migration plan to view the migration details.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Select one or more VMs and click <emphasis role="strong">Cancel</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Yes, cancel</emphasis> to confirm the cancellation.
					</simpara>
					<simpara>
						In the <emphasis role="strong">Migration details by VM</emphasis> list, the status of the canceled VMs is <emphasis role="strong">Canceled</emphasis>. The unmigrated and the migrated virtual machines are not affected.
					</simpara>
				</listitem>
			</orderedlist>
			<simpara>
				You can restart a canceled migration by clicking <emphasis role="strong">Restart</emphasis> beside the migration plan on the <emphasis role="strong">Migration plans</emphasis> page.
			</simpara>
		</section>
	</chapter>
	<chapter xml:id="migrating-virtual-machines-from-the-command-line_mtv">
		<title>Migrating virtual machines from the command line</title>
		<simpara>
			You migrate virtual machines (VMs) using the command-line interface (CLI) by creating MTV custom resources (CRs). The CRs and the migration procedure vary by source provider.
		</simpara>
		<important>
			<simpara>
				You must specify a name for cluster-scoped CRs.
			</simpara>
			<simpara>
				You must specify both a name and a namespace for namespace-scoped CRs.
			</simpara>
			<simpara>
				To migrate to or from an OpenShift cluster that is different from the one the migration plan is defined on, you must have an OpenShift Virtualization service account token with <literal>cluster-admin</literal> privileges.
			</simpara>
		</important>
		<important>
			<simpara>
				You must ensure that all <link linkend="prerequisites-for-all-providers_mtv">Prerequisites and software requirements for all providers</link> and all <link linkend="prerequisites-per-provider_mtv">Specific software requirements for each provider</link> are met.
			</simpara>
		</important>
		<section xml:id="non-admin-permissions_cli">
			<title>Permissions needed by non-administrators to work with migration plan components</title>
			<simpara role="_abstract">
				If you are an administrator, you can work with all components of migration plans (for example, providers, network mappings, and migration plans).
			</simpara>
			<simpara>
				By default, non-administrators have limited ability to work with migration plans and their components. As an administrator, you can modify their roles to allow them full access to all components, or you can give them limited permissions.
			</simpara>
			<simpara>
				For example, administrators can assign non-administrators one or more of the following cluster roles for migration plans:
			</simpara>
			<table colsep="1" frame="all" rowsep="1">
				<title>Example migration plan roles and their privileges</title>
				<tgroup cols="2">
					<colspec colname="col_1" colwidth="50*"></colspec>
					<colspec colname="col_2" colwidth="50*"></colspec>
					<thead>
						<row>
							<entry align="left" valign="top">Role</entry>
							<entry align="left" valign="top">Description</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>plans.forklift.konveyor.io-v1beta1-view</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Can view migration plans but not to create, delete or modify them
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>plans.forklift.konveyor.io-v1beta1-edit</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Can create, delete or modify (all parts of <literal>edit</literal> permissions) individual migration plans
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>plans.forklift.konveyor.io-v1beta1-admin</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								All <literal>edit</literal> privileges and the ability to delete the entire collection of migration plans
							</simpara>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
			<note>
				<simpara>
					Predefined cluster roles include a resource (for example, <literal>plans</literal>), an API group (for example, <literal>forklift.konveyor.io-v1beta1</literal>) and an action (for example, <literal>view</literal>, <literal>edit</literal>).
				</simpara>
			</note>
			<simpara>
				As a more comprehensive example, you can grant non-administrators the following set of permissions per namespace:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Create and modify storage maps, network maps, and migration plans for the namespaces they have access to
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Attach providers created by administrators to storage maps, network maps, and migration plans
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Not be able to create providers or to change system settings
					</simpara>
				</listitem>
			</itemizedlist>
			<table colsep="1" frame="all" rowsep="1">
				<title>Example permissions required for non-adminstrators to work with migration plan components but not create providers</title>
				<tgroup cols="3">
					<colspec colname="col_1" colwidth="33*"></colspec>
					<colspec colname="col_2" colwidth="33*"></colspec>
					<colspec colname="col_3" colwidth="33*"></colspec>
					<thead>
						<row>
							<entry align="left" valign="top">Actions</entry>
							<entry align="left" valign="top">API group</entry>
							<entry align="left" valign="top">Resource</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>get</literal>, <literal>list</literal>, <literal>watch</literal>, <literal>create</literal>, <literal>update</literal>, <literal>patch</literal>, <literal>delete</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>forklift.konveyor.io</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>plans</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>get</literal>, <literal>list</literal>, <literal>watch</literal>, <literal>create</literal>, <literal>update</literal>, <literal>patch</literal>, <literal>delete</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>forklift.konveyor.io</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>migrations</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>get</literal>, <literal>list</literal>, <literal>watch</literal>, <literal>create</literal>, <literal>update</literal>, <literal>patch</literal>, <literal>delete</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>forklift.konveyor.io</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>hooks</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>get</literal>, <literal>list</literal>, <literal>watch</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>forklift.konveyor.io</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>providers</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>get</literal>, <literal>list</literal>, <literal>watch</literal>, <literal>create</literal>, <literal>update</literal>, <literal>patch</literal>, <literal>delete</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>forklift.konveyor.io</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>networkmaps</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>get</literal>, <literal>list</literal>, <literal>watch</literal>, <literal>create</literal>, <literal>update</literal>, <literal>patch</literal>, <literal>delete</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>forklift.konveyor.io</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>storagemaps</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>get</literal>, <literal>list</literal>, <literal>watch</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>forklift.konveyor.io</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>forkliftcontrollers</literal>
							</simpara>
							</entry>
						</row>
						<row>
							<entry align="left" valign="top">
							<simpara>
								<literal>create</literal>, <literal>patch</literal>, <literal>delete</literal>
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								Empty string
							</simpara>
							</entry>
							<entry align="left" valign="top">
							<simpara>
								<literal>secrets</literal>
							</simpara>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
			<note>
				<simpara>
					Non-administrators need to have the <literal>create</literal> permissions that are part of <literal>edit</literal> roles for network maps and for storage maps to create migration plans, even when using a template for a network map or a storage map.
				</simpara>
			</note>
		</section>
		<section xml:id="new-migrating-virtual-machines-cli_vmware">
			<title>Migrating from a VMware vSphere source provider</title>
			<simpara role="_abstract">
				You can migrate from a VMware vSphere source provider by using the command-line interface (CLI).
			</simpara>
			<important>
				<simpara>
					Anti-virus software can cause migrations to fail. It is strongly recommended to remove such software from source VMs before you start a migration.
				</simpara>
			</important>
			<important>
				<simpara>
					MTV does not support migrating VMware Non-Volatile Memory Express (NVMe) disks.
				</simpara>
			</important>
			<note>
				<simpara>
					To migrate virtual machines (VMs) that have shared disks, see <link linkend="mtv-shared-disks_vmware">Migrating virtual machines with shared disks</link>.
				</simpara>
			</note>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Create a <literal>Secret</literal> manifest for the source provider credentials:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: &lt;secret&gt;
  namespace: &lt;namespace&gt;
  ownerReferences: <co xml:id="CO17-1"></co>
    - apiVersion: forklift.konveyor.io/v1beta1
      kind: Provider
      name: &lt;provider_name&gt;
      uid: &lt;provider_uid&gt;
  labels:
    createdForProviderType: vsphere
    createdForResourceType: providers
type: Opaque
stringData:
  user: &lt;user&gt; <co xml:id="CO17-2"></co>
  password: &lt;password&gt; <co xml:id="CO17-3"></co>
  insecureSkipVerify: &lt;"true"/"false"&gt; <co xml:id="CO17-4"></co>
  cacert: | <co xml:id="CO17-5"></co>
    &lt;ca_certificate&gt;
  url: &lt;api_end_point&gt; <co xml:id="CO17-6"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO17-1">
							<para>
								The <literal>ownerReferences</literal> section is optional.
							</para>
						</callout>
						<callout arearefs="CO17-2">
							<para>
								Specify the vCenter user or the ESX/ESXi user.
							</para>
						</callout>
						<callout arearefs="CO17-3">
							<para>
								Specify the password of the vCenter user or the ESX/ESXi user.
							</para>
						</callout>
						<callout arearefs="CO17-4">
							<para>
								Specify <literal>"true"</literal> to skip certificate verification, and specify <literal>"false"</literal> to verify the certificate. Defaults to <literal>"false"</literal> if not specified. Skipping certificate verification proceeds with an insecure migration and then the certificate is not required. Insecure migration means that the transferred data is sent over an insecure connection and potentially sensitive data could be exposed.
							</para>
						</callout>
						<callout arearefs="CO17-5">
							<para>
								When this field is not set and <emphasis>skip certificate verification</emphasis> is disabled, MTV attempts to use the system CA.
							</para>
						</callout>
						<callout arearefs="CO17-6">
							<para>
								Specify the API endpoint URL of the vCenter or the ESX/ESXi, for example, <literal>https://&lt;vCenter_host&gt;/sdk</literal>.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="2">
				<listitem>
					<simpara>
						Create a <literal>Provider</literal> manifest for the source provider:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Provider
metadata:
  name: &lt;source_provider&gt;
  namespace: &lt;namespace&gt;
spec:
  type: vsphere
  url: &lt;api_end_point&gt; <co xml:id="CO18-1"></co>
  settings:
    vddkInitImage: &lt;VDDK_image&gt; <co xml:id="CO18-2"></co>
    sdkEndpoint: vcenter <co xml:id="CO18-3"></co>
  secret:
    name: &lt;secret&gt; <co xml:id="CO18-4"></co>
    namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO18-1">
							<para>
								Specify the URL of the API endpoint, for example, <literal>https://&lt;vCenter_host&gt;/sdk</literal>.
							</para>
						</callout>
						<callout arearefs="CO18-2">
							<para>
								Optional, but it is strongly recommended to create a VDDK image to accelerate migrations. Follow OpenShift documentation to specify the VDDK image you created.
							</para>
						</callout>
						<callout arearefs="CO18-3">
							<para>
								Options: <literal>vcenter</literal> or <literal>esxi</literal>.
							</para>
						</callout>
						<callout arearefs="CO18-4">
							<para>
								Specify the name of the provider <literal>Secret</literal> CR.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="3">
				<listitem>
					<simpara>
						Create a <literal>Host</literal> manifest:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Host
metadata:
  name: &lt;vmware_host&gt;
  namespace: &lt;namespace&gt;
spec:
  provider:
    namespace: &lt;namespace&gt;
    name: &lt;source_provider&gt; <co xml:id="CO19-1"></co>
  id: &lt;source_host_mor&gt; <co xml:id="CO19-2"></co>
  ipAddress: &lt;source_network_ip&gt; <co xml:id="CO19-3"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO19-1">
							<para>
								Specify the name of the VMware vSphere <literal>Provider</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO19-2">
							<para>
								Specify the Managed Object Reference (moRef) of the VMware vSphere host. To retrieve the moRef, see <link linkend="retrieving-vmware-moref_vmware">Retrieving a VMware vSphere moRef</link>.
							</para>
						</callout>
						<callout arearefs="CO19-3">
							<para>
								Specify the IP address of the VMware vSphere migration network.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="4">
				<listitem>
					<simpara>
						Create a <literal>NetworkMap</literal> manifest to map the source and destination networks:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <co xml:id="CO20-1"></co>
      source: <co xml:id="CO20-2"></co>
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
    - destination:
        name: &lt;network_attachment_definition&gt; <co xml:id="CO20-3"></co>
        namespace: &lt;network_attachment_definition_namespace&gt; <co xml:id="CO20-4"></co>
        type: multus
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO20-1">
							<para>
								Allowed values are <literal>pod</literal>, <literal>multus</literal>, and <literal>ignored</literal>. Use <literal>ignored</literal> to avoid attaching VMs to this network for this migration.
							</para>
						</callout>
						<callout arearefs="CO20-2">
							<para>
								You can use either the <literal>id</literal> or the <literal>name</literal> parameter to specify the source network. For <literal>id</literal>, specify the VMware vSphere network Managed Object Reference (moRef). To retrieve the moRef, see <link linkend="retrieving-vmware-moref_vmware">Retrieving a VMware vSphere moRef</link>.
							</para>
						</callout>
						<callout arearefs="CO20-3">
							<para>
								Specify a network attachment definition for each additional OpenShift Virtualization network.
							</para>
						</callout>
						<callout arearefs="CO20-4">
							<para>
								Required only when <literal>type</literal> is <literal>multus</literal>. Specify the namespace of the OpenShift Virtualization network attachment definition.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="5">
				<listitem>
					<simpara>
						Create a <literal>StorageMap</literal> manifest to map source and destination storage:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <co xml:id="CO21-1"></co>
      source:
        id: &lt;source_datastore&gt; <co xml:id="CO21-2"></co>
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO21-1">
							<para>
								Allowed values are <literal>ReadWriteOnce</literal> and <literal>ReadWriteMany</literal>.
							</para>
						</callout>
						<callout arearefs="CO21-2">
							<para>
								Specify the VMware vSphere datastore moRef. For example, <literal>f2737930-b567-451a-9ceb-2887f6207009</literal>. To retrieve the moRef, see <link linkend="retrieving-vmware-moref_vmware">Retrieving a VMware vSphere moRef</link>.
							</para>
						</callout>
					</calloutlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Create a <literal>Hook</literal> manifest to run custom code on a VM during the phase specified in the <literal>Plan</literal> CR:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Hook
metadata:
  name: &lt;hook&gt;
  namespace: &lt;namespace&gt;
spec:
  image: quay.io/kubev2v/hook-runner
  serviceAccount:&lt;service account&gt; <co xml:id="CO22-1"></co>
  playbook: |
    LS0tCi0gbm... <co xml:id="CO22-2"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO22-1">
							<para>
								Optional: Red Hat OpenShift service account. Use the <literal>serviceAccount</literal> parameter to modify any cluster resources.
							</para>
						</callout>
						<callout arearefs="CO22-2">
							<para>
								Base64-encoded Ansible Playbook. If you specify a playbook, the <literal>image</literal> must include an <literal>ansible-runner</literal>.
							</para>
						</callout>
					</calloutlist>
					<note>
						<simpara>
							You can use the default <literal>hook-runner</literal> image or specify a custom image. If you specify a custom image, you do not have to specify a playbook.
						</simpara>
					</note>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="7">
				<listitem>
					<simpara>
						Enter the following command to create the network attachment definition (NAD) of the transfer network used for MTV migrations.
					</simpara>
					<simpara>
						You use this definition to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically.
					</simpara>
					<simpara>
						Configuring the IP address enables the interface to reach the configured gateway.
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ oc edit NetworkAttachmentDefinitions &lt;name_of_the_NAD_to_edit&gt;
apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: &lt;name_of_transfer_network&gt;
  namespace: &lt;namespace&gt;
  annotations:
    forklift.konveyor.io/route: &lt;IP_address&gt;</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Create a <literal>Plan</literal> manifest for the migration:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Plan
metadata:
  name: &lt;plan&gt; <co xml:id="CO23-1"></co>
  namespace: &lt;namespace&gt;
spec:
  warm: false <co xml:id="CO23-2"></co>
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
  map: <co xml:id="CO23-3"></co>
    network: <co xml:id="CO23-4"></co>
      name: &lt;network_map&gt; <co xml:id="CO23-5"></co>
      namespace: &lt;namespace&gt;
    storage: <co xml:id="CO23-6"></co>
      name: &lt;storage_map&gt; <co xml:id="CO23-7"></co>
      namespace: &lt;namespace&gt;
  preserveStaticIPs: <co xml:id="CO23-8"></co>
  networkNameTemplate: &lt;network_interface_template&gt; <co xml:id="CO23-9"></co>
  pvcNameTemplate: &lt;pvc_name_template&gt; <co xml:id="CO23-10"></co>
  pvcNameTemplateUseGenerateName: true <co xml:id="CO23-11"></co>
  skipGuestConversion: false <co xml:id="CO23-12"></co>
  targetNamespace: &lt;target_namespace&gt;
  useCompatibilityMode: true <co xml:id="CO23-13"></co>
  volumeNameTemplate: &lt;volume_name_template&gt; <co xml:id="CO23-14"></co>
  vms: <co xml:id="CO23-15"></co>
    - id: &lt;source_vm1&gt; <co xml:id="CO23-16"></co>
    - name: &lt;source_vm2&gt;
      networkNameTemplate: &lt;network_interface_template_for_this_vm&gt; <co xml:id="CO23-17"></co>
      pvcNameTemplate: &lt;pvc_name_template_for_this_vm&gt; <co xml:id="CO23-18"></co>
      volumeNameTemplate: &lt;volume_name_template_for_this_vm&gt; <co xml:id="CO23-19"></co>
      targetName: &lt;target_name&gt; <co xml:id="CO23-20"></co>
      hooks: <co xml:id="CO23-21"></co>
        - hook:
            namespace: &lt;namespace&gt;
            name: &lt;hook&gt; <co xml:id="CO23-22"></co>
          step: &lt;step&gt; <co xml:id="CO23-23"></co>

EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO23-1">
							<para>
								Specify the name of the <literal>Plan</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO23-2">
							<para>
								Specify whether the migration is warm - <literal>true</literal> - or cold - <literal>false</literal>. If you specify a warm migration without specifying a value for the <literal>cutover</literal> parameter in the <literal>Migration</literal> manifest, only the precopy stage will run.
							</para>
						</callout>
						<callout arearefs="CO23-3">
							<para>
								Specify only one network map and one storage map per plan.
							</para>
						</callout>
						<callout arearefs="CO23-4">
							<para>
								Specify a network mapping even if the VMs to be migrated are not assigned to a network. The mapping can be empty in this case.
							</para>
						</callout>
						<callout arearefs="CO23-5">
							<para>
								Specify the name of the <literal>NetworkMap</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO23-6">
							<para>
								Specify a storage mapping even if the VMs to be migrated are not assigned with disk images. The mapping can be empty in this case.
							</para>
						</callout>
						<callout arearefs="CO23-7">
							<para>
								Specify the name of the <literal>StorageMap</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO23-8">
							<para>
								By default, virtual network interface controllers (vNICs) change during the migration process. As a result, vNICs that are configured with a static IP address linked to the interface name in the guest VM lose their IP address. To avoid this, set <literal>preserveStaticIPs</literal> to <literal>true</literal>. MTV issues a warning message about any VMs for which vNIC properties are missing. To retrieve any missing vNIC properties, run those VMs in vSphere in order for the vNIC properties to be reported to MTV.
							</para>
						</callout>
						<callout arearefs="CO23-9">
							<para>
								<anchor xml:id="callout9" xreflabel="[callout9]"></anchor>Optional. Specify a template for the network interface name for the VMs in your plan. The template follows the Go template syntax and has access to the following variables:
							</para>
							<itemizedlist>
								<listitem>
									<simpara>
										<literal>.NetworkName:</literal> If the target network is <literal>multus</literal>, add the name of the Multus Network Attachment Definition. Otherwise, leave this variable empty.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.NetworkNamespace</literal>: If the target network is <literal>multus</literal>, add the namespace where the Multus Network Attachment Definition is located.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.NetworkType</literal>: Specifies the network type. Options: <literal>multus</literal> or <literal>pod</literal>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.NetworkIndex</literal>: Sequential index of the network interface (0-based).
									</simpara>
									<simpara>
										<emphasis role="strong">Examples</emphasis>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>"net-{{.NetworkIndex}}"</literal>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>{{if eq .NetworkType "pod"}}pod{{else}}multus-{{.NetworkIndex}}{{end}}"</literal>
									</simpara>
									<simpara>
										Variable names cannot exceed 63 characters. This rule applies to a network name network template, a PVC name template, a VM name template, and a volume name template.
									</simpara>
								</listitem>
							</itemizedlist>
						</callout>
						<callout arearefs="CO23-10">
							<para>
								<anchor xml:id="callout10" xreflabel="[callout10]"></anchor>Optional. Specify a template for the persistent volume claim (PVC) name for a plan. The template follows the Go template syntax and has access to the following variables:
							</para>
							<itemizedlist>
								<listitem>
									<simpara>
										<literal>.VmName</literal>: Name of the VM.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.PlanName</literal>: Name of the migration plan.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.DiskIndex</literal>: Initial volume index of the disk.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.RootDiskIndex</literal>: Index of the root disk.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.Shared</literal>: Options: <literal>true</literal>, for a shared volume, <literal>false</literal>, for a non-shared volume.
									</simpara>
									<simpara>
										<emphasis role="strong">Examples</emphasis>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>"{{.VmName}}-disk-{{.DiskIndex}}"</literal>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>"{{if eq .DiskIndex .RootDiskIndex}}root{{else}}data{{end}}-{{.DiskIndex}}"</literal>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>"{{if .Shared}}shared-{{end}}{{.VmName}}-{{.DiskIndex}}"</literal>
									</simpara>
								</listitem>
							</itemizedlist>
						</callout>
						<callout arearefs="CO23-11">
							<para>
								Optional:
							</para>
							<itemizedlist>
								<listitem>
									<simpara>
										When set to <literal>true</literal>, MTV adds one or more randomly generated alphanumeric characters to the name of the PVC in order to ensure all PVCs have unique names.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										When set to <literal>false</literal>, if you specify a <literal>pvcNameTemplate</literal>, MTV does not add such characters to the name of the PVC.
									</simpara>
									<warning>
										<simpara>
											If you set <literal>pvcNameTemplateUseGenerateName</literal> to <literal>false</literal>, the generated PVC name might not be unique and might cause conflicts.
										</simpara>
									</warning>
								</listitem>
							</itemizedlist>
						</callout>
						<callout arearefs="CO23-12">
							<para>
								Determines whether VMs are converted before migration using the <literal>virt-v2v</literal> tool, which makes the VMs compatible with OpenShift Virtualization.
							</para>
							<itemizedlist>
								<listitem>
									<simpara>
										When set to <literal>false</literal>, the default value, MTV migrates VMs using <literal>virt-v2v</literal>.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										When set to <literal>true</literal>, MTV migrates VMs using raw copy mode, which copies the VMs without converting them first.
									</simpara>
									<simpara>
										Raw copy mode copies VMs without converting them with <literal>virt-v2v</literal>. This allows for faster conversions, migrating VMs running a wider range of operating systems, as well as supporting migrating disks encrypted using Linux Unified Key Setup (LUKS) without needing keys. However, VMs migrated using raw copy mode might not function properly on OpenShift Virtualization. For more information on <literal>virt-v2v</literal>, see <link linkend="virt-v2v-mtv_mtv">How MTV uses the virt-v2v tool</link>.
									</simpara>
								</listitem>
							</itemizedlist>
						</callout>
						<callout arearefs="CO23-13">
							<para>
								Determines whether the migration uses VirtIO devices or compatibility devices (SATA bus, E1000E NIC) when <literal>skipGuestConversion</literal> is <literal>true</literal>, that is, when raw copy mode is used for the migration. The setting of <literal>useCompatibilityMode</literal> has no effect when <literal>skipGuestConversion</literal> is <literal>false</literal>, because <literal>virt-v2v</literal> conversion always uses VirtIO devices.
							</para>
							<itemizedlist>
								<listitem>
									<simpara>
										When set to <literal>true</literal>, the default setting, MTV uses compatibility devices (SATA bus, E1000E NIC) in the migration process to ensure that the VMs can be booted after migration.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										When set to <literal>false</literal>, MTV uses high-performance VirtIO devices in the migration process, and <literal>virt-v2v</literal> ensures that the VMs can be booted after migration. Before using this option, verify that VirtIO drivers are already installed in the source VMs.
									</simpara>
								</listitem>
							</itemizedlist>
						</callout>
						<callout arearefs="CO23-14">
							<para>
								<anchor xml:id="callout14" xreflabel="[callout14]"></anchor>Optional: Specify a template for the volume interface name for the VMs in your plan. The template follows the Go template syntax and has access to the following variables:
							</para>
							<itemizedlist>
								<listitem>
									<simpara>
										<literal>.PVCName</literal>: Name of the PVC mounted to the VM using this volume.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>.VolumeIndex</literal>: Sequential index of the volume interface (0-based).
									</simpara>
									<simpara>
										<emphasis role="strong">Examples</emphasis>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>"disk-{{.VolumeIndex}}"</literal>
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>"pvc-{{.PVCName}}"</literal>
									</simpara>
								</listitem>
							</itemizedlist>
						</callout>
						<callout arearefs="CO23-15">
							<para>
								You can use either the <literal>id</literal> or the <literal>name</literal> parameter to specify the source VMs.
							</para>
						</callout>
						<callout arearefs="CO23-16">
							<para>
								Specify the VMware vSphere VM moRef. To retrieve the moRef, see <link linkend="retrieving-vmware-moref_vmware">Retrieving a VMware vSphere moRef</link>.
							</para>
						</callout>
						<callout arearefs="CO23-17">
							<para>
								Optional: Specify a network interface name for the specific VM. Overrides the value set in <literal>spec:networkNameTemplate</literal>. Variables and examples as in <link linkend="callout9">callout 9</link>.
							</para>
						</callout>
						<callout arearefs="CO23-18">
							<para>
								Optional: Specify a PVC name for the specific VM. Overrides the value set in <literal>spec:pvcNameTemplate</literal>. Variables and examples as in <link linkend="callout10">callout 10</link>.
							</para>
						</callout>
						<callout arearefs="CO23-19">
							<para>
								Optional: Specify a volume name for the specific VM. Overrides the value set in <literal>spec:volumeNameTemplate</literal>. Variables and examples as in <link linkend="callout14">callout 14</link>.
							</para>
						</callout>
						<callout arearefs="CO23-20">
							<para>
								Optional: MTV automatically generates a name for the target VM. You can override this name by using this parameter and entering a new name. The name you enter must be unique, and it must be a valid Kubernetes subdomain. Otherwise, the migration fails automatically.
							</para>
						</callout>
						<callout arearefs="CO23-21">
							<para>
								Optional: Specify up to two hooks for a VM. Each hook must run during a separate migration step.
							</para>
						</callout>
						<callout arearefs="CO23-22">
							<para>
								Specify the name of the <literal>Hook</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO23-23">
							<para>
								Allowed values are <literal>PreHook</literal> before the migration plan starts or <literal>PostHook</literal> after the migration is complete.
							</para>
							<important>
								<simpara>
									When you migrate a VMware 7 VM to an OpenShift 4.13+ platform that uses CentOS 7.9, the name of the network interfaces changes and the static IP configuration for the VM no longer works.
								</simpara>
							</important>
						</callout>
					</calloutlist>
				</listitem>
				<listitem>
					<simpara>
						Create a <literal>Migration</literal> manifest to run the <literal>Plan</literal> CR:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Migration
metadata:
  name: &lt;name_of_migration_cr&gt;
  namespace: &lt;namespace&gt;
spec:
  plan:
    name: &lt;name_of_plan_cr&gt;
    namespace: &lt;namespace&gt;
  cutover: &lt;optional_cutover_time&gt;
EOF</programlisting>
					<note>
						<simpara>
							If you specify a cutover time, use the ISO 8601 format with the UTC time offset, for example, <literal>2024-04-04T01:23:45.678+09:00</literal>.
						</simpara>
					</note>
				</listitem>
			</orderedlist>
			<important>
				<simpara>
					There is an issue with the <literal>forklift-controller</literal> consistently failing to reconcile a migration plan, and subsequently returning an HTTP 500 error. This issue is caused when you specify the user permissions only on the virtual machine (VM).
				</simpara>
				<simpara>
					In MTV, you need to add permissions at the data center level, which includes storage, networks, switches, and so on, which are used by the VM. You must then propagate the permissions to the child elements.
				</simpara>
				<simpara>
					If you do not want to add this level of permissions, you must manually add the permissions to each object on the VM host required.
				</simpara>
			</important>
			<section xml:id="retrieving-vmware-moref_vmware">
				<title>Retrieving a VMware vSphere moRef</title>
				<simpara role="_abstract">
					When you migrate VMs with a VMware vSphere source provider by using Migration Toolkit for Virtualization (MTV) from the command line, you need to know the managed object reference (moRef) of certain entities in vSphere, such as datastores, networks, and VMs.
				</simpara>
				<simpara>
					You can retrieve the moRef of one or more vSphere entities from the Inventory service. You can then use each moRef as a reference for retrieving the moRef of another entity.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Retrieve the routes for the project:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">oc get route -n openshift-mtv</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Retrieve the <literal>Inventory</literal> service route:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ oc get route &lt;inventory_service&gt; -n openshift-mtv</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Retrieve the access token:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ TOKEN=$(oc whoami -t)</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Retrieve the moRef of a VMware vSphere provider:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ curl -H "Authorization: Bearer $TOKEN"  https://&lt;inventory_service_route&gt;/providers/vsphere -k</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Retrieve the datastores of a VMware vSphere source provider:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ curl -H "Authorization: Bearer $TOKEN"  https://&lt;inventory_service_route&gt;/providers/vsphere/&lt;provider id&gt;/datastores/ -k</programlisting>
						<formalpara>
							<title>Example output</title>
							<para>
								
<programlisting language="terminal" linenumbering="unnumbered">[
  {
    "id": "datastore-11",
    "parent": {
      "kind": "Folder",
      "id": "group-s5"
    },
    "path": "/Datacenter/datastore/v2v_general_porpuse_ISCSI_DC",
    "revision": 46,
    "name": "v2v_general_porpuse_ISCSI_DC",
    "selfLink": "providers/vsphere/01278af6-e1e4-4799-b01b-d5ccc8dd0201/datastores/datastore-11"
  },
  {
    "id": "datastore-730",
    "parent": {
      "kind": "Folder",
      "id": "group-s5"
    },
    "path": "/Datacenter/datastore/f01-h27-640-SSD_2",
    "revision": 46,
    "name": "f01-h27-640-SSD_2",
    "selfLink": "providers/vsphere/01278af6-e1e4-4799-b01b-d5ccc8dd0201/datastores/datastore-730"
  },
 ...</programlisting>
							</para>
						</formalpara>
					</listitem>
				</orderedlist>
				<simpara>
					In this example, the moRef of the datastore <literal>v2v_general_porpuse_ISCSI_DC</literal> is <literal>datastore-11</literal> and the moRef of the datastore <literal>f01-h27-640-SSD_2</literal> is <literal>datastore-730</literal>.
				</simpara>
			</section>
			<section xml:id="mtv-shared-disks_vmware">
				<title>Migrating virtual machines with shared disks</title>
				<simpara role="_abstract">
					You can migrate VMware virtual machines (VMs) with shared disks by using the Migration Toolkit for Virtualization (MTV). This functionality is available only for cold migrations and is not available for shared boot disks.
				</simpara>
				<simpara>
					Shared disks are disks that are attached to more than one VM and that use the multi-writer option. As a result of these characteristics, shared disks are difficult to migrate.
				</simpara>
				<simpara>
					In certain situations, applications in VMs require shared disks. Databases and clustered file systems are the primary use cases for shared disks.
				</simpara>
				<simpara>
					MTV version 2.7.11 or later includes a parameter named <literal>migrateSharedDisks</literal> in <literal>Plan</literal> custom resources (CRs) that instructs MTV to either migrate shared disks or to skip them during migration, as follows:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							If set to <literal>true</literal>, MTV migrates the shared disks. MTV uses the regular cold migration flow using <literal>virt-v2v</literal> and labeling the shared persistent volume claims (PVCs).
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							If set to <literal>false</literal>, MTV skips the shared disks. MTV uses the KubeVirt Containerized-Data-Importer (CDI) for disk transfer.
						</simpara>
					</listitem>
				</itemizedlist>
				<simpara>
					After the disk transfer, MTV automatically attempts to locate the already shared PVCs and the already migrated shared disks and attach them to the VMs.
				</simpara>
				<simpara>
					By default, <literal>migrateSharedDisks</literal> is set to <literal>true</literal>.
				</simpara>
				<simpara>
					To successfully migrate VMs with shared disks, create two <literal>Plan</literal> CRs as follows:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							In the first, set <literal>migrateSharedDisks</literal> to <literal>true</literal>.
						</simpara>
						<simpara>
							MTV migrates the following:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									All shared disks.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									For each shared disk, one of the VMs that is attached to it. If possible, choose VMs so that the plan does not contain any shared disks that are connected to more than one VM. See the following figures for further guidance.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									All unshared disks attached to the VMs you choose for this plan.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							In the second, set <literal>migrateSharedDisks</literal> to <literal>false</literal>.
						</simpara>
						<simpara>
							MTV migrates the following:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									All other VMs.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									The unshared disks of the VMs in the second <literal>Plan</literal> CR.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
				</itemizedlist>
				<simpara>
					When MTV migrates a VM that has a shared disk to it, it does not check if it has already migrated that shared disk. Therefore, it is important to allocate the VMs in each of the two so that each shared disk is migrated once and only once.
				</simpara>
				<simpara>
					To understand how to assign VMs and shared disks to each of the <literal>Plan</literal> CRs, consider the two figures that follow. In both, <literal>migrateSharedDisks</literal> is set to <literal>true</literal> for <literal>plan1</literal> and set to <literal>false</literal> for <literal>plan2</literal>.
				</simpara>
				<simpara>
					In the first figure, the VMs and shared disks are assigned correctly:
				</simpara>
				<figure>
					<title>Example of correctly assigned VMs and shared disks</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/modules/images/OK_shared_disks.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>Example successful migration</phrase>
						</textobject>
					</mediaobject>
				</figure>
				<simpara>
					<literal>plan1</literal> migrates VMs 2 and 4, shared disks 1, 2, and 3, and the non-shared disks of VMs 2 and 4. VMs 2 and 4 are included in this plan, because they connect to all the shared disks once each.
				</simpara>
				<simpara>
					<literal>plan2</literal> migrates VMs 1 and 3 and their non-shared disks. <literal>plan2</literal> does not migrate the shared disks connected to VMs 1 and 3 because <literal>migrateSharedDisks</literal> is set to <literal>false</literal>.
				</simpara>
				<simpara>
					MTV migrates each VMs and its disks as follows:
				</simpara>
				<orderedlist numeration="arabic">
					<listitem>
						<simpara>
							From <literal>plan1</literal>:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									VM 3, shared disks 1 and 2, and the non-shared disks attached to VM 3.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									VM 4, shared disk 3, and the non-shared disks attached to VM 4.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
					<listitem>
						<simpara>
							From <literal>plan2</literal>:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									VM 1 and the non-shared disks attached to it.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									VM 2 and the non-shared disks attached to it.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
				</orderedlist>
				<simpara>
					The result is that VMs 2 and 4, all the shared disks, and all the non-shared disks are migrated, but only once. MTV is able to reattach all VMs to their disks, including the shared disks.
				</simpara>
				<simpara>
					In second figure, the VMs and shared disks are not assigned correctly:
				</simpara>
				<figure>
					<title>Example of incorrectly assigned VMs and shared disks</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/modules/images/not_OK_shared_disks.png" format="PNG" />
						</imageobject>
						<textobject>
							<phrase>Complex cyclic shared disk dependencies</phrase>
						</textobject>
					</mediaobject>
				</figure>
				<simpara>
					In this case, MTV migrates each VMs and its disks as follows:
				</simpara>
				<orderedlist numeration="arabic">
					<listitem>
						<simpara>
							From <literal>plan1</literal>:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									VM 2, shared disks 1 and 2, and the non-shared disks attached to VM 2.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									VM 3, shared disks 2 and 3, and the non-shared disks attached to VM 3.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
					<listitem>
						<simpara>
							From <literal>plan2</literal>:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									VM 1 and the non-shared disks attached to it.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									VM 4 and the non-shared disks attached to it.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
				</orderedlist>
				<simpara>
					This migration "succeeds", but it results in a problem: Shared disk 2 is migrated twice by the first <literal>Plan</literal> CR. You can resolve this problem by using one of the two workarounds that are discussed in the Known issues section, which follows the procedure.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							In MTV, create a migration plan for the shared disks, the minimum number of VMs connected to them, and the unshared disk of those VMs.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							On the VMware cluster, power off all VMs attached to the shared disks.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							In the Red Hat OpenShift web console, click <emphasis role="strong">Migration</emphasis> &gt; <emphasis role="strong">Plans for virtualization</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Select the desired plan.
						</simpara>
						<simpara>
							The <emphasis role="strong">Plan details</emphasis> page opens.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click the <emphasis role="strong">YAML</emphasis> tab of the plan.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Verify that <literal>migrateSharedDisks</literal> is set to <literal>true</literal>.
						</simpara>
						<formalpara>
							<title>Example Plan CR with <literal>migrateSharedDisks</literal> set to true</title>
							<para>
								
<programlisting language="yaml" linenumbering="unnumbered">apiVersion: forklift.konveyor.io/v1beta1
kind: Plan
 name: transfer-shared-disks
 namespace: openshift-mtv
spec:
 map:
   network:
     apiVersion: forklift.konveyor.io/v1beta1
     kind: NetworkMap
     name: vsphere-7gxbs
     namespace: openshift-mtv
     uid: a3c83db3-1cf7-446a-b996-84c618946362
   storage:
     apiVersion: forklift.konveyor.io/v1beta1
     kind: StorageMap
     name: vsphere-mqp7b
     namespace: openshift-mtv
     uid: 20b43d4f-ded4-4798-b836-7c0330d552a0
 migrateSharedDisks: true
 provider:
   destination:
     apiVersion: forklift.konveyor.io/v1beta1
     kind: Provider
     name: host
     namespace: openshift-mtv
     uid: abf4509f-1d5f-4ff6-b1f2-18206136922a
   source:
     apiVersion: forklift.konveyor.io/v1beta1
     kind: Provider
     name: vsphere
     namespace: openshift-mtv
     uid: be4dc7ab-fedd-460a-acae-a850f6b9543f
 targetNamespace: openshift-mtv
 vms:
   - id: vm-69
     name: vm-1-with-shared-disks</programlisting>
							</para>
						</formalpara>
					</listitem>
					<listitem>
						<simpara>
							Start the migration of the first plan and wait for it to finish.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Create a second <literal>Plan</literal> CR to migrate all the other VMs and their unshared disks to the same target namespace as the first.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							In the <emphasis role="strong">Plans for virtualization</emphasis> page of the Red Hat OpenShift web console, select the new plan.
						</simpara>
						<simpara>
							The <emphasis role="strong">Plan details</emphasis> page opens.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click the <emphasis role="strong">YAML</emphasis> tab of the plan.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Set <literal>migrateSharedDisks</literal> to <literal>false</literal>.
						</simpara>
						<formalpara>
							<title>Example Plan CR with <literal>migrateSharedDisks</literal> set to false</title>
							<para>
								
<programlisting language="yaml" linenumbering="unnumbered">apiVersion: forklift.konveyor.io/v1beta1
kind: Plan
 name: skip-shared-disks
 namespace: openshift-mtv
spec:
 map:
   network:
     apiVersion: forklift.konveyor.io/v1beta1
     kind: NetworkMap
     name: vsphere-7gxbs
     namespace: openshift-mtv
     uid: a3c83db3-1cf7-446a-b996-84c618946362
   storage:
     apiVersion: forklift.konveyor.io/v1beta1
     kind: StorageMap
     name: vsphere-mqp7b
     namespace: openshift-mtv
     uid: 20b43d4f-ded4-4798-b836-7c0330d552a0
 migrateSharedDisks: false
 provider:
   destination:
     apiVersion: forklift.konveyor.io/v1beta1
     kind: Provider
     name: host
     namespace: openshift-mtv
     uid: abf4509f-1d5f-4ff6-b1f2-18206136922a
   source:
     apiVersion: forklift.konveyor.io/v1beta1
     kind: Provider
     name: vsphere
     namespace: openshift-mtv
     uid: be4dc7ab-fedd-460a-acae-a850f6b9543f
 targetNamespace: openshift-mtv
 vms:
   - id: vm-71
     name: vm-2-with-shared-disks</programlisting>
							</para>
						</formalpara>
					</listitem>
					<listitem>
						<simpara>
							Start the migration of the second plan and wait for it to finish.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Verify that all shared disks are attached to the same VMs as they were before migration and that none are duplicated. In case of problems, see the discussion of known issues that follows.
						</simpara>
					</listitem>
				</orderedlist>
				<section xml:id="known-issues-shared-disks_vmware">
					<title>Known issue: Cyclic shared disk dependencies</title>
					<simpara role="_abstract">
						A known issue for migrating shared disks is that virtual machines (VMs) with cyclic shared disk dependencies cannot be migrated successfully.
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Explanation: When <literal>migrateSharedDisks</literal> is set to <literal>true</literal>, MTV migrates each VM in the plan, one by one, and any shared disks attached to it, without determining if a shared disk was already migrated.
							</simpara>
						</listitem>
					</itemizedlist>
					<simpara>
						In the case of 2 VMs sharing one disk, there is no problem. MTV transfers the shared disk and attaches the 2 VMs to the shared disk after the migration.
					</simpara>
					<simpara>
						However, if there is a cyclic dependency of shared disks between 3 or more VMs, MTV either duplicates or omits one of the shared disks. The figure that follows illustrates the simplest version of this problem.
					</simpara>
					<figure>
						<title>Simple example of cyclic shared disks</title>
						<mediaobject>
							<imageobject>
								<imagedata fileref="images/modules/images/simple-cyclic-shared-disks.png" format="PNG" />
							</imageobject>
							<textobject>
								<phrase>Simple cyclic shared disk dependencies</phrase>
							</textobject>
						</mediaobject>
					</figure>
					<simpara>
						In this case, the VMs and shared disks cannot be migrated in the same <literal>Plan</literal> CR. Although this problem could be solved using <literal>migrateSharedDisks</literal> and 2 <literal>Plan</literal> CRs, it illustrates the basic issue that must be avoided in migrating VMs with shared disks.
					</simpara>
				</section>
				<section xml:id="cyclic-shared-disk-workarounds_vmware">
					<title>Workarounds for VMs with shared disk dependencies</title>
					<simpara role="_abstract">
						As discussed previously, it is important to try to create 2 <literal>Plan</literal> CRs in which each shared disk is migrated once. However, if your migration does result in a shared disk either being duplicated or not being transferred, you can use one of the following workarounds:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Duplicate one of the shared disks
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								"Remove" one of the shared disks
							</simpara>
						</listitem>
					</itemizedlist>
					<section xml:id="duplicate-shared-disk_vmware">
						<title>Duplicate a shared disk</title>
						<simpara>
							In the figure that follows, VMs 2 and 3 are migrated with the shared disks in the first plan, and VM 1 is migrated in the second plan. This eliminates the cyclic dependencies, but there is a disadvantage to this workaround: it duplicates shared disk 3. The solution is to remove the duplicated PV and migrate VM 1 again.
						</simpara>
						<figure>
							<title>Duplicated shared disk</title>
							<mediaobject>
								<imageobject>
									<imagedata fileref="images/modules/images/cyclic_workaround1.png" format="PNG" />
								</imageobject>
								<textobject>
									<phrase>Duplicate a shared disk</phrase>
								</textobject>
							</mediaobject>
						</figure>
						<simpara>
							Advantage: The source VMs are not affected.
						</simpara>
						<simpara>
							Disadvantage: One shared disk gets transferred twice, so you need to manually delete the duplicate disk and reconnect VM 3 to shared disk 3 in Red Hat OpenShift after the migration.
						</simpara>
					</section>
					<section xml:id="remove-shared-link_vmware">
						<title>"Remove" a shared disk</title>
						<simpara>
							The figure that follows shows an alternative solution: Remove the link to one of the shared disks from one source VM. Doing this breaks the cyclic dependencies. Note that in the current VMware UI, removing the link is referred to as "removing" the disk.
						</simpara>
						<figure>
							<title>"Removed" shared disk</title>
							<mediaobject>
								<imageobject>
									<imagedata fileref="images/modules/images/draft_workaround2.png" format="PNG" />
								</imageobject>
								<textobject>
									<phrase>Remove a shared disk</phrase>
								</textobject>
							</mediaobject>
						</figure>
						<simpara>
							In this case, VM 2 and 3 are migrated with the shared disks in the first plan, but the link between VM 3 and shared disk 3 is removed. As before, VM 1 is migrated in the second plan.
						</simpara>
						<simpara>
							Doing this breaks the cyclic dependencies, but this workaround has a drawback: VM 3 is disconnected from shared disk 3 and remains disconnected after the migration. The solution is to manually reattach shared disk 3 to VM 3 after the migration finishes.
						</simpara>
						<simpara>
							Advantage: No disks are duplicated.
						</simpara>
						<simpara>
							Disadvantage: You need to modify VM 3 by removing its link to shared disk 3 before the migration, and you need to manually reconnect VM 3 to shared disk 3 in Red Hat OpenShift after the migration.
						</simpara>
					</section>
				</section>
			</section>
			<section xml:id="canceling-migration-cli_vmware">
				<title>Canceling a migration from the command-line interface</title>
				<simpara role="_abstract">
					You can use the command-line interface (CLI) to cancel either an entire migration or the migration of specific virtual machines (VMs) while a migration is in progress.
				</simpara>
				<section xml:id="canceling-migration-cli-entire_vmware">
					<title>Canceling an entire migration from the command-line interface</title>
					<simpara role="_abstract">
						You can use the command-line interface (CLI) to cancel an entire migration while a migration is in progress.
					</simpara>
					<itemizedlist>
						<title>Procedure</title>
						<listitem>
							<simpara>
								Delete the <literal>Migration</literal> CR:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc delete migration &lt;migration&gt; -n &lt;namespace&gt; <co xml:id="CO24-1"></co></programlisting>
							<calloutlist>
								<callout arearefs="CO24-1">
									<para>
										Specify the name of the <literal>Migration</literal> CR.
									</para>
								</callout>
							</calloutlist>
						</listitem>
					</itemizedlist>
				</section>
				<section xml:id="canceling-migration-cli-specific_vmware">
					<title>Canceling the migration of specific VMs from the command-line interface</title>
					<simpara role="_abstract">
						You can use the command-line interface (CLI) to cancel the migration of specific virtual machines (VMs) while a migration is in progress.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Add the specific VMs to the <literal>spec.cancel</literal> block of the <literal>Migration</literal> manifest, following this example:
							</simpara>
							
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Migration
metadata:
  name: &lt;migration&gt;
  namespace: &lt;namespace&gt;
...
spec:
  cancel:
  - id: vm-102 <co xml:id="CO25-1"></co>
  - id: vm-203
    name: rhel8-vm
EOF</programlisting>
							<calloutlist>
								<callout arearefs="CO25-1">
									<para>
										You can specify a VM by using the <literal>id</literal> key or the <literal>name</literal> key.
									</para>
								</callout>
							</calloutlist>
							<simpara>
								The value of the <literal>id</literal> key is the <emphasis>managed object reference</emphasis>, for a VMware VM, or the <emphasis>VM UUID</emphasis>, for a RHV VM.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Retrieve the <literal>Migration</literal> custom resource (CR) to monitor the progress of the remaining VMs, following this example:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc get migration/&lt;migration&gt; -n &lt;namespace&gt; -o yaml</programlisting>
						</listitem>
					</orderedlist>
				</section>
			</section>
		</section>
		<section xml:id="new-migrating-virtual-machines-cli_rhv">
			<title>Migrating from a Red Hat Virtualization source provider</title>
			<simpara role="_abstract">
				You can migrate from a Red Hat Virtualization (RHV) source provider by using the command-line interface (CLI).
			</simpara>
			<formalpara>
				<title>Prerequisites</title>
				<para>
					If you are migrating a virtual machine with a direct LUN disk, ensure that the nodes in the OpenShift Virtualization destination cluster that the VM is expected to run on can access the backend storage.
				</para>
			</formalpara>
			<note>
				<itemizedlist>
					<listitem>
						<simpara>
							Unlike disk images that <emphasis>are copied</emphasis> from a source provider to a target provider, LUNs are <emphasis>detached</emphasis>, <emphasis>but not removed</emphasis>, from virtual machines in the source provider and then attached to the virtual machines (VMs) that are created in the target provider.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							LUNs are not removed from the source provider during the migration in case fallback to the source provider is required. However, before re-attaching the LUNs to VMs in the source provider, ensure that the LUNs are not used by VMs on the target environment at the same time, which might lead to data corruption.
						</simpara>
					</listitem>
				</itemizedlist>
			</note>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Create a <literal>Secret</literal> manifest for the source provider credentials:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: &lt;secret&gt;
  namespace: &lt;namespace&gt;
  ownerReferences: <co xml:id="CO26-1"></co>
    - apiVersion: forklift.konveyor.io/v1beta1
      kind: Provider
      name: &lt;provider_name&gt;
      uid: &lt;provider_uid&gt;
  labels:
    createdForProviderType: ovirt
    createdForResourceType: providers
type: Opaque
stringData:
  user: &lt;user&gt; <co xml:id="CO26-2"></co>
  password: &lt;password&gt; <co xml:id="CO26-3"></co>
  insecureSkipVerify: &lt;"true"/"false"&gt; <co xml:id="CO26-4"></co>
  cacert: | <co xml:id="CO26-5"></co>
    &lt;ca_certificate&gt;
  url: &lt;api_end_point&gt; <co xml:id="CO26-6"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO26-1">
							<para>
								The <literal>ownerReferences</literal> section is optional.
							</para>
						</callout>
						<callout arearefs="CO26-2">
							<para>
								Specify the RHV Manager user.
							</para>
						</callout>
						<callout arearefs="CO26-3">
							<para>
								Specify the user password.
							</para>
						</callout>
						<callout arearefs="CO26-4">
							<para>
								Specify <literal>"true"</literal> to skip certificate verification, and specify <literal>"false"</literal> to verify the certificate. Defaults to <literal>"false"</literal> if not specified. Skipping certificate verification proceeds with an insecure migration and then the certificate is not required. Insecure migration means that the transferred data is sent over an insecure connection and potentially sensitive data could be exposed.
							</para>
						</callout>
						<callout arearefs="CO26-5">
							<para>
								Enter the Manager CA certificate, unless it was replaced by a third-party certificate, in which case, enter the Manager Apache CA certificate. You can retrieve the Manager CA certificate at <link xlink:href="https://&lt;engine_host&gt;/ovirt-engine/services/pki-resource?resource=ca-certificate&amp;format=X509-PEM-CA">https://&lt;engine_host&gt;/ovirt-engine/services/pki-resource?resource=ca-certificate&amp;format=X509-PEM-CA</link>.
							</para>
						</callout>
						<callout arearefs="CO26-6">
							<para>
								Specify the API endpoint URL, for example, <literal>https://&lt;engine_host&gt;/ovirt-engine/api</literal>.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="2">
				<listitem>
					<simpara>
						Create a <literal>Provider</literal> manifest for the source provider:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Provider
metadata:
  name: &lt;source_provider&gt;
  namespace: &lt;namespace&gt;
spec:
  type: ovirt
  url: &lt;api_end_point&gt; <co xml:id="CO27-1"></co>
  secret:
    name: &lt;secret&gt; <co xml:id="CO27-2"></co>
    namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO27-1">
							<para>
								Specify the URL of the API endpoint, for example, <literal>https://&lt;engine_host&gt;/ovirt-engine/api</literal>.
							</para>
						</callout>
						<callout arearefs="CO27-2">
							<para>
								Specify the name of provider <literal>Secret</literal> CR.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="3">
				<listitem>
					<simpara>
						Create a <literal>NetworkMap</literal> manifest to map the source and destination networks:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <co xml:id="CO28-1"></co>
      source: <co xml:id="CO28-2"></co>
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
    - destination:
        name: &lt;network_attachment_definition&gt; <co xml:id="CO28-3"></co>
        namespace: &lt;network_attachment_definition_namespace&gt; <co xml:id="CO28-4"></co>
        type: multus
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO28-1">
							<para>
								Allowed values are <literal>pod</literal> and <literal>multus</literal>.
							</para>
						</callout>
						<callout arearefs="CO28-2">
							<para>
								You can use either the <literal>id</literal> or the <literal>name</literal> parameter to specify the source network. For <literal>id</literal>, specify the RHV network Universal Unique ID (UUID).
							</para>
						</callout>
						<callout arearefs="CO28-3">
							<para>
								Specify a network attachment definition for each additional OpenShift Virtualization network.
							</para>
						</callout>
						<callout arearefs="CO28-4">
							<para>
								Required only when <literal>type</literal> is <literal>multus</literal>. Specify the namespace of the OpenShift Virtualization network attachment definition.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="4">
				<listitem>
					<simpara>
						Create a <literal>StorageMap</literal> manifest to map source and destination storage:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <co xml:id="CO29-1"></co>
      source:
        id: &lt;source_storage_domain&gt; <co xml:id="CO29-2"></co>
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO29-1">
							<para>
								Allowed values are <literal>ReadWriteOnce</literal> and <literal>ReadWriteMany</literal>.
							</para>
						</callout>
						<callout arearefs="CO29-2">
							<para>
								Specify the RHV storage domain UUID. For example, <literal>f2737930-b567-451a-9ceb-2887f6207009</literal>.
							</para>
						</callout>
					</calloutlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Create a <literal>Hook</literal> manifest to run custom code on a VM during the phase specified in the <literal>Plan</literal> CR:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Hook
metadata:
  name: &lt;hook&gt;
  namespace: &lt;namespace&gt;
spec:
  image: quay.io/kubev2v/hook-runner
  serviceAccount:&lt;service account&gt; <co xml:id="CO30-1"></co>
  playbook: |
    LS0tCi0gbm... <co xml:id="CO30-2"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO30-1">
							<para>
								Optional: Red Hat OpenShift service account. Use the <literal>serviceAccount</literal> parameter to modify any cluster resources.
							</para>
						</callout>
						<callout arearefs="CO30-2">
							<para>
								Base64-encoded Ansible Playbook. If you specify a playbook, the <literal>image</literal> must include an <literal>ansible-runner</literal>.
							</para>
						</callout>
					</calloutlist>
					<note>
						<simpara>
							You can use the default <literal>hook-runner</literal> image or specify a custom image. If you specify a custom image, you do not have to specify a playbook.
						</simpara>
					</note>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="6">
				<listitem>
					<simpara>
						Enter the following command to create the network attachment definition (NAD) of the transfer network used for MTV migrations.
					</simpara>
					<simpara>
						You use this definition to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically.
					</simpara>
					<simpara>
						Configuring the IP address enables the interface to reach the configured gateway.
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ oc edit NetworkAttachmentDefinitions &lt;name_of_the_NAD_to_edit&gt;
apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: &lt;name_of_transfer_network&gt;
  namespace: &lt;namespace&gt;
  annotations:
    forklift.konveyor.io/route: &lt;IP_address&gt;</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Create a <literal>Plan</literal> manifest for the migration:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Plan
metadata:
  name: &lt;plan&gt; <co xml:id="CO31-1"></co>
  namespace: &lt;namespace&gt;
  preserveClusterCpuModel: true <co xml:id="CO31-2"></co>
spec:
  warm: false <co xml:id="CO31-3"></co>
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
  map: <co xml:id="CO31-4"></co>
    network: <co xml:id="CO31-5"></co>
      name: &lt;network_map&gt; <co xml:id="CO31-6"></co>
      namespace: &lt;namespace&gt;
    storage: <co xml:id="CO31-7"></co>
      name: &lt;storage_map&gt; <co xml:id="CO31-8"></co>
      namespace: &lt;namespace&gt;
  targetNamespace: &lt;target_namespace&gt;
  vms: <co xml:id="CO31-9"></co>
    - id: &lt;source_vm1&gt; <co xml:id="CO31-10"></co>
    - name: &lt;source_vm2&gt;
      hooks: <co xml:id="CO31-11"></co>
        - hook:
            namespace: &lt;namespace&gt;
            name: &lt;hook&gt; <co xml:id="CO31-12"></co>
          step: &lt;step&gt; <co xml:id="CO31-13"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO31-1">
							<para>
								Specify the name of the <literal>Plan</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO31-2">
							<para>
								See note below.
							</para>
						</callout>
						<callout arearefs="CO31-3">
							<para>
								Specify whether the migration is warm or cold. If you specify a warm migration without specifying a value for the <literal>cutover</literal> parameter in the <literal>Migration</literal> manifest, only the precopy stage will run.
							</para>
						</callout>
						<callout arearefs="CO31-4">
							<para>
								Specify only one network map and one storage map per plan.
							</para>
						</callout>
						<callout arearefs="CO31-5">
							<para>
								Specify a network mapping even if the VMs to be migrated are not assigned to a network. The mapping can be empty in this case.
							</para>
						</callout>
						<callout arearefs="CO31-6">
							<para>
								Specify the name of the <literal>NetworkMap</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO31-7">
							<para>
								Specify a storage mapping even if the VMs to be migrated are not assigned with disk images. The mapping can be empty in this case.
							</para>
						</callout>
						<callout arearefs="CO31-8">
							<para>
								Specify the name of the <literal>StorageMap</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO31-9">
							<para>
								You can use either the <literal>id</literal> or the <literal>name</literal> parameter to specify the source VMs.
							</para>
						</callout>
						<callout arearefs="CO31-10">
							<para>
								Specify the RHV VM UUID.
							</para>
						</callout>
						<callout arearefs="CO31-11">
							<para>
								Optional: Specify up to two hooks for a VM. Each hook must run during a separate migration step.
							</para>
						</callout>
						<callout arearefs="CO31-12">
							<para>
								Specify the name of the <literal>Hook</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO31-13">
							<para>
								Allowed values are <literal>PreHook</literal>, before the migration plan starts, or <literal>PostHook</literal>, after the migration is complete.
							</para>
						</callout>
					</calloutlist>
					<note>
						<itemizedlist>
							<listitem>
								<simpara>
									If the migrated machine is set with a custom CPU model, it will be set with that CPU model in the destination cluster, regardless of the setting of <literal>preserveClusterCpuModel</literal>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									If the migrated machine is <emphasis>not</emphasis> set with a custom CPU model:
								</simpara>
								<itemizedlist>
									<listitem>
										<simpara>
											If <literal>preserveClusterCpuModel</literal> is set to 'true`, MTV checks the CPU model of the VM when it runs in RHV, based on the cluster’s configuration, and then sets the migrated VM with that CPU model.
										</simpara>
									</listitem>
									<listitem>
										<simpara>
											If <literal>preserveClusterCpuModel</literal> is set to 'false`, MTV does not set a CPU type and the VM is set with the default CPU model of the destination cluster.
										</simpara>
									</listitem>
								</itemizedlist>
							</listitem>
						</itemizedlist>
					</note>
				</listitem>
				<listitem>
					<simpara>
						Create a <literal>Migration</literal> manifest to run the <literal>Plan</literal> CR:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Migration
metadata:
  name: &lt;name_of_migration_cr&gt;
  namespace: &lt;namespace&gt;
spec:
  plan:
    name: &lt;name_of_plan_cr&gt;
    namespace: &lt;namespace&gt;
  cutover: &lt;optional_cutover_time&gt;
EOF</programlisting>
					<note>
						<simpara>
							If you specify a cutover time, use the ISO 8601 format with the UTC time offset, for example, <literal>2024-04-04T01:23:45.678+09:00</literal>.
						</simpara>
					</note>
				</listitem>
			</orderedlist>
			<section xml:id="canceling-migration-cli_rhv">
				<title>Canceling a migration from the command-line interface</title>
				<simpara role="_abstract">
					You can use the command-line interface (CLI) to cancel either an entire migration or the migration of specific virtual machines (VMs) while a migration is in progress.
				</simpara>
				<section xml:id="canceling-migration-cli-entire_rhv">
					<title>Canceling an entire migration from the command-line interface</title>
					<simpara role="_abstract">
						You can use the command-line interface (CLI) to cancel an entire migration while a migration is in progress.
					</simpara>
					<itemizedlist>
						<title>Procedure</title>
						<listitem>
							<simpara>
								Delete the <literal>Migration</literal> CR:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc delete migration &lt;migration&gt; -n &lt;namespace&gt; <co xml:id="CO32-1"></co></programlisting>
							<calloutlist>
								<callout arearefs="CO32-1">
									<para>
										Specify the name of the <literal>Migration</literal> CR.
									</para>
								</callout>
							</calloutlist>
						</listitem>
					</itemizedlist>
				</section>
				<section xml:id="canceling-migration-cli-specific_rhv">
					<title>Canceling the migration of specific VMs from the command-line interface</title>
					<simpara role="_abstract">
						You can use the command-line interface (CLI) to cancel the migration of specific virtual machines (VMs) while a migration is in progress.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Add the specific VMs to the <literal>spec.cancel</literal> block of the <literal>Migration</literal> manifest, following this example:
							</simpara>
							
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Migration
metadata:
  name: &lt;migration&gt;
  namespace: &lt;namespace&gt;
...
spec:
  cancel:
  - id: vm-102 <co xml:id="CO33-1"></co>
  - id: vm-203
    name: rhel8-vm
EOF</programlisting>
							<calloutlist>
								<callout arearefs="CO33-1">
									<para>
										You can specify a VM by using the <literal>id</literal> key or the <literal>name</literal> key.
									</para>
								</callout>
							</calloutlist>
							<simpara>
								The value of the <literal>id</literal> key is the <emphasis>managed object reference</emphasis>, for a VMware VM, or the <emphasis>VM UUID</emphasis>, for a RHV VM.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Retrieve the <literal>Migration</literal> custom resource (CR) to monitor the progress of the remaining VMs, following this example:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc get migration/&lt;migration&gt; -n &lt;namespace&gt; -o yaml</programlisting>
						</listitem>
					</orderedlist>
				</section>
			</section>
		</section>
		<section xml:id="new-migrating-virtual-machines-cli_ostack">
			<title>Migrating from an OpenStack source provider</title>
			<simpara role="_abstract">
				You can migrate from an OpenStack source provider by using the command-line interface (CLI).
			</simpara>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Create a <literal>Secret</literal> manifest for the source provider credentials:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: &lt;secret&gt;
  namespace: &lt;namespace&gt;
  ownerReferences: <co xml:id="CO34-1"></co>
    - apiVersion: forklift.konveyor.io/v1beta1
      kind: Provider
      name: &lt;provider_name&gt;
      uid: &lt;provider_uid&gt;
  labels:
    createdForProviderType: openstack
    createdForResourceType: providers
type: Opaque
stringData:
  user: &lt;user&gt; <co xml:id="CO34-2"></co>
  password: &lt;password&gt; <co xml:id="CO34-3"></co>
  insecureSkipVerify: &lt;"true"/"false"&gt; <co xml:id="CO34-4"></co>
  domainName: &lt;domain_name&gt;
  projectName: &lt;project_name&gt;
  regionName: &lt;region_name&gt;
  cacert: | <co xml:id="CO34-5"></co>
    &lt;ca_certificate&gt;
  url: &lt;api_end_point&gt; <co xml:id="CO34-6"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO34-1">
							<para>
								The <literal>ownerReferences</literal> section is optional.
							</para>
						</callout>
						<callout arearefs="CO34-2">
							<para>
								Specify the OpenStack user.
							</para>
						</callout>
						<callout arearefs="CO34-3">
							<para>
								Specify the user OpenStack password.
							</para>
						</callout>
						<callout arearefs="CO34-4">
							<para>
								Specify <literal>"true"</literal> to skip certificate verification, and specify <literal>"false"</literal> to verify the certificate. Defaults to <literal>"false"</literal> if not specified. Skipping certificate verification proceeds with an insecure migration and then the certificate is not required. Insecure migration means that the transferred data is sent over an insecure connection and potentially sensitive data could be exposed.
							</para>
						</callout>
						<callout arearefs="CO34-5">
							<para>
								When this field is not set and <emphasis>skip certificate verification</emphasis> is disabled, MTV attempts to use the system CA.
							</para>
						</callout>
						<callout arearefs="CO34-6">
							<para>
								Specify the API endpoint URL, for example, <literal>https://&lt;identity_service&gt;/v3</literal>.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="2">
				<listitem>
					<simpara>
						Create a <literal>Provider</literal> manifest for the source provider:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Provider
metadata:
  name: &lt;source_provider&gt;
  namespace: &lt;namespace&gt;
spec:
  type: openstack
  url: &lt;api_end_point&gt; <co xml:id="CO35-1"></co>
  secret:
    name: &lt;secret&gt; <co xml:id="CO35-2"></co>
    namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO35-1">
							<para>
								Specify the URL of the API endpoint.
							</para>
						</callout>
						<callout arearefs="CO35-2">
							<para>
								Specify the name of provider <literal>Secret</literal> CR.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="3">
				<listitem>
					<simpara>
						Create a <literal>NetworkMap</literal> manifest to map the source and destination networks:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <co xml:id="CO36-1"></co>
      source:<co xml:id="CO36-2"></co>
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
    - destination:
        name: &lt;network_attachment_definition&gt; <co xml:id="CO36-3"></co>
        namespace: &lt;network_attachment_definition_namespace&gt; <co xml:id="CO36-4"></co>
        type: multus
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO36-1">
							<para>
								Allowed values are <literal>pod</literal> and <literal>multus</literal>.
							</para>
						</callout>
						<callout arearefs="CO36-2">
							<para>
								You can use either the <literal>id</literal> or the <literal>name</literal> parameter to specify the source network. For <literal>id</literal>, specify the OpenStack network UUID.
							</para>
						</callout>
						<callout arearefs="CO36-3">
							<para>
								Specify a network attachment definition for each additional OpenShift Virtualization network.
							</para>
						</callout>
						<callout arearefs="CO36-4">
							<para>
								Required only when <literal>type</literal> is <literal>multus</literal>. Specify the namespace of the OpenShift Virtualization network attachment definition.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="4">
				<listitem>
					<simpara>
						Create a <literal>StorageMap</literal> manifest to map source and destination storage:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <co xml:id="CO37-1"></co>
      source:
        id: &lt;source_volume_type&gt; <co xml:id="CO37-2"></co>
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO37-1">
							<para>
								Allowed values are <literal>ReadWriteOnce</literal> and <literal>ReadWriteMany</literal>.
							</para>
						</callout>
						<callout arearefs="CO37-2">
							<para>
								Specify the OpenStack <literal>volume_type</literal> UUID. For example, <literal>f2737930-b567-451a-9ceb-2887f6207009</literal>.
							</para>
						</callout>
					</calloutlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Create a <literal>Hook</literal> manifest to run custom code on a VM during the phase specified in the <literal>Plan</literal> CR:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Hook
metadata:
  name: &lt;hook&gt;
  namespace: &lt;namespace&gt;
spec:
  image: quay.io/kubev2v/hook-runner
  serviceAccount:&lt;service account&gt; <co xml:id="CO38-1"></co>
  playbook: |
    LS0tCi0gbm... <co xml:id="CO38-2"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO38-1">
							<para>
								Optional: Red Hat OpenShift service account. Use the <literal>serviceAccount</literal> parameter to modify any cluster resources.
							</para>
						</callout>
						<callout arearefs="CO38-2">
							<para>
								Base64-encoded Ansible Playbook. If you specify a playbook, the <literal>image</literal> must include an <literal>ansible-runner</literal>.
							</para>
						</callout>
					</calloutlist>
					<note>
						<simpara>
							You can use the default <literal>hook-runner</literal> image or specify a custom image. If you specify a custom image, you do not have to specify a playbook.
						</simpara>
					</note>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="6">
				<listitem>
					<simpara>
						Enter the following command to create the network attachment definition (NAD) of the transfer network used for MTV migrations.
					</simpara>
					<simpara>
						You use this definition to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically.
					</simpara>
					<simpara>
						Configuring the IP address enables the interface to reach the configured gateway.
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ oc edit NetworkAttachmentDefinitions &lt;name_of_the_NAD_to_edit&gt;
apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: &lt;name_of_transfer_network&gt;
  namespace: &lt;namespace&gt;
  annotations:
    forklift.konveyor.io/route: &lt;IP_address&gt;</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Create a <literal>Plan</literal> manifest for the migration:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Plan
metadata:
  name: &lt;plan&gt; <co xml:id="CO39-1"></co>
  namespace: &lt;namespace&gt;
spec:
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
  map: <co xml:id="CO39-2"></co>
    network: <co xml:id="CO39-3"></co>
      name: &lt;network_map&gt; <co xml:id="CO39-4"></co>
      namespace: &lt;namespace&gt;
    storage: <co xml:id="CO39-5"></co>
      name: &lt;storage_map&gt; <co xml:id="CO39-6"></co>
      namespace: &lt;namespace&gt;
  targetNamespace: &lt;target_namespace&gt;
  vms: <co xml:id="CO39-7"></co>
    - id: &lt;source_vm1&gt; <co xml:id="CO39-8"></co>
    - name: &lt;source_vm2&gt;
      hooks: <co xml:id="CO39-9"></co>
        - hook:
            namespace: &lt;namespace&gt;
            name: &lt;hook&gt; <co xml:id="CO39-10"></co>
          step: &lt;step&gt; <co xml:id="CO39-11"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO39-1">
							<para>
								Specify the name of the <literal>Plan</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO39-2">
							<para>
								Specify only one network map and one storage map per plan.
							</para>
						</callout>
						<callout arearefs="CO39-3">
							<para>
								Specify a network mapping, even if the VMs to be migrated are not assigned to a network. The mapping can be empty in this case.
							</para>
						</callout>
						<callout arearefs="CO39-4">
							<para>
								Specify the name of the <literal>NetworkMap</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO39-5">
							<para>
								Specify a storage mapping, even if the VMs to be migrated are not assigned with disk images. The mapping can be empty in this case.
							</para>
						</callout>
						<callout arearefs="CO39-6">
							<para>
								Specify the name of the <literal>StorageMap</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO39-7">
							<para>
								You can use either the <literal>id</literal> or the <literal>name</literal> parameter to specify the source VMs.
							</para>
						</callout>
						<callout arearefs="CO39-8">
							<para>
								Specify the OpenStack VM UUID.
							</para>
						</callout>
						<callout arearefs="CO39-9">
							<para>
								Optional: Specify up to two hooks for a VM. Each hook must run during a separate migration step.
							</para>
						</callout>
						<callout arearefs="CO39-10">
							<para>
								Specify the name of the <literal>Hook</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO39-11">
							<para>
								Allowed values are <literal>PreHook</literal>, before the migration plan starts, or <literal>PostHook</literal>, after the migration is complete.
							</para>
						</callout>
					</calloutlist>
				</listitem>
				<listitem>
					<simpara>
						Create a <literal>Migration</literal> manifest to run the <literal>Plan</literal> CR:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Migration
metadata:
  name: &lt;name_of_migration_cr&gt;
  namespace: &lt;namespace&gt;
spec:
  plan:
    name: &lt;name_of_plan_cr&gt;
    namespace: &lt;namespace&gt;
  cutover: &lt;optional_cutover_time&gt;
EOF</programlisting>
					<note>
						<simpara>
							If you specify a cutover time, use the ISO 8601 format with the UTC time offset, for example, <literal>2024-04-04T01:23:45.678+09:00</literal>.
						</simpara>
					</note>
				</listitem>
			</orderedlist>
			<section xml:id="canceling-migration-cli_ostack">
				<title>Canceling a migration from the command-line interface</title>
				<simpara role="_abstract">
					You can use the command-line interface (CLI) to cancel either an entire migration or the migration of specific virtual machines (VMs) while a migration is in progress.
				</simpara>
				<section xml:id="canceling-migration-cli-entire_ostack">
					<title>Canceling an entire migration from the command-line interface</title>
					<simpara role="_abstract">
						You can use the command-line interface (CLI) to cancel an entire migration while a migration is in progress.
					</simpara>
					<itemizedlist>
						<title>Procedure</title>
						<listitem>
							<simpara>
								Delete the <literal>Migration</literal> CR:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc delete migration &lt;migration&gt; -n &lt;namespace&gt; <co xml:id="CO40-1"></co></programlisting>
							<calloutlist>
								<callout arearefs="CO40-1">
									<para>
										Specify the name of the <literal>Migration</literal> CR.
									</para>
								</callout>
							</calloutlist>
						</listitem>
					</itemizedlist>
				</section>
				<section xml:id="canceling-migration-cli-specific_ostack">
					<title>Canceling the migration of specific VMs from the command-line interface</title>
					<simpara role="_abstract">
						You can use the command-line interface (CLI) to cancel the migration of specific virtual machines (VMs) while a migration is in progress.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Add the specific VMs to the <literal>spec.cancel</literal> block of the <literal>Migration</literal> manifest, following this example:
							</simpara>
							
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Migration
metadata:
  name: &lt;migration&gt;
  namespace: &lt;namespace&gt;
...
spec:
  cancel:
  - id: vm-102 <co xml:id="CO41-1"></co>
  - id: vm-203
    name: rhel8-vm
EOF</programlisting>
							<calloutlist>
								<callout arearefs="CO41-1">
									<para>
										You can specify a VM by using the <literal>id</literal> key or the <literal>name</literal> key.
									</para>
								</callout>
							</calloutlist>
							<simpara>
								The value of the <literal>id</literal> key is the <emphasis>managed object reference</emphasis>, for a VMware VM, or the <emphasis>VM UUID</emphasis>, for a RHV VM.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Retrieve the <literal>Migration</literal> custom resource (CR) to monitor the progress of the remaining VMs, following this example:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc get migration/&lt;migration&gt; -n &lt;namespace&gt; -o yaml</programlisting>
						</listitem>
					</orderedlist>
				</section>
			</section>
		</section>
		<section xml:id="new-migrating-virtual-machines-cli_ova">
			<title>Migrating from an Open Virtual Appliance (OVA) source provider</title>
			<simpara role="_abstract">
				You can migrate from Open Virtual Appliance (OVA) files that were created by VMware vSphere as a source provider by using the command-line interface (CLI).
			</simpara>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Create a <literal>Secret</literal> manifest for the source provider credentials:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: &lt;secret&gt;
  namespace: &lt;namespace&gt;
  ownerReferences: <co xml:id="CO42-1"></co>
    - apiVersion: forklift.konveyor.io/v1beta1
      kind: Provider
      name: &lt;provider_name&gt;
      uid: &lt;provider_uid&gt;
  labels:
    createdForProviderType: ova
    createdForResourceType: providers
type: Opaque
stringData:
  url: &lt;nfs_server:/nfs_path&gt; <co xml:id="CO42-2"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO42-1">
							<para>
								The <literal>ownerReferences</literal> section is optional.
							</para>
						</callout>
						<callout arearefs="CO42-2">
							<para>
								where: <literal>nfs_server</literal> is an IP or hostname of the server where the share was created and <literal>nfs_path</literal> is the path on the server where the OVA files are stored.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="2">
				<listitem>
					<simpara>
						Create a <literal>Provider</literal> manifest for the source provider:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Provider
metadata:
  name: &lt;source_provider&gt;
  namespace: &lt;namespace&gt;
spec:
  type: ova
  url:  &lt;nfs_server:/nfs_path&gt; <co xml:id="CO43-1"></co>
  secret:
    name: &lt;secret&gt; <co xml:id="CO43-2"></co>
    namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO43-1">
							<para>
								where: <literal>nfs_server</literal> is an IP or hostname of the server where the share was created and <literal>nfs_path</literal> is the path on the server where the OVA files are stored.
							</para>
						</callout>
						<callout arearefs="CO43-2">
							<para>
								Specify the name of provider <literal>Secret</literal> CR.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="3">
				<listitem>
					<simpara>
						Create a <literal>NetworkMap</literal> manifest to map the source and destination networks:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <co xml:id="CO44-1"></co>
      source:
        id: &lt;source_network_id&gt; <co xml:id="CO44-2"></co>
    - destination:
        name: &lt;network_attachment_definition&gt; <co xml:id="CO44-3"></co>
        namespace: &lt;network_attachment_definition_namespace&gt; <co xml:id="CO44-4"></co>
        type: multus
      source:
        id: &lt;source_network_id&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO44-1">
							<para>
								Allowed values are <literal>pod</literal> and <literal>multus</literal>.
							</para>
						</callout>
						<callout arearefs="CO44-2">
							<para>
								Specify the OVA network Universal Unique ID (UUID).
							</para>
						</callout>
						<callout arearefs="CO44-3">
							<para>
								Specify a network attachment definition for each additional OpenShift Virtualization network.
							</para>
						</callout>
						<callout arearefs="CO44-4">
							<para>
								Required only when <literal>type</literal> is <literal>multus</literal>. Specify the namespace of the OpenShift Virtualization network attachment definition.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="4">
				<listitem>
					<simpara>
						Create a <literal>StorageMap</literal> manifest to map source and destination storage:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <co xml:id="CO45-1"></co>
      source:
        name:  Dummy storage for source provider &lt;provider_name&gt; <co xml:id="CO45-2"></co>
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO45-1">
							<para>
								Allowed values are <literal>ReadWriteOnce</literal> and <literal>ReadWriteMany</literal>.
							</para>
						</callout>
						<callout arearefs="CO45-2">
							<para>
								For OVA, the <literal>StorageMap</literal> can map only a single storage, which all the disks from the OVA are associated with, to a storage class at the destination. For this reason, the storage is referred to in the UI as "Dummy storage for source provider &lt;provider_name&gt;". In the YAML, write the phrase as it appears above, without the quotation marks and replacing &lt;provider_name&gt; with the actual name of the provider.
							</para>
						</callout>
					</calloutlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Create a <literal>Hook</literal> manifest to run custom code on a VM during the phase specified in the <literal>Plan</literal> CR:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Hook
metadata:
  name: &lt;hook&gt;
  namespace: &lt;namespace&gt;
spec:
  image: quay.io/kubev2v/hook-runner
  serviceAccount:&lt;service account&gt; <co xml:id="CO46-1"></co>
  playbook: |
    LS0tCi0gbm... <co xml:id="CO46-2"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO46-1">
							<para>
								Optional: Red Hat OpenShift service account. Use the <literal>serviceAccount</literal> parameter to modify any cluster resources.
							</para>
						</callout>
						<callout arearefs="CO46-2">
							<para>
								Base64-encoded Ansible Playbook. If you specify a playbook, the <literal>image</literal> must include an <literal>ansible-runner</literal>.
							</para>
						</callout>
					</calloutlist>
					<note>
						<simpara>
							You can use the default <literal>hook-runner</literal> image or specify a custom image. If you specify a custom image, you do not have to specify a playbook.
						</simpara>
					</note>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="6">
				<listitem>
					<simpara>
						Enter the following command to create the network attachment definition (NAD) of the transfer network used for MTV migrations.
					</simpara>
					<simpara>
						You use this definition to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically.
					</simpara>
					<simpara>
						Configuring the IP address enables the interface to reach the configured gateway.
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ oc edit NetworkAttachmentDefinitions &lt;name_of_the_NAD_to_edit&gt;
apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: &lt;name_of_transfer_network&gt;
  namespace: &lt;namespace&gt;
  annotations:
    forklift.konveyor.io/route: &lt;IP_address&gt;</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Create a <literal>Plan</literal> manifest for the migration:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Plan
metadata:
  name: &lt;plan&gt; <co xml:id="CO47-1"></co>
  namespace: &lt;namespace&gt;
spec:
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
  map: <co xml:id="CO47-2"></co>
    network: <co xml:id="CO47-3"></co>
      name: &lt;network_map&gt; <co xml:id="CO47-4"></co>
      namespace: &lt;namespace&gt;
    storage: <co xml:id="CO47-5"></co>
      name: &lt;storage_map&gt; <co xml:id="CO47-6"></co>
      namespace: &lt;namespace&gt;
  targetNamespace: &lt;target_namespace&gt;
  vms: <co xml:id="CO47-7"></co>
    - id: &lt;source_vm1&gt; <co xml:id="CO47-8"></co>
    - name: &lt;source_vm2&gt;
      hooks: <co xml:id="CO47-9"></co>
        - hook:
            namespace: &lt;namespace&gt;
            name: &lt;hook&gt; <co xml:id="CO47-10"></co>
          step: &lt;step&gt; <co xml:id="CO47-11"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO47-1">
							<para>
								Specify the name of the <literal>Plan</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO47-2">
							<para>
								Specify only one network map and one storage map per plan.
							</para>
						</callout>
						<callout arearefs="CO47-3">
							<para>
								Specify a network mapping, even if the VMs to be migrated are not assigned to a network. The mapping can be empty in this case.
							</para>
						</callout>
						<callout arearefs="CO47-4">
							<para>
								Specify the name of the <literal>NetworkMap</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO47-5">
							<para>
								Specify a storage mapping even if the VMs to be migrated are not assigned with disk images. The mapping can be empty in this case.
							</para>
						</callout>
						<callout arearefs="CO47-6">
							<para>
								Specify the name of the <literal>StorageMap</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO47-7">
							<para>
								You can use either the <literal>id</literal> or the <literal>name</literal> parameter to specify the source VMs.
							</para>
						</callout>
						<callout arearefs="CO47-8">
							<para>
								Specify the OVA VM UUID.
							</para>
						</callout>
						<callout arearefs="CO47-9">
							<para>
								Optional: You can specify up to two hooks for a VM. Each hook must run during a separate migration step.
							</para>
						</callout>
						<callout arearefs="CO47-10">
							<para>
								Specify the name of the <literal>Hook</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO47-11">
							<para>
								Allowed values are <literal>PreHook</literal>, before the migration plan starts, or <literal>PostHook</literal>, after the migration is complete.
							</para>
						</callout>
					</calloutlist>
				</listitem>
				<listitem>
					<simpara>
						Create a <literal>Migration</literal> manifest to run the <literal>Plan</literal> CR:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Migration
metadata:
  name: &lt;name_of_migration_cr&gt;
  namespace: &lt;namespace&gt;
spec:
  plan:
    name: &lt;name_of_plan_cr&gt;
    namespace: &lt;namespace&gt;
  cutover: &lt;optional_cutover_time&gt;
EOF</programlisting>
					<note>
						<simpara>
							If you specify a cutover time, use the ISO 8601 format with the UTC time offset, for example, <literal>2024-04-04T01:23:45.678+09:00</literal>.
						</simpara>
					</note>
				</listitem>
			</orderedlist>
			<section xml:id="canceling-migration-cli_ova">
				<title>Canceling a migration from the command-line interface</title>
				<simpara role="_abstract">
					You can use the command-line interface (CLI) to cancel either an entire migration or the migration of specific virtual machines (VMs) while a migration is in progress.
				</simpara>
				<section xml:id="canceling-migration-cli-entire_ova">
					<title>Canceling an entire migration from the command-line interface</title>
					<simpara role="_abstract">
						You can use the command-line interface (CLI) to cancel an entire migration while a migration is in progress.
					</simpara>
					<itemizedlist>
						<title>Procedure</title>
						<listitem>
							<simpara>
								Delete the <literal>Migration</literal> CR:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc delete migration &lt;migration&gt; -n &lt;namespace&gt; <co xml:id="CO48-1"></co></programlisting>
							<calloutlist>
								<callout arearefs="CO48-1">
									<para>
										Specify the name of the <literal>Migration</literal> CR.
									</para>
								</callout>
							</calloutlist>
						</listitem>
					</itemizedlist>
				</section>
				<section xml:id="canceling-migration-cli-specific_ova">
					<title>Canceling the migration of specific VMs from the command-line interface</title>
					<simpara role="_abstract">
						You can use the command-line interface (CLI) to cancel the migration of specific virtual machines (VMs) while a migration is in progress.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Add the specific VMs to the <literal>spec.cancel</literal> block of the <literal>Migration</literal> manifest, following this example:
							</simpara>
							
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Migration
metadata:
  name: &lt;migration&gt;
  namespace: &lt;namespace&gt;
...
spec:
  cancel:
  - id: vm-102 <co xml:id="CO49-1"></co>
  - id: vm-203
    name: rhel8-vm
EOF</programlisting>
							<calloutlist>
								<callout arearefs="CO49-1">
									<para>
										You can specify a VM by using the <literal>id</literal> key or the <literal>name</literal> key.
									</para>
								</callout>
							</calloutlist>
							<simpara>
								The value of the <literal>id</literal> key is the <emphasis>managed object reference</emphasis>, for a VMware VM, or the <emphasis>VM UUID</emphasis>, for a RHV VM.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Retrieve the <literal>Migration</literal> custom resource (CR) to monitor the progress of the remaining VMs, following this example:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc get migration/&lt;migration&gt; -n &lt;namespace&gt; -o yaml</programlisting>
						</listitem>
					</orderedlist>
				</section>
			</section>
		</section>
		<section xml:id="new-migrating-virtual-machines-cli_cnv">
			<title>Migrating from a Red Hat OpenShift Virtualization source provider</title>
			<simpara role="_abstract">
				You can use a Red Hat OpenShift Virtualization provider as either a source provider or as a destination provider. You can migrate from an OpenShift Virtualization source provider by using the command-line interface (CLI).
			</simpara>
			<note>
				<simpara>
					The Red Hat OpenShift cluster version of the source provider must be 4.16 or later.
				</simpara>
			</note>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Create a <literal>Secret</literal> manifest for the source provider credentials:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: &lt;secret&gt;
  namespace: &lt;namespace&gt;
  ownerReferences: <co xml:id="CO50-1"></co>
    - apiVersion: forklift.konveyor.io/v1beta1
      kind: Provider
      name: &lt;provider_name&gt;
      uid: &lt;provider_uid&gt;
  labels:
    createdForProviderType: openshift
    createdForResourceType: providers
type: Opaque
stringData:
  token: &lt;token&gt; <co xml:id="CO50-2"></co>
  password: &lt;password&gt; <co xml:id="CO50-3"></co>
  insecureSkipVerify: &lt;"true"/"false"&gt; <co xml:id="CO50-4"></co>
  cacert: | <co xml:id="CO50-5"></co>
    &lt;ca_certificate&gt;
  url: &lt;api_end_point&gt; <co xml:id="CO50-6"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO50-1">
							<para>
								The <literal>ownerReferences</literal> section is optional.
							</para>
						</callout>
						<callout arearefs="CO50-2">
							<para>
								Specify a token for a service account with <literal>cluster-admin</literal> privileges. If both <literal>token</literal> and <literal>url</literal> are left blank, the local OpenShift cluster is used.
							</para>
						</callout>
						<callout arearefs="CO50-3">
							<para>
								Specify the user password.
							</para>
						</callout>
						<callout arearefs="CO50-4">
							<para>
								Specify <literal>"true"</literal> to skip certificate verification, and specify <literal>"false"</literal> to verify the certificate. Defaults to <literal>"false"</literal> if not specified. Skipping certificate verification proceeds with an insecure migration and then the certificate is not required. Insecure migration means that the transferred data is sent over an insecure connection and potentially sensitive data could be exposed.
							</para>
						</callout>
						<callout arearefs="CO50-5">
							<para>
								When this field is not set and <emphasis>skip certificate verification</emphasis> is disabled, MTV attempts to use the system CA.
							</para>
						</callout>
						<callout arearefs="CO50-6">
							<para>
								Specify the URL of the endpoint of the API server.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="2">
				<listitem>
					<simpara>
						Create a <literal>Provider</literal> manifest for the source provider:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Provider
metadata:
  name: &lt;source_provider&gt;
  namespace: &lt;namespace&gt;
spec:
  type: openshift
  url: &lt;api_end_point&gt; <co xml:id="CO51-1"></co>
  secret:
    name: &lt;secret&gt; <co xml:id="CO51-2"></co>
    namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO51-1">
							<para>
								Specify the URL of the endpoint of the API server.
							</para>
						</callout>
						<callout arearefs="CO51-2">
							<para>
								Specify the name of provider <literal>Secret</literal> CR.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="3">
				<listitem>
					<simpara>
						Create a <literal>NetworkMap</literal> manifest to map the source and destination networks:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <co xml:id="CO52-1"></co>
      source:
        name: &lt;network_name&gt;
        type: pod
    - destination:
        name: &lt;network_attachment_definition&gt; <co xml:id="CO52-2"></co>
        namespace: &lt;network_attachment_definition_namespace&gt; <co xml:id="CO52-3"></co>
        type: multus
      source:
        name: &lt;network_attachment_definition&gt;
        namespace: &lt;network_attachment_definition_namespace&gt;
        type: multus
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO52-1">
							<para>
								Allowed values are <literal>pod</literal>, <literal>ignored</literal>, and <literal>multus</literal>.
							</para>
						</callout>
						<callout arearefs="CO52-2">
							<para>
								Specify the network name. When the <literal>type</literal> is <literal>multus</literal>, use the OpenShift Virtualization network attachment definition name.
							</para>
						</callout>
						<callout arearefs="CO52-3">
							<para>
								Required only when the <literal>type</literal> is <literal>multus</literal>. Specify the namespace of the OpenShift Virtualization network attachment definition.
							</para>
						</callout>
					</calloutlist>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="4">
				<listitem>
					<simpara>
						Create a <literal>StorageMap</literal> manifest to map source and destination storage:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <co xml:id="CO53-1"></co>
      source:
        name: &lt;storage_class&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO53-1">
							<para>
								Allowed values are <literal>ReadWriteOnce</literal> and <literal>ReadWriteMany</literal>.
							</para>
						</callout>
					</calloutlist>
				</listitem>
				<listitem>
					<simpara>
						Optional: Create a <literal>Hook</literal> manifest to run custom code on a VM during the phase specified in the <literal>Plan</literal> CR:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Hook
metadata:
  name: &lt;hook&gt;
  namespace: &lt;namespace&gt;
spec:
  image: quay.io/kubev2v/hook-runner
  serviceAccount:&lt;service account&gt; <co xml:id="CO54-1"></co>
  playbook: |
    LS0tCi0gbm... <co xml:id="CO54-2"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO54-1">
							<para>
								Optional: Red Hat OpenShift service account. Use the <literal>serviceAccount</literal> parameter to modify any cluster resources.
							</para>
						</callout>
						<callout arearefs="CO54-2">
							<para>
								Base64-encoded Ansible Playbook. If you specify a playbook, the <literal>image</literal> must include an <literal>ansible-runner</literal>.
							</para>
						</callout>
					</calloutlist>
					<note>
						<simpara>
							You can use the default <literal>hook-runner</literal> image or specify a custom image. If you specify a custom image, you do not have to specify a playbook.
						</simpara>
					</note>
				</listitem>
			</orderedlist>
			<orderedlist numeration="arabic" startingnumber="6">
				<listitem>
					<simpara>
						Enter the following command to create the network attachment definition (NAD) of the transfer network used for MTV migrations.
					</simpara>
					<simpara>
						You use this definition to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically.
					</simpara>
					<simpara>
						Configuring the IP address enables the interface to reach the configured gateway.
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ oc edit NetworkAttachmentDefinitions &lt;name_of_the_NAD_to_edit&gt;
apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: &lt;name_of_transfer_network&gt;
  namespace: &lt;namespace&gt;
  annotations:
    forklift.konveyor.io/route: &lt;IP_address&gt;</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Create a <literal>Plan</literal> manifest for the migration:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Plan
metadata:
  name: &lt;plan&gt; <co xml:id="CO55-1"></co>
  namespace: &lt;namespace&gt;
spec:
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
  map: <co xml:id="CO55-2"></co>
    network: <co xml:id="CO55-3"></co>
      name: &lt;network_map&gt; <co xml:id="CO55-4"></co>
      namespace: &lt;namespace&gt;
    storage: <co xml:id="CO55-5"></co>
      name: &lt;storage_map&gt; <co xml:id="CO55-6"></co>
      namespace: &lt;namespace&gt;
  targetNamespace: &lt;target_namespace&gt;
  vms:
    - name: &lt;source_vm&gt;
      namespace: &lt;namespace&gt;
      hooks: <co xml:id="CO55-7"></co>
        - hook:
            namespace: &lt;namespace&gt;
            name: &lt;hook&gt; <co xml:id="CO55-8"></co>
          step: &lt;step&gt; <co xml:id="CO55-9"></co>
EOF</programlisting>
					<calloutlist>
						<callout arearefs="CO55-1">
							<para>
								Specify the name of the <literal>Plan</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO55-2">
							<para>
								Specify only one network map and one storage map per plan.
							</para>
						</callout>
						<callout arearefs="CO55-3">
							<para>
								Specify a network mapping, even if the VMs to be migrated are not assigned to a network. The mapping can be empty in this case.
							</para>
						</callout>
						<callout arearefs="CO55-4">
							<para>
								Specify the name of the <literal>NetworkMap</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO55-5">
							<para>
								Specify a storage mapping, even if the VMs to be migrated are not assigned with disk images. The mapping can be empty in this case.
							</para>
						</callout>
						<callout arearefs="CO55-6">
							<para>
								Specify the name of the <literal>StorageMap</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO55-7">
							<para>
								Optional: Specify up to two hooks for a VM. Each hook must run during a separate migration step.
							</para>
						</callout>
						<callout arearefs="CO55-8">
							<para>
								Specify the name of the <literal>Hook</literal> CR.
							</para>
						</callout>
						<callout arearefs="CO55-9">
							<para>
								Allowed values are <literal>PreHook</literal>, before the migration plan starts, or <literal>PostHook</literal>, after the migration is complete.
							</para>
						</callout>
					</calloutlist>
				</listitem>
				<listitem>
					<simpara>
						Create a <literal>Migration</literal> manifest to run the <literal>Plan</literal> CR:
					</simpara>
					
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Migration
metadata:
  name: &lt;name_of_migration_cr&gt;
  namespace: &lt;namespace&gt;
spec:
  plan:
    name: &lt;name_of_plan_cr&gt;
    namespace: &lt;namespace&gt;
  cutover: &lt;optional_cutover_time&gt;
EOF</programlisting>
					<note>
						<simpara>
							If you specify a cutover time, use the ISO 8601 format with the UTC time offset, for example, <literal>2024-04-04T01:23:45.678+09:00</literal>.
						</simpara>
					</note>
				</listitem>
			</orderedlist>
			<section xml:id="canceling-migration-cli_cnv">
				<title>Canceling a migration from the command-line interface</title>
				<simpara role="_abstract">
					You can use the command-line interface (CLI) to cancel either an entire migration or the migration of specific virtual machines (VMs) while a migration is in progress.
				</simpara>
				<section xml:id="canceling-migration-cli-entire_cnv">
					<title>Canceling an entire migration from the command-line interface</title>
					<simpara role="_abstract">
						You can use the command-line interface (CLI) to cancel an entire migration while a migration is in progress.
					</simpara>
					<itemizedlist>
						<title>Procedure</title>
						<listitem>
							<simpara>
								Delete the <literal>Migration</literal> CR:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc delete migration &lt;migration&gt; -n &lt;namespace&gt; <co xml:id="CO56-1"></co></programlisting>
							<calloutlist>
								<callout arearefs="CO56-1">
									<para>
										Specify the name of the <literal>Migration</literal> CR.
									</para>
								</callout>
							</calloutlist>
						</listitem>
					</itemizedlist>
				</section>
				<section xml:id="canceling-migration-cli-specific_cnv">
					<title>Canceling the migration of specific VMs from the command-line interface</title>
					<simpara role="_abstract">
						You can use the command-line interface (CLI) to cancel the migration of specific virtual machines (VMs) while a migration is in progress.
					</simpara>
					<orderedlist numeration="arabic">
						<title>Procedure</title>
						<listitem>
							<simpara>
								Add the specific VMs to the <literal>spec.cancel</literal> block of the <literal>Migration</literal> manifest, following this example:
							</simpara>
							
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Migration
metadata:
  name: &lt;migration&gt;
  namespace: &lt;namespace&gt;
...
spec:
  cancel:
  - id: vm-102 <co xml:id="CO57-1"></co>
  - id: vm-203
    name: rhel8-vm
EOF</programlisting>
							<calloutlist>
								<callout arearefs="CO57-1">
									<para>
										You can specify a VM by using the <literal>id</literal> key or the <literal>name</literal> key.
									</para>
								</callout>
							</calloutlist>
							<simpara>
								The value of the <literal>id</literal> key is the <emphasis>managed object reference</emphasis>, for a VMware VM, or the <emphasis>VM UUID</emphasis>, for a RHV VM.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Retrieve the <literal>Migration</literal> custom resource (CR) to monitor the progress of the remaining VMs, following this example:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc get migration/&lt;migration&gt; -n &lt;namespace&gt; -o yaml</programlisting>
						</listitem>
					</orderedlist>
				</section>
			</section>
		</section>
	</chapter>
	<chapter xml:id="advanced-migration-options_mtv">
		<title>Advanced migration options</title>
		<section xml:id="changing-precopy-intervals_mtv">
			<title>Changing precopy intervals for warm migration</title>
			<simpara role="_abstract">
				You can change the snapshot interval by patching the <literal>ForkliftController</literal> custom resource (CR).
			</simpara>
			<itemizedlist>
				<title>Procedure</title>
				<listitem>
					<simpara>
						Patch the <literal>ForkliftController</literal> CR:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ oc patch forkliftcontroller/&lt;forklift-controller&gt; -n openshift-mtv -p '{"spec": {"controller_precopy_interval": &lt;60&gt;}}' --type=merge <co xml:id="CO58-1"></co></programlisting>
					<calloutlist>
						<callout arearefs="CO58-1">
							<para>
								Specify the precopy interval in minutes. The default value is <literal>60</literal>.
							</para>
						</callout>
					</calloutlist>
					<simpara>
						You do not need to restart the <literal>forklift-controller</literal> pod.
					</simpara>
				</listitem>
			</itemizedlist>
		</section>
		<section xml:id="creating-custom-rules-for-validation-service_mtv">
			<title>Creating custom rules for the Validation service</title>
			<simpara role="_abstract">
				The <literal>Validation</literal> service uses Open Policy Agent (OPA) policy rules to check the suitability of each virtual machine (VM) for migration. The <literal>Validation</literal> service generates a list of <emphasis>concerns</emphasis> for each VM, which are stored in the <literal>Provider Inventory</literal> service as VM attributes. The web console displays the concerns for each VM in the provider inventory.
			</simpara>
			<simpara>
				You can create custom rules to extend the default ruleset of the <literal>Validation</literal> service. For example, you can create a rule that checks whether a VM has multiple disks.
			</simpara>
			<section xml:id="about-rego-files_mtv">
				<title>About Rego files</title>
				<simpara role="_abstract">
					Validation rules are written in <link xlink:href="https://www.openpolicyagent.org/docs/latest/policy-language/">Rego</link>, the Open Policy Agent (OPA) native query language. The rules are stored as <literal>.rego</literal> files in the <literal>/usr/share/opa/policies/io/konveyor/forklift/&lt;provider&gt;</literal> directory of the <literal>Validation</literal> pod.
				</simpara>
				<simpara>
					Each validation rule is defined in a separate <literal>.rego</literal> file and tests for a specific condition. If the condition evaluates as <literal>true</literal>, the rule adds a <literal>{“category”, “label”, “assessment”}</literal> hash to the <literal>concerns</literal>. The <literal>concerns</literal> content is added to the <literal>concerns</literal> key in the inventory record of the VM. The web console displays the content of the <literal>concerns</literal> key for each VM in the provider inventory.
				</simpara>
				<simpara>
					The following <literal>.rego</literal> file example checks for distributed resource scheduling enabled in the cluster of a VMware VM:
				</simpara>
				<formalpara>
					<title>drs_enabled.rego example</title>
					<para>
						
<programlisting language="terminal" linenumbering="unnumbered">package io.konveyor.forklift.vmware <co xml:id="CO59-1"></co>

has_drs_enabled {
    input.host.cluster.drsEnabled <co xml:id="CO59-2"></co>
}

concerns[flag] {
    has_drs_enabled
    flag := {
        "category": "Information",
        "label": "VM running in a DRS-enabled cluster",
        "assessment": "Distributed resource scheduling is not currently supported by OpenShift Virtualization. The VM can be migrated but it will not have this feature in the target environment."
    }
}</programlisting>
					</para>
				</formalpara>
				<calloutlist>
					<callout arearefs="CO59-1">
						<para>
							Each validation rule is defined within a package. The package namespaces are <literal>io.konveyor.forklift.vmware</literal> for VMware and <literal>io.konveyor.forklift.ovirt</literal> for Red Hat Virtualization.
						</para>
					</callout>
					<callout arearefs="CO59-2">
						<para>
							Query parameters are based on the <literal>input</literal> key of the <literal>Validation</literal> service JSON.
						</para>
					</callout>
				</calloutlist>
			</section>
			<section xml:id="accessing-default-validation-rules_mtv">
				<title>Checking the default validation rules</title>
				<simpara role="_abstract">
					Before you create a custom rule, you must check the default rules of the <literal>Validation</literal> service to ensure that you do not create a rule that redefines an existing default value.
				</simpara>
				<simpara>
					Example: If a default rule contains the line <literal>default valid_input = false</literal> and you create a custom rule that contains the line <literal>default valid_input = true</literal>, the <literal>Validation</literal> service will not start.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Connect to the terminal of the <literal>Validation</literal> pod:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ oc rsh &lt;validation_pod&gt;</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Go to the OPA policies directory for your provider:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ cd /usr/share/opa/policies/io/konveyor/forklift/&lt;provider&gt; <co xml:id="CO60-1"></co></programlisting>
						<calloutlist>
							<callout arearefs="CO60-1">
								<para>
									Specify <literal>vmware</literal> or <literal>ovirt</literal>.
								</para>
							</callout>
						</calloutlist>
					</listitem>
					<listitem>
						<simpara>
							Search for the default policies:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ grep -R "default" *</programlisting>
					</listitem>
				</orderedlist>
			</section>
			<section xml:id="creating-validation-rule_mtv">
				<title>Creating a validation rule</title>
				<simpara role="_abstract">
					You create a validation rule by applying a config map custom resource (CR) containing the rule to the <literal>Validation</literal> service.
				</simpara>
				<important>
					<itemizedlist>
						<listitem>
							<simpara>
								If you create a rule with the same <emphasis>name</emphasis> as an existing rule, the <literal>Validation</literal> service performs an <literal>OR</literal> operation with the rules.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								If you create a rule that contradicts a default rule, the <literal>Validation</literal> service will not start.
							</simpara>
						</listitem>
					</itemizedlist>
				</important>
				<formalpara>
					<title>Validation rule example</title>
					<para>
						Validation rules are based on virtual machine (VM) attributes collected by the <literal>Provider Inventory</literal> service.
					</para>
				</formalpara>
				<simpara>
					For example, the VMware API uses this path to check whether a VMware VM has NUMA node affinity configured: <literal>MOR:VirtualMachine.config.extraConfig["numa.nodeAffinity"]</literal>.
				</simpara>
				<simpara>
					The <literal>Provider Inventory</literal> service simplifies this configuration and returns a testable attribute with a list value:
				</simpara>
				
<programlisting language="terminal" linenumbering="unnumbered">"numaNodeAffinity": [
    "0",
    "1"
],</programlisting>
				<simpara>
					You create a <link xlink:href="https://www.openpolicyagent.org/docs/latest/policy-language/">Rego</link> query, based on this attribute, and add it to the <literal>forklift-validation-config</literal> config map:
				</simpara>
				
<programlisting language="terminal" linenumbering="unnumbered">`count(input.numaNodeAffinity) != 0`</programlisting>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Create a config map CR according to the following example:
						</simpara>
						
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: ConfigMap
metadata:
  name: &lt;forklift-validation-config&gt;
  namespace: openshift-mtv
data:
  vmware_multiple_disks.rego: |-
    package &lt;provider_package&gt; <co xml:id="CO61-1"></co>

    has_multiple_disks { <co xml:id="CO61-2"></co>
      count(input.disks) &gt; 1
    }

    concerns[flag] {
      has_multiple_disks <co xml:id="CO61-3"></co>
        flag := {
          "category": "&lt;Information&gt;", <co xml:id="CO61-4"></co>
          "label": "Multiple disks detected",
          "assessment": "Multiple disks detected on this VM."
        }
    }
EOF</programlisting>
						<calloutlist>
							<callout arearefs="CO61-1">
								<para>
									Specify the provider package name. Allowed values are <literal>io.konveyor.forklift.vmware</literal> for VMware and <literal>io.konveyor.forklift.ovirt</literal> for Red Hat Virtualization.
								</para>
							</callout>
							<callout arearefs="CO61-2">
								<para>
									Specify the <literal>concerns</literal> name and Rego query.
								</para>
							</callout>
							<callout arearefs="CO61-3">
								<para>
									Specify the <literal>concerns</literal> name and <literal>flag</literal> parameter values.
								</para>
							</callout>
							<callout arearefs="CO61-4">
								<para>
									Allowed values are <literal>Critical</literal>, <literal>Warning</literal>, and <literal>Information</literal>.
								</para>
							</callout>
						</calloutlist>
					</listitem>
					<listitem>
						<simpara>
							Stop the <literal>Validation</literal> pod by scaling the <literal>forklift-controller</literal> deployment to <literal>0</literal>:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ oc scale -n openshift-mtv --replicas=0 deployment/forklift-controller</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Start the <literal>Validation</literal> pod by scaling the <literal>forklift-controller</literal> deployment to <literal>1</literal>:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ oc scale -n openshift-mtv --replicas=1 deployment/forklift-controller</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Check the <literal>Validation</literal> pod log to verify that the pod started:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ oc logs -f &lt;validation_pod&gt;</programlisting>
						<simpara>
							If the custom rule conflicts with a default rule, the <literal>Validation</literal> pod will not start.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Remove the source provider:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ oc delete provider &lt;provider&gt; -n openshift-mtv</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Add the source provider to apply the new rule:
						</simpara>
						
<programlisting language="yaml" linenumbering="unnumbered">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Provider
metadata:
  name: &lt;provider&gt;
  namespace: openshift-mtv
spec:
  type: &lt;provider_type&gt; <co xml:id="CO62-1"></co>
  url: &lt;api_end_point&gt; <co xml:id="CO62-2"></co>
  secret:
    name: &lt;secret&gt; <co xml:id="CO62-3"></co>
    namespace: openshift-mtv
EOF</programlisting>
						<calloutlist>
							<callout arearefs="CO62-1">
								<para>
									Allowed values are <literal>ovirt</literal>, <literal>vsphere</literal>, and <literal>openstack</literal>.
								</para>
							</callout>
							<callout arearefs="CO62-2">
								<para>
									Specify the API end point URL, for example, <literal>https://&lt;vCenter_host&gt;/sdk</literal> for vSphere, <literal>https://&lt;engine_host&gt;/ovirt-engine/api</literal> for RHV, or <literal>https://&lt;identity_service&gt;/v3</literal> for OpenStack.
								</para>
							</callout>
							<callout arearefs="CO62-3">
								<para>
									Specify the name of the provider <literal>Secret</literal> CR.
								</para>
							</callout>
						</calloutlist>
					</listitem>
				</orderedlist>
				<simpara>
					You must update the rules version after creating a custom rule so that the <literal>Inventory</literal> service detects the changes and validates the VMs.
				</simpara>
			</section>
			<section xml:id="updating-inventory-rules-version_mtv">
				<title>Updating the inventory rules version</title>
				<simpara role="_abstract">
					You must update the inventory rules version each time you update the rules so that the <literal>Provider Inventory</literal> service detects the changes and triggers the <literal>Validation</literal> service.
				</simpara>
				<simpara>
					The rules version is recorded in a <literal>rules_version.rego</literal> file for each provider.
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Retrieve the current rules version:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ GET https://forklift-validation/v1/data/io/konveyor/forklift/&lt;provider&gt;/rules_version <co xml:id="CO63-1"></co></programlisting>
						<formalpara>
							<title>Example output</title>
							<para>
								
<programlisting language="json" linenumbering="unnumbered">{
   "result": {
       "rules_version": 5
   }
}</programlisting>
							</para>
						</formalpara>
					</listitem>
					<listitem>
						<simpara>
							Connect to the terminal of the <literal>Validation</literal> pod:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ oc rsh &lt;validation_pod&gt;</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Update the rules version in the <literal>/usr/share/opa/policies/io/konveyor/forklift/&lt;provider&gt;/rules_version.rego</literal> file.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Log out of the <literal>Validation</literal> pod terminal.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Verify the updated rules version:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ GET https://forklift-validation/v1/data/io/konveyor/forklift/&lt;provider&gt;/rules_version <co xml:id="CO63-2"></co></programlisting>
						<formalpara>
							<title>Example output</title>
							<para>
								
<programlisting language="json" linenumbering="unnumbered">{
   "result": {
       "rules_version": 6
   }
}</programlisting>
							</para>
						</formalpara>
					</listitem>
				</orderedlist>
			</section>
		</section>
		<section xml:id="retrieving-validation-service-json_mtv">
			<title>Retrieving the Inventory service JSON</title>
			<simpara role="_abstract">
				You retrieve the <literal>Inventory</literal> service JSON by sending an <literal>Inventory</literal> service query to a virtual machine (VM). The output contains an <literal>"input"</literal> key, which contains the inventory attributes that are queried by the <literal>Validation</literal> service rules.
			</simpara>
			<simpara>
				You can create a validation rule based on any attribute in the <literal>"input"</literal> key, for example, <literal>input.snapshot.kind</literal>.
			</simpara>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Retrieve the routes for the project:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">oc get route -n openshift-mtv</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Retrieve the <literal>Inventory</literal> service route:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ oc get route &lt;inventory_service&gt; -n openshift-mtv</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Retrieve the access token:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ TOKEN=$(oc whoami -t)</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Trigger an HTTP GET request (for example, using Curl):
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ curl -H "Authorization: Bearer $TOKEN" https://&lt;inventory_service_route&gt;/providers -k</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Retrieve the <literal>UUID</literal> of a provider:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ curl -H "Authorization: Bearer $TOKEN"  https://&lt;inventory_service_route&gt;/providers/&lt;provider&gt; -k <co xml:id="CO63-3"></co></programlisting>
					<calloutlist>
						<callout arearefs="CO63-1 CO63-2 CO63-3">
							<para>
								Allowed values for the provider are <literal>vsphere</literal>, <literal>ovirt</literal>, and <literal>openstack</literal>.
							</para>
						</callout>
					</calloutlist>
				</listitem>
				<listitem>
					<simpara>
						Retrieve the VMs of a provider:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ curl -H "Authorization: Bearer $TOKEN"  https://&lt;inventory_service_route&gt;/providers/&lt;provider&gt;/&lt;UUID&gt;/vms -k</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Retrieve the details of a VM:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ curl -H "Authorization: Bearer $TOKEN"  https://&lt;inventory_service_route&gt;/providers/&lt;provider&gt;/&lt;UUID&gt;/workloads/&lt;vm&gt; -k</programlisting>
					<formalpara>
						<title>Example output</title>
						<para>
							
<programlisting language="yaml" linenumbering="unnumbered">{
    "input": {
        "selfLink": "providers/vsphere/c872d364-d62b-46f0-bd42-16799f40324e/workloads/vm-431",
        "id": "vm-431",
        "parent": {
            "kind": "Folder",
            "id": "group-v22"
        },
        "revision": 1,
        "name": "iscsi-target",
        "revisionValidated": 1,
        "isTemplate": false,
        "networks": [
            {
                "kind": "Network",
                "id": "network-31"
            },
            {
                "kind": "Network",
                "id": "network-33"
            }
        ],
        "disks": [
            {
                "key": 2000,
                "file": "[iSCSI_Datastore] iscsi-target/iscsi-target-000001.vmdk",
                "datastore": {
                    "kind": "Datastore",
                    "id": "datastore-63"
                },
                "capacity": 17179869184,
                "shared": false,
                "rdm": false
            },
            {
                "key": 2001,
                "file": "[iSCSI_Datastore] iscsi-target/iscsi-target_1-000001.vmdk",
                "datastore": {
                    "kind": "Datastore",
                    "id": "datastore-63"
                },
                "capacity": 10737418240,
                "shared": false,
                "rdm": false
            }
        ],
        "concerns": [],
        "policyVersion": 5,
        "uuid": "42256329-8c3a-2a82-54fd-01d845a8bf49",
        "firmware": "bios",
        "powerState": "poweredOn",
        "connectionState": "connected",
        "snapshot": {
            "kind": "VirtualMachineSnapshot",
            "id": "snapshot-3034"
        },
        "changeTrackingEnabled": false,
        "cpuAffinity": [
            0,
            2
        ],
        "cpuHotAddEnabled": true,
        "cpuHotRemoveEnabled": false,
        "memoryHotAddEnabled": false,
        "faultToleranceEnabled": false,
        "cpuCount": 2,
        "coresPerSocket": 1,
        "memoryMB": 2048,
        "guestName": "Red Hat Enterprise Linux 7 (64-bit)",
        "balloonedMemory": 0,
        "ipAddress": "10.19.2.96",
        "storageUsed": 30436770129,
        "numaNodeAffinity": [
            "0",
            "1"
        ],
        "devices": [
            {
                "kind": "RealUSBController"
            }
        ],
        "host": {
            "id": "host-29",
            "parent": {
                "kind": "Cluster",
                "id": "domain-c26"
            },
            "revision": 1,
            "name": "IP address or host name of the vCenter host or RHV Engine host",
            "selfLink": "providers/vsphere/c872d364-d62b-46f0-bd42-16799f40324e/hosts/host-29",
            "status": "green",
            "inMaintenance": false,
            "managementServerIp": "10.19.2.96",
            "thumbprint": &lt;thumbprint&gt;,
            "timezone": "UTC",
            "cpuSockets": 2,
            "cpuCores": 16,
            "productName": "VMware ESXi",
            "productVersion": "6.5.0",
            "networking": {
                "pNICs": [
                    {
                        "key": "key-vim.host.PhysicalNic-vmnic0",
                        "linkSpeed": 10000
                    },
                    {
                        "key": "key-vim.host.PhysicalNic-vmnic1",
                        "linkSpeed": 10000
                    },
                    {
                        "key": "key-vim.host.PhysicalNic-vmnic2",
                        "linkSpeed": 10000
                    },
                    {
                        "key": "key-vim.host.PhysicalNic-vmnic3",
                        "linkSpeed": 10000
                    }
                ],
                "vNICs": [
                    {
                        "key": "key-vim.host.VirtualNic-vmk2",
                        "portGroup": "VM_Migration",
                        "dPortGroup": "",
                        "ipAddress": "192.168.79.13",
                        "subnetMask": "255.255.255.0",
                        "mtu": 9000
                    },
                    {
                        "key": "key-vim.host.VirtualNic-vmk0",
                        "portGroup": "Management Network",
                        "dPortGroup": "",
                        "ipAddress": "10.19.2.13",
                        "subnetMask": "255.255.255.128",
                        "mtu": 1500
                    },
                    {
                        "key": "key-vim.host.VirtualNic-vmk1",
                        "portGroup": "Storage Network",
                        "dPortGroup": "",
                        "ipAddress": "172.31.2.13",
                        "subnetMask": "255.255.0.0",
                        "mtu": 1500
                    },
                    {
                        "key": "key-vim.host.VirtualNic-vmk3",
                        "portGroup": "",
                        "dPortGroup": "dvportgroup-48",
                        "ipAddress": "192.168.61.13",
                        "subnetMask": "255.255.255.0",
                        "mtu": 1500
                    },
                    {
                        "key": "key-vim.host.VirtualNic-vmk4",
                        "portGroup": "VM_DHCP_Network",
                        "dPortGroup": "",
                        "ipAddress": "10.19.2.231",
                        "subnetMask": "255.255.255.128",
                        "mtu": 1500
                    }
                ],
                "portGroups": [
                    {
                        "key": "key-vim.host.PortGroup-VM Network",
                        "name": "VM Network",
                        "vSwitch": "key-vim.host.VirtualSwitch-vSwitch0"
                    },
                    {
                        "key": "key-vim.host.PortGroup-Management Network",
                        "name": "Management Network",
                        "vSwitch": "key-vim.host.VirtualSwitch-vSwitch0"
                    },
                    {
                        "key": "key-vim.host.PortGroup-VM_10G_Network",
                        "name": "VM_10G_Network",
                        "vSwitch": "key-vim.host.VirtualSwitch-vSwitch1"
                    },
                    {
                        "key": "key-vim.host.PortGroup-VM_Storage",
                        "name": "VM_Storage",
                        "vSwitch": "key-vim.host.VirtualSwitch-vSwitch1"
                    },
                    {
                        "key": "key-vim.host.PortGroup-VM_DHCP_Network",
                        "name": "VM_DHCP_Network",
                        "vSwitch": "key-vim.host.VirtualSwitch-vSwitch1"
                    },
                    {
                        "key": "key-vim.host.PortGroup-Storage Network",
                        "name": "Storage Network",
                        "vSwitch": "key-vim.host.VirtualSwitch-vSwitch1"
                    },
                    {
                        "key": "key-vim.host.PortGroup-VM_Isolated_67",
                        "name": "VM_Isolated_67",
                        "vSwitch": "key-vim.host.VirtualSwitch-vSwitch2"
                    },
                    {
                        "key": "key-vim.host.PortGroup-VM_Migration",
                        "name": "VM_Migration",
                        "vSwitch": "key-vim.host.VirtualSwitch-vSwitch2"
                    }
                ],
                "switches": [
                    {
                        "key": "key-vim.host.VirtualSwitch-vSwitch0",
                        "name": "vSwitch0",
                        "portGroups": [
                            "key-vim.host.PortGroup-VM Network",
                            "key-vim.host.PortGroup-Management Network"
                        ],
                        "pNICs": [
                            "key-vim.host.PhysicalNic-vmnic4"
                        ]
                    },
                    {
                        "key": "key-vim.host.VirtualSwitch-vSwitch1",
                        "name": "vSwitch1",
                        "portGroups": [
                            "key-vim.host.PortGroup-VM_10G_Network",
                            "key-vim.host.PortGroup-VM_Storage",
                            "key-vim.host.PortGroup-VM_DHCP_Network",
                            "key-vim.host.PortGroup-Storage Network"
                        ],
                        "pNICs": [
                            "key-vim.host.PhysicalNic-vmnic2",
                            "key-vim.host.PhysicalNic-vmnic0"
                        ]
                    },
                    {
                        "key": "key-vim.host.VirtualSwitch-vSwitch2",
                        "name": "vSwitch2",
                        "portGroups": [
                            "key-vim.host.PortGroup-VM_Isolated_67",
                            "key-vim.host.PortGroup-VM_Migration"
                        ],
                        "pNICs": [
                            "key-vim.host.PhysicalNic-vmnic3",
                            "key-vim.host.PhysicalNic-vmnic1"
                        ]
                    }
                ]
            },
            "networks": [
                {
                    "kind": "Network",
                    "id": "network-31"
                },
                {
                    "kind": "Network",
                    "id": "network-34"
                },
                {
                    "kind": "Network",
                    "id": "network-57"
                },
                {
                    "kind": "Network",
                    "id": "network-33"
                },
                {
                    "kind": "Network",
                    "id": "dvportgroup-47"
                }
            ],
            "datastores": [
                {
                    "kind": "Datastore",
                    "id": "datastore-35"
                },
                {
                    "kind": "Datastore",
                    "id": "datastore-63"
                }
            ],
            "vms": null,
            "networkAdapters": [],
            "cluster": {
                "id": "domain-c26",
                "parent": {
                    "kind": "Folder",
                    "id": "group-h23"
                },
                "revision": 1,
                "name": "mycluster",
                "selfLink": "providers/vsphere/c872d364-d62b-46f0-bd42-16799f40324e/clusters/domain-c26",
                "folder": "group-h23",
                "networks": [
                    {
                        "kind": "Network",
                        "id": "network-31"
                    },
                    {
                        "kind": "Network",
                        "id": "network-34"
                    },
                    {
                        "kind": "Network",
                        "id": "network-57"
                    },
                    {
                        "kind": "Network",
                        "id": "network-33"
                    },
                    {
                        "kind": "Network",
                        "id": "dvportgroup-47"
                    }
                ],
                "datastores": [
                    {
                        "kind": "Datastore",
                        "id": "datastore-35"
                    },
                    {
                        "kind": "Datastore",
                        "id": "datastore-63"
                    }
                ],
                "hosts": [
                    {
                        "kind": "Host",
                        "id": "host-44"
                    },
                    {
                        "kind": "Host",
                        "id": "host-29"
                    }
                ],
                "dasEnabled": false,
                "dasVms": [],
                "drsEnabled": true,
                "drsBehavior": "fullyAutomated",
                "drsVms": [],
                "datacenter": null
            }
        }
    }
}</programlisting>
						</para>
					</formalpara>
				</listitem>
			</orderedlist>
			<section xml:id="about-hooks-for-migration-plans_mtv">
				<title>About hooks for MTV migration plans</title>
				<simpara role="_abstract">
					You can add hooks to an Migration Toolkit for Virtualization (MTV) migration plan to perform automated operations on a VM, either before or after you migrate it.
				</simpara>
				<simpara>
					You can add hooks to Migration Toolkit for Virtualization (MTV) migration plans using either the MTV CLI or the MTV user interface, which is located in the Red Hat OpenShift web console.
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							<emphasis>Pre-migration</emphasis> hooks are hooks that perform operations on a VM that is located on a provider. This prepares the VM for migration.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<emphasis>Post-migration</emphasis> hooks are hooks that perform operations on a VM that has migrated to OpenShift Virtualization.
						</simpara>
					</listitem>
				</itemizedlist>
				<section xml:id="default-hook-image_mtv">
					<title>Default hook image</title>
					<simpara>
						The default hook image for an MTV hook is <literal>quay.io/kubev2v/hook-runner</literal>. The image is based on the Ansible Runner image with the addition of <literal>python-openshift</literal> to provide Ansible Kubernetes resources and a recent <literal>oc</literal> binary.
					</simpara>
				</section>
				<section xml:id="hook-execution_mtv">
					<title>Hook execution</title>
					<simpara>
						An Ansible Playbook that is provided as part of a migration hook is mounted into the hook container as a <literal>ConfigMap</literal>. The hook container is run as a job on the desired cluster in the <literal>openshift-mtv</literal> namespace using the <literal>ServiceAccount</literal> you choose.
					</simpara>
					<simpara>
						When you add a hook, you must specify the namespace where the <literal>Hook</literal> CR is located, the name of the hook, and whether the hook is a pre-migration hook or a post-migration hook.
					</simpara>
					<important>
						<simpara>
							In order for a hook to run on a VM, the VM must be started and available using SSH.
						</simpara>
					</important>
					<simpara>
						The illustration that follows shows the general process of using a migration hook. For specific procedures, see <link linkend="adding-migration-hook-via-ui_mtv">Adding a migration hook to a migration plan using the Red Hat OpenShift web console</link> and <link linkend="adding-migration-hook-via-cli_mtv">Adding a migration hook to a migration plan using the CLI</link>.
					</simpara>
					<figure>
						<title>Adding a hook to a migration plan</title>
						<mediaobject>
							<imageobject>
								<imagedata fileref="images/modules/images/migration_hook_process.png" format="PNG" />
							</imageobject>
							<textobject>
								<phrase>Adding a hook to a migration plan</phrase>
							</textobject>
						</mediaobject>
					</figure>
					<simpara>
						<emphasis role="strong">Process:</emphasis>
					</simpara>
					<orderedlist numeration="arabic">
						<listitem>
							<simpara>
								Input your Ansible hook and credentials.
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										Input an Ansible hook image to the MTV controller using either the UI or the CLI.
									</simpara>
									<itemizedlist>
										<listitem>
											<simpara>
												In the UI, specify the <literal>ansible-runner</literal> and enter the <literal>playbook.yml</literal> that contains the hook.
											</simpara>
										</listitem>
										<listitem>
											<simpara>
												In the CLI, input the hook image, which specifies the playbook that runs the hook.
											</simpara>
										</listitem>
									</itemizedlist>
								</listitem>
								<listitem>
									<simpara>
										If you need additional data to run the playbook inside the pod, such as SSH data, create a Secret that contains credentials for the VM. The Secret is not mounted to the pod, but is called by the playbook.
									</simpara>
									<note>
										<simpara>
											This Secret is not the same as the <literal>Secret</literal> CR that contains the credentials of your source provider.
										</simpara>
									</note>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								The MTV controller creates the <literal>ConfigMap</literal>, which contains:
							</simpara>
							<itemizedlist>
								<listitem>
									<simpara>
										<literal>workload.yml</literal>, which contains information about the VMs.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>playbook.yml</literal>, the raw string playbook you want to run.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										<literal>plan.yml</literal>, which is the <literal>Plan</literal> CR.
									</simpara>
									<simpara>
										The <literal>ConfigMap</literal> contains the name of the VM and instructs the playbook what to do.
									</simpara>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem>
							<simpara>
								The MTV controller creates a job that starts the user specified image.
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										Mounts the <literal>ConfigMap</literal> to the container.
									</simpara>
									<simpara>
										The Ansible hook imports the Secret that the user previously entered.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
						<listitem>
							<simpara>
								The job runs a pre-migration hook or a post-migration hook as follows:
							</simpara>
							<orderedlist numeration="loweralpha">
								<listitem>
									<simpara>
										For a pre-migration hook, the job logs into the VMs on the source provider using SSH and runs the hook.
									</simpara>
								</listitem>
								<listitem>
									<simpara>
										For a post-migration hook, the job logs into the VMs on OpenShift Virtualization using SSH and runs the hook.
									</simpara>
								</listitem>
							</orderedlist>
						</listitem>
					</orderedlist>
				</section>
			</section>
			<section xml:id="adding-migration-hook-via-ui_mtv">
				<title>Adding a migration hook to a migration plan using the Red Hat OpenShift web console</title>
				<simpara role="_abstract">
					You can add a migration hook to an existing migration plan by using the Red Hat OpenShift web console.
				</simpara>
				<note>
					<simpara>
						You need to run one command in the Migration Toolkit for Virtualization (MTV) CLI.
					</simpara>
				</note>
				<simpara>
					For example, you can create a hook to install the <literal>cloud-init</literal> service on a VM and write a file before migration.
				</simpara>
				<note>
					<simpara>
						You can run one pre-migration hook, one post-migration hook, or one of each per migration plan.
					</simpara>
				</note>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							Migration plan
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Migration hook file, whose contents you copy and paste into the web console
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							File containing the <literal>Secret</literal> for the source provider
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Red Hat OpenShift service account called by the hook and that has at least write access for the namespace you are working in
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							SSH access for VMs you want to migrate with the public key installed on the VMs
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							VMs running on Microsoft Server only: Remote Execution enabled
						</simpara>
					</listitem>
				</itemizedlist>
				<formalpara>
					<title>Additional resources</title>
					<para>
						For instructions for creating a service account, see <link xlink:href="https://docs.openshift.com/container-platform/4.19/authentication/understanding-and-creating-service-accounts.html">Understanding and creating service accounts</link>.
					</para>
				</formalpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							In the Red Hat OpenShift web console, click <emphasis role="strong">Migration</emphasis> &gt; <emphasis role="strong">Plans for virtualization</emphasis> and then click the migration plan you want to add the hook to.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Click <emphasis role="strong">Hooks</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							For a pre-migration hook, perform the following steps:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									In the <emphasis role="strong">Pre migration hook</emphasis> section, toggle the <emphasis role="strong">Enable hook</emphasis> switch to <emphasis role="strong">Enable pre migration hook</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Enter the <emphasis role="strong">Hook runner image</emphasis>. If you are specifying the <literal>spec.playbook</literal>, you need to use an image that has an <literal>ansible-runner</literal>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Paste your hook as a YAML file in the <emphasis role="strong">Ansible playbook</emphasis> text box.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
					<listitem>
						<simpara>
							For a post-migration hook, perform the following steps:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									In the <emphasis role="strong">Post migration hook</emphasis>, toggle the <emphasis role="strong">Enable hook</emphasis> switch <emphasis role="strong">Enable post migration hook</emphasis>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Enter the <emphasis role="strong">Hook runner image</emphasis>. If you are specifying the <literal>spec.playbook</literal>, you need to use an image that has an <literal>ansible-runner</literal>.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Paste your hook as a YAML file in the <emphasis role="strong">Ansible playbook</emphasis> text box.
								</simpara>
							</listitem>
						</orderedlist>
					</listitem>
					<listitem>
						<simpara>
							At the top of the tab, click <emphasis role="strong">Update hooks</emphasis>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							In a terminal, enter the following command to associate each hook with your Red Hat OpenShift service account:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ oc -n openshift-mtv patch hook &lt;name_of_hook&gt; \
  -p '{"spec":{"serviceAccount":"&lt;service_account&gt;"}}' --type merge</programlisting>
					</listitem>
				</orderedlist>
				<simpara>
					The example migration hook that follows ensures that the VM can be accessed using SSH, creates an SSH key, and runs 2 tasks: stopping the Maria database and generating a text file.
				</simpara>
				<formalpara>
					<title>Example migration hook</title>
					<para>
						
<programlisting language="yaml" linenumbering="unnumbered">- name: Main
  hosts: localhost
  vars_files:
    - plan.yml
    - workload.yml
  tasks:
  - k8s_info:
      api_version: v1
      kind: Secret
      name: privkey
      namespace: openshift-mtv
    register: ssh_credentials

  - name: Ensure SSH directory exists
    file:
      path: ~/.ssh
      state: directory
      mode: 0750

  - name: Create SSH key
    copy:
      dest: ~/.ssh/id_rsa
      content: "{{ ssh_credentials.resources[0].data.key | b64decode }}"
      mode: 0600

  - add_host:
      name: "{{ vm.ipaddress }}"  # ALT "{{ vm.guestnetworks[2].ip }}"
      ansible_user: root
      groups: vms

- hosts: vms
  vars_files:
    - plan.yml
    - workload.yml
  tasks:
  - name: Stop MariaDB
    service:
      name: mariadb
      state: stopped

  - name: Create Test File
    copy:
      dest: /premigration.txt
      content: "Migration from {{ provider.source.name }}
                of {{ vm.vm1.vm0.id }} has finished\n"
      mode: 0644</programlisting>
					</para>
				</formalpara>
			</section>
			<section xml:id="adding-migration-hook-via-cli_mtv">
				<title>Adding a migration hook to a migration plan using the CLI</title>
				<simpara role="_abstract">
					You can use a <literal>Hook</literal> CR to add a pre-migration hook or a post-migration hook to an existing migration plan by using the Migration Toolkit for Virtualization (MTV) CLI.
				</simpara>
				<simpara>
					For example, you can create a <literal>Hook</literal> custom resource (CR) to install the <literal>cloud-init</literal> service on a VM and write a file before migration.
				</simpara>
				<note>
					<simpara>
						You can run one pre-migration hook, one post-migration hook, or one of each per migration plan. Each hook needs its own <literal>Hook</literal> CR, but a <literal>Plan</literal> CR contains data for all the hooks it uses.
					</simpara>
				</note>
				<note>
					<simpara>
						You can retrieve additional information stored in a secret or in a <literal>ConfigMap</literal> by using a <literal>k8s</literal> module.
					</simpara>
				</note>
				<itemizedlist>
					<title>Prerequisites</title>
					<listitem>
						<simpara>
							Migration plan
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Migration hook image or the playbook containing the hook image
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							File containing the Secret for the source provider
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Red Hat OpenShift service account called by the hook and that has at least write access for the namespace you are working in
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							SSH access for VMs you want to migrate with the public key installed on the VMs
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							VMs running on Microsoft Server only: Remote Execution enabled
						</simpara>
					</listitem>
				</itemizedlist>
				<formalpara>
					<title>Additional resources</title>
					<para>
						For instructions for creating a service account, see <link xlink:href="https://docs.openshift.com/container-platform/4.19/authentication/understanding-and-creating-service-accounts.html">Understanding and creating service accounts</link>.
					</para>
				</formalpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							If needed, create a Secret with an SSH private key for the VM.
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									Choose an existing key or generate a key pair.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Install the public key on the VM.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Encode the private key in the Secret to base64.
								</simpara>
								
<programlisting language="yaml" linenumbering="unnumbered">apiVersion: v1
data:
  key: VGhpcyB3YXMgZ2Vu...
kind: Secret
metadata:
  name: ssh-credentials
  namespace: openshift-mtv
type: Opaque</programlisting>
							</listitem>
						</orderedlist>
					</listitem>
					<listitem>
						<simpara>
							Encode your playbook by concatenating a file and piping it for Base64 encoding, for example:
						</simpara>
						
<programlisting language="shell" linenumbering="unnumbered">$ cat playbook.yml | base64 -w0</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Create a Hook CR:
						</simpara>
						
<programlisting language="yaml" linenumbering="unnumbered">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: Hook
metadata:
  name: &lt;hook&gt;
  namespace: &lt;namespace&gt;
spec:
  image: quay.io/kubev2v/hook-runner
  serviceAccount:&lt;service account&gt; <co xml:id="CO64-1"></co>
  playbook: |
    LS0tCi0gbm... <co xml:id="CO64-2"></co>
EOF</programlisting>
						<calloutlist>
							<callout arearefs="CO64-1">
								<para>
									(Optional) Red Hat OpenShift service account. The <literal>serviceAccount</literal> must be provided if you want to manipulate any resources of the cluster.
								</para>
							</callout>
							<callout arearefs="CO64-2">
								<para>
									Base64-encoded Ansible Playbook. If you specify a playbook, the <literal>image</literal> must include an <literal>ansible-runner</literal>.
								</para>
							</callout>
						</calloutlist>
						<note>
							<simpara>
								You can use the default <literal>hook-runner</literal> image or specify a custom image. If you specify a custom image, you do not have to specify a playbook.
							</simpara>
						</note>
						<note>
							<simpara>
								To decode an attached playbook, retrieve the resource with custom output and pipe it to base64. For example:
							</simpara>
							
<programlisting language="shell" linenumbering="unnumbered">$ oc get -n konveyor-forklift hook playbook -o \
    go-template='{{ .spec.playbook }}' | base64 -d</programlisting>
						</note>
					</listitem>
					<listitem>
						<simpara>
							In the <literal>Plan</literal> CR of the migration, for each VM, add the following section to the end of the CR:
						</simpara>
						
<programlisting language="yaml" linenumbering="unnumbered">  vms:
    - id: &lt;vm_id&gt;
      hooks:
        - hook:
            namespace: &lt;namespace&gt;
            name: &lt;name_of_hook&gt;
          step: &lt;type_of_hook&gt; <co xml:id="CO65-1"></co></programlisting>
						<calloutlist>
							<callout arearefs="CO65-1">
								<para>
									Options are <literal>PreHook</literal>, to run the hook before the migration, and <literal>PostHook</literal>, to run the hook after the migration.
								</para>
							</callout>
						</calloutlist>
					</listitem>
				</orderedlist>
				<important>
					<simpara>
						In order for a PreHook to run on a VM, the VM must be started and available via SSH.
					</simpara>
				</important>
				<simpara>
					The example migration hook that follows ensures that the VM can be accessed using SSH, creates an SSH key, and runs 2 tasks: stopping the Maria database and generating a text file.
				</simpara>
				<formalpara>
					<title>Example migration hook</title>
					<para>
						
<programlisting language="yaml" linenumbering="unnumbered">- name: Main
  hosts: localhost
  vars_files:
    - plan.yml
    - workload.yml
  tasks:
  - k8s_info:
      api_version: v1
      kind: Secret
      name: privkey
      namespace: openshift-mtv
    register: ssh_credentials

  - name: Ensure SSH directory exists
    file:
      path: ~/.ssh
      state: directory
      mode: 0750

  - name: Create SSH key
    copy:
      dest: ~/.ssh/id_rsa
      content: "{{ ssh_credentials.resources[0].data.key | b64decode }}"
      mode: 0600

  - add_host:
      name: "{{ vm.ipaddress }}"  # ALT "{{ vm.guestnetworks[2].ip }}"
      ansible_user: root
      groups: vms

- hosts: vms
  vars_files:
    - plan.yml
    - workload.yml
  tasks:
  - name: Stop MariaDB
    service:
      name: mariadb
      state: stopped

  - name: Create Test File
    copy:
      dest: /premigration.txt
      content: "Migration from {{ provider.source.name }}
                of {{ vm.vm1.vm0.id }} has finished\n"
      mode: 0644</programlisting>
					</para>
				</formalpara>
			</section>
		</section>
	</chapter>
	<chapter xml:id="upgrading-mtv-ui_mtv">
		<title>Upgrading the Migration Toolkit for Virtualization</title>
		<simpara role="_abstract">
			You can upgrade the MTV Operator by using the Red Hat OpenShift web console to install the new version.
		</simpara>
		<orderedlist numeration="arabic">
			<title>Procedure</title>
			<listitem>
				<simpara>
					In the Red Hat OpenShift web console, click <emphasis role="strong">Operators</emphasis> → <emphasis role="strong">Installed Operators</emphasis> → <emphasis role="strong">Migration Toolkit for Virtualization Operator</emphasis> → <emphasis role="strong">Subscription</emphasis>.
				</simpara>
			</listitem>
			<listitem>
				<simpara>
					Change the update channel to the correct release.
				</simpara>
				<simpara>
					See <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/operators/administrator-tasks#olm-changing-update-channel_olm-upgrading-operators">Changing update channel</link> in the Red Hat OpenShift documentation.
				</simpara>
			</listitem>
			<listitem>
				<simpara>
					Confirm that <emphasis role="strong">Upgrade status</emphasis> changes from <emphasis role="strong">Up to date</emphasis> to <emphasis role="strong">Upgrade available</emphasis>. If it does not, restart the <literal>CatalogSource</literal> pod:
				</simpara>
				<orderedlist numeration="loweralpha">
					<listitem>
						<simpara>
							Note the catalog source, for example, <literal>redhat-operators</literal>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							From the command line, retrieve the catalog source pod:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ oc get pod -n openshift-marketplace | grep &lt;catalog_source&gt;</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Delete the pod:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">$ oc delete pod -n openshift-marketplace &lt;catalog_source_pod&gt;</programlisting>
						<simpara>
							<emphasis role="strong">Upgrade status</emphasis> changes from <emphasis role="strong">Up to date</emphasis> to <emphasis role="strong">Upgrade available</emphasis>.
						</simpara>
						<simpara>
							If you set <emphasis role="strong">Update approval</emphasis> on the <emphasis role="strong">Subscriptions</emphasis> tab to <emphasis role="strong">Automatic</emphasis>, the upgrade starts automatically.
						</simpara>
					</listitem>
				</orderedlist>
			</listitem>
			<listitem>
				<simpara>
					If you set <emphasis role="strong">Update approval</emphasis> on the <emphasis role="strong">Subscriptions</emphasis> tab to <emphasis role="strong">Manual</emphasis>, approve the upgrade.
				</simpara>
				<simpara>
					See <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/operators/administrator-tasks#olm-approving-pending-upgrade_olm-upgrading-operators">Manually approving a pending upgrade</link> in the Red Hat OpenShift documentation.
				</simpara>
			</listitem>
			<listitem>
				<simpara>
					If you are upgrading from MTV 2.2 and have defined VMware source providers, edit the VMware provider by adding a VDDK <literal>init</literal> image. Otherwise, the update will change the state of any VMware providers to <literal>Critical</literal>. For more information, see <link xlink:href="https://access.redhat.com/documentation/en-us/migration_toolkit_for_virtualization/2.4/html/installing_and_using_the_migration_toolkit_for_virtualization/migrating-vms-web-console#adding-source-provider_vmware">Adding a VMSphere source provider</link>.
				</simpara>
			</listitem>
			<listitem>
				<simpara>
					If you mapped to NFS on the Red Hat OpenShift destination provider in MTV 2.2, edit the <literal>AccessModes</literal> and <literal>VolumeMode</literal> parameters in the NFS storage profile. Otherwise, the upgrade will invalidate the NFS mapping. For more information, see <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.9/html-single/virtualization/index#virt-customizing-storage-profile_virt-creating-data-volumes">Customizing the storage profile</link>.
				</simpara>
			</listitem>
		</orderedlist>
	</chapter>
	<chapter xml:id="uninstalling-mtv_mtv">
		<title>Uninstalling the Migration Toolkit for Virtualization</title>
		<simpara>
			You can uninstall the Migration Toolkit for Virtualization (MTV) by using the Red Hat OpenShift web console or the command-line interface (CLI).
		</simpara>
		<section xml:id="uninstalling-mtv-ui_mtv">
			<title>Uninstalling MTV by using the Red Hat OpenShift web console</title>
			<simpara role="_abstract">
				You can uninstall Migration Toolkit for Virtualization (MTV) by using the Red Hat OpenShift web console.
			</simpara>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						You must be logged in as a user with <literal>cluster-admin</literal> privileges.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Operators &gt; Installed Operators</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Migration Toolkit for Virtualization Operator</emphasis>.
					</simpara>
					<simpara>
						The <emphasis role="strong">Operator Details</emphasis> page opens in the <emphasis role="strong">Details</emphasis> tab.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click the <emphasis role="strong">ForkliftController</emphasis> tab.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Actions</emphasis> and select <emphasis role="strong">Delete ForkLiftController</emphasis>.
					</simpara>
					<simpara>
						A confirmation window opens.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Delete</emphasis>.
					</simpara>
					<simpara>
						The controller is removed.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Open the <emphasis role="strong">Details</emphasis> tab.
					</simpara>
					<simpara>
						The <emphasis role="strong">Create ForkliftController</emphasis> button appears instead of the controller you deleted. There is no need to click it.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the upper-right side of the page, click <emphasis role="strong">Actions</emphasis> and select <emphasis role="strong">Uninstall Operator</emphasis>.
					</simpara>
					<simpara>
						A confirmation window opens, displaying any operand instances.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						To delete all instances, select the <emphasis role="strong">Delete all operand instances for this operator</emphasis> checkbox. By default, the checkbox is cleared.
					</simpara>
					<important>
						<simpara>
							If your Operator configured off-cluster resources, these will continue to run and will require manual cleanup.
						</simpara>
					</important>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Uninstall</emphasis>.
					</simpara>
					<simpara>
						The <emphasis role="strong">Installed Operators</emphasis> page opens, and the Migration Toolkit for Virtualization Operator is removed from the list of installed Operators.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Home &gt; Overview</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						In the <emphasis role="strong">Status</emphasis> section of the page, click <emphasis role="strong">Dynamic Plugins</emphasis>.
					</simpara>
					<simpara>
						The <emphasis role="strong">Dynamic Plugins</emphasis> pop-up opens, listing <emphasis role="strong">forklift-console-plugin</emphasis> as a failed plugin. If the <emphasis role="strong">forklift-console-plugin</emphasis> does not appear as a failed plugin, refresh the web console.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">forklift-console-plugin</emphasis>.
					</simpara>
					<simpara>
						The <emphasis role="strong">ConsolePlugin details</emphasis> page opens in the <emphasis role="strong">Details</emphasis> tab.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						On the upper right side of the page, click <emphasis role="strong">Actions</emphasis> and select <emphasis role="strong">Delete ConsolePlugin</emphasis> from the list.
					</simpara>
					<simpara>
						A confirmation window opens.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Delete</emphasis>.
					</simpara>
					<simpara>
						The plugin is removed from the list of <emphasis role="strong">Dynamic plugins</emphasis> on the <emphasis role="strong">Overview</emphasis> page. If the plugin still appears, restart the <emphasis role="strong">Overview</emphasis> page.
					</simpara>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="uninstalling-mtv-cli_mtv">
			<title>Uninstalling MTV from the command line</title>
			<simpara role="_abstract">
				You can uninstall Migration Toolkit for Virtualization (MTV) from the command line.
			</simpara>
			<note>
				<simpara>
					This action does not remove resources managed by the MTV Operator, including custom resource definitions (CRDs) and custom resources (CRs). To remove these after uninstalling the MTV Operator, you might need to manually delete the MTV Operator CRDs.
				</simpara>
			</note>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						You must be logged in as a user with <literal>cluster-admin</literal> privileges.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Delete the <literal>forklift</literal> controller by running the following command:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ oc delete ForkliftController --all -n openshift-mtv</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Delete the subscription to the MTV Operator by running the following command:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ oc get subscription -o name|grep 'mtv-operator'| xargs oc delete</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Delete the <literal>clusterserviceversion</literal> for the MTV Operator by running the following command:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ oc get clusterserviceversion -o name|grep 'mtv-operator'| xargs oc delete</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Delete the plugin console CR by running the following command:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ oc delete ConsolePlugin forklift-console-plugin</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Optional: Delete the custom resource definitions (CRDs) by running the following command:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">oc get crd -o name | grep 'forklift.konveyor.io' | xargs oc delete</programlisting>
				</listitem>
				<listitem>
					<simpara>
						Optional: Perform cleanup by deleting the MTV project by running the following command:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">oc delete project openshift-mtv</programlisting>
				</listitem>
			</orderedlist>
		</section>
	</chapter>
	<chapter xml:id="mtv-performance-recommendation_mtv">
		<title>MTV performance recommendations</title>
		<simpara role="_abstract">
			The purpose of this section is to share recommendations for efficient and effective migration of virtual machines (VMs) using Migration Toolkit for Virtualization (MTV), based on findings observed through testing.
		</simpara>
		<simpara>
			The data provided here was collected from testing in Red Hat labs and is provided for reference only. 
		</simpara>
		<simpara>
			Overall, these numbers should be considered to show the best-case scenarios.
		</simpara>
		<simpara>
			The observed performance of migration can differ from these results and depends on several factors.
		</simpara>
		<section xml:id="mtv-performance-storage-network_mtv">
			<title>Ensure fast storage and network speeds</title>
			<simpara>
				Ensure fast storage and network speeds, both for VMware and Red Hat OpenShift (OCP) environments.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						To perform fast migrations, VMware must have fast read access to datastores. Networking between VMware ESXi hosts should be fast, ensure a 10 GiB network connection, and avoid network bottlenecks.
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Extend the VMware network to the OCP Workers Interface network environment.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								It is important to ensure that the VMware network offers high throughput (10 Gigabit Ethernet) and rapid networking to guarantee that the reception rates align with the read rate of the ESXi datastore.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Be aware that the migration process uses significant network bandwidth and that the migration network is utilized. If other services use that network, it might have an impact on those services and their migration rates.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								For example, 200 to 325 MiB/s was the average network transfer rate from the <literal>vmnic</literal> for each ESXi host associated with transferring data to the OCP interface.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
			</itemizedlist>
		</section>
		<section xml:id="mtv-performance-datastore-read_mtv">
			<title>Ensure fast datastore read speeds to ensure efficient and performant migrations</title>
			<simpara>
				Datastores read rates impact the total transfer times, so it is essential to ensure fast reads are possible from the ESXi datastore to the ESXi host.  
			</simpara>
			<simpara>
				Example in numbers: 200 to 300 MiB/s was the average read rate for both vSphere and ESXi endpoints for a single ESXi server. When multiple ESXi servers are used, higher datastore read rates are possible.
			</simpara>
		</section>
		<section xml:id="mtv-performance-endpoint-types_mtv">
			<title>Endpoint types </title>
			<simpara>
				MTV 2.6 allows for the following vSphere provider options:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						ESXi endpoint (inventory and disk transfers from ESXi), introduced in MTV 2.6
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						vCenter Server endpoint; no networks for the ESXi host (inventory and disk transfers from vCenter)
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						vCenter endpoint and ESXi networks are available (inventory from vCenter, disk transfers from ESXi).
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				When transferring many VMs that are registered to multiple ESXi hosts, using the vCenter endpoint and ESXi network is suggested.
			</simpara>
			<note>
				<simpara>
					As of vSphere 7.0, ESXi hosts can label which network to use for Network Block Device (NBD) transport. This is accomplished by tagging the desired virtual network interface card (NIC) with the appropriate <literal>vSphereBackupNFC</literal> label. When this is done, MTV is able to use the ESXi interface for network transfer to OpenShift provided that the worker and ESXi host interfaces are reachable. This is especially useful when migration users might not have access to the ESXi credentials yet want to be able to control which ESXi interface is used for migration. 
				</simpara>
				<simpara>
					For more details, see: <link xlink:href="https://issues.redhat.com/browse/MTV-1230">(MTV-1230)</link>
				</simpara>
			</note>
			<simpara>
				You can use the following ESXi command, which designates interface <literal>vmk2</literal> for NBD backup:
			</simpara>
			
<programlisting language="terminal" linenumbering="unnumbered">esxcli network ip interface tag add -t vSphereBackupNFC -i vmk2</programlisting>
		</section>
		<section xml:id="mtv-performance-bios-profile_mtv">
			<title>Set ESXi hosts BIOS profile and ESXi Host Power Management for High Performance</title>
			<simpara>
				Where possible, ensure that hosts used to perform migrations are set with BIOS profiles related to maximum performance. Hosts which use Host Power Management controlled within vSphere should check that <literal>High Performance</literal> is set.
			</simpara>
			<simpara>
				Testing showed that when transferring more than 10 VMs with both BIOS and host power management set accordingly, migrations had an increase of 15 MiB in the average datastore read rate.
			</simpara>
		</section>
		<section xml:id="mtv-performance-network-loads_mtv">
			<title>Avoid additional network load on VMware networks</title>
			<simpara>
				You can reduce the network load on VMware networks by selecting the migration network when using the ESXi endpoint.
			</simpara>
			<simpara>
				By incorporating a virtualization provider, MTV enables the selection of a specific network, which is accessible on the ESXi hosts, for the purpose of migrating virtual machines to OpenShift. Selecting this migration network from the ESXi host in the MTV UI ensures that the transfer is performed using the selected network as an ESXi endpoint.
			</simpara>
			<simpara>
				It is imperative to ensure that the network selected has connectivity to the OCP interface, has adequate bandwidth for migrations, and that the network interface is not saturated.
			</simpara>
			<simpara>
				In environments with fast networks, such as 10GbE networks, migration network impacts can be expected to match the rate of ESXi datastore reads.
			</simpara>
		</section>
		<section xml:id="mtv-performance-concurrent-disk_mtv">
			<title>Control maximum concurrent disk migrations per ESXi host</title>
			<simpara>
				Set the <literal>MAX_VM_INFLIGHT MTV</literal> variable to control the maximum number of concurrent VMs transfers allowed for the ESXi host. 
			</simpara>
			<simpara>
				MTV allows for concurrency to be controlled using this variable; by default, it is set to 20.
			</simpara>
			<simpara>
				When setting <literal>MAX_VM_INFLIGHT</literal>, consider the number of maximum concurrent VMs transfers are required for ESXi hosts. It is important to consider the type of migration to be transferred concurrently. Warm migrations, which are defined by migrations of a running VM that will be migrated over a scheduled time.
			</simpara>
			<simpara>
				Warm migrations use snapshots to compare and migrate only the differences between previous snapshots of the disk. The migration of the differences between snapshots happens over specific intervals before a final cut-over of the running VM to OpenShift occurs. 
			</simpara>
			<simpara>
				In MTV 2.6, <literal>MAX_VM_INFLIGHT</literal> reserves one transfer slot per VM, regardless of current migration activity for a specific snapshot or the number of disks that belong to a single VM. The total set by <literal>MAX_VM_INFLIGHT</literal> is used to indicate how many concurrent VM tranfers per ESXi host is allowed.
			</simpara>
			<itemizedlist>
				<title>Example</title>
				<listitem>
					<simpara>
						<literal>MAX_VM_INFLIGHT = 20</literal> and 2 ESXi hosts defined in the provider mean each host can transfer 20 VMs.
					</simpara>
				</listitem>
			</itemizedlist>
		</section>
		<section xml:id="mtv-performance-multiple-vms-concurrently_mtv">
			<title>Migrations are completed faster when migrating multiple VMs concurrently</title>
			<simpara>
				When multiple VMs from a specific ESXi host are to be migrated, starting concurrent migrations for multiple VMs leads to faster migration times. 
			</simpara>
			<simpara>
				Testing demonstrated that migrating 10 VMs (each containing 35 GiB of data, with a total size of 50 GiB) from a single host is significantly faster than migrating the same number of VMs sequentially, one after another. 
			</simpara>
			<simpara>
				It is possible to increase concurrent migration to more than 10 virtual machines from a single host, but it does not show a significant improvement. 
			</simpara>
			<itemizedlist>
				<title>Examples</title>
				<listitem>
					<simpara>
						<emphasis role="strong">1 single disk VMs took 6 minutes, with migration rate of 100 MiB/s</emphasis>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">10 single disk VMs took 22 minutes, with migration rate of 272 MiB/s</emphasis>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">20 single disk VMs took 42 minutes, with migration rate of 284 MiB/s</emphasis>
					</simpara>
				</listitem>
			</itemizedlist>
			<note>
				<simpara>
					From the aforementioned examples, it is evident that the migration of 10 virtual machines simultaneously is three times faster than the migration of identical virtual machines in a sequential manner.
				</simpara>
				<simpara>
					The migration rate was almost the same when moving 10 or 20 virtual machines simultaneously.
				</simpara>
			</note>
		</section>
		<section xml:id="mtv-performance-multiple-hosts_mtv">
			<title>Migrations complete faster using multiple hosts</title>
			<simpara>
				Using multiple hosts with registered VMs equally distributed among the ESXi hosts used for migrations leads to faster migration times.
			</simpara>
			<simpara>
				Testing showed that when transferring more than 10 single disk VMS, each containing 35 GiB of data out of a total of 50G total, using an additional host can reduce migration time.
			</simpara>
			<itemizedlist>
				<title>Examples</title>
				<listitem>
					<simpara>
						<emphasis role="strong">80 single disk VMs, containing 35 GiB of data each, using a single host took 2 hours and 43 minutes, with a migration rate of 294 MiB/s.</emphasis>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">80 single disk VMs, containing 35 GiB of data each, using 8 ESXi hosts took 41 minutes, with a migration rate of 1,173 MiB/s.</emphasis>
					</simpara>
				</listitem>
			</itemizedlist>
			<note>
				<simpara>
					From the aforementioned examples, it is evident that migrating 80 VMs from 8 ESXi hosts, 10 from each host, concurrently is four times faster than running the same VMs from a single ESXi host. 
				</simpara>
				<simpara>
					Migrating a larger number of VMs from more than 8 ESXi hosts concurrently could potentially show increased performance. However, it was not tested and therefore not recommended.
				</simpara>
			</note>
		</section>
		<section xml:id="mtv-performance-multiple-migration-plans_mtv">
			<title>Multiple migration plans compared to a single large migration plan</title>
			<simpara>
				The maximum number of disks that can be referenced by a single migration plan is 500. For more details, see <link xlink:href="https://issues.redhat.com/browse/MTV-1203">(MTV-1203)</link>. 
			</simpara>
			<simpara>
				When attempting to migrate many VMs in a single migration plan, it can take some time for all migrations to start. By breaking up one migration plan into several migration plans, it is possible to start them at the same time.
			</simpara>
			<simpara>
				Comparing migrations of:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						500 VMs using 8 ESXi hosts in 1 plan, <literal>max_vm_inflight=100</literal>, took 5 hours and 10 minutes.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						800 VMs using 8 ESXi hosts with 8 plans, <literal>max_vm_inflight=100</literal>, took 57 minutes.
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				Testing showed that by breaking one single large plan into multiple moderately sized plans, for example, by using 100 VMs per plan, the total migration time can be reduced.
			</simpara>
		</section>
		<section xml:id="mtv-performance-max-values-cold_mtv">
			<title>Maximum values tested for cold migrations</title>
			<itemizedlist>
				<listitem>
					<simpara>
						Maximum number of ESXi hosts tested: 8
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maximum number of VMs in a single migration plan: 500
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maximum number of VMs migrated in a single test: 5000
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maximum number of migration plans performed concurrently: 40
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maximum single disk size migrated: 6 TB disk, which contained 3 TB of data
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maximum number of disks on a single VM migrated: 50
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Highest observed single datastore read rate from a single ESXi server:  312 MiB/second
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Highest observed multi-datastore read rate using eight ESXi servers and two datastores: 1,242 MiB/second
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Highest observed virtual NIC transfer rate to an OpenShift worker: 327 MiB/second
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Maximum migration transfer rate of a single disk: 162 MiB/second (rate observed when transferring nonconcurrent migration of 1.5 TB utilized data)</emphasis>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Maximum cold migration transfer rate of the multiple VMs (single disk) from a single ESXi host: 294 MiB/s (concurrent migration of 30 VMs, 35/50 GiB used, from Single ESXi)</emphasis>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Maximum cold migration transfer rate of the multiple VMs (single disk) from multiple ESXi hosts: 1173MB/s (concurrent migration of 80 VMs, 35/50 GiB used, from 8 ESXi servers, 10 VMs from each ESXi)</emphasis>
					</simpara>
				</listitem>
			</itemizedlist>
		</section>
		<section xml:id="mtv-warm-migration-recommendations_mtv">
			<title>Warm migration recommendations</title>
			<simpara>
				The following recommendations are specific to warm migrations:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Migrate up to 400 disks in parallel
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				Testing involved migrating 200 VMs in parallel, with 2 disks each using 8 ESXi hosts, for a total of 400 disks. No tests were run on migration plans migrating over 400 disks in parallel, so it is not recommended to migrate over this number of disks in parallel.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Migrate up to 200 disks in parallel for the fastest rate
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				Testing was successfully performed on parallel disk migrations with 200, 300, and 400 disks. There was a decrease in the precopy migration rate, approximately 25%, between the tests migrating 200 disks and those migrating 300 and 400 disks.
			</simpara>
			<simpara>
				Therefore, it is recommended to perform parallel disk migrations in groups of 200 or fewer, instead of 300 to 400 disks, unless a decline of 25% in precopy speed does not affect your cutover planning.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						When possible, set cutover time to be immediately after a migration plan starts
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				To reduce the overall time of warm migrations, it is recommended to set the cutover to occur immediately after the migration plan is started. This causes MTV to run <emphasis role="strong">only one</emphasis> precopy per VM. This recommendation is valid, no matter how many VMs are in the migration plan.
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Increase precopy intervals between snapshots
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				If you are creating many migration plans with a single VM and have enough time between the migration start and the cutover, increase the value of the <literal>controller_precopy_interval</literal> parameter to between 120 and 240 minutes, inclusive. The longer setting will reduce the total number of snapshots and disk transfers per VM before the cutover.
			</simpara>
		</section>
		<section xml:id="mtv-performance-max-values-warm_mtv">
			<title>Maximum values tested for warm migrations</title>
			<itemizedlist>
				<listitem>
					<simpara>
						Maximum number of ESXi hosts tested: 8
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maximum number of worker nodes: 12
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maximum number of VMs in a single migration plan: 200
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maximum number of total parallel disk transfers: 400, with 200 VMs, 6 ESXis, and a transfer rate of 667 MB/s
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maximum single disk size migrated: 6 TB disk, which contained 3 TB of data
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maximum number of disks on a single VM migrated: 3
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Maximum number of parallel disk transfers per ESXi host: 68
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Maximum transfer rate observed of a single disk with no concurrent migrations: 76.5 MB/s</emphasis>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Maximum transfer rate observed of multiple disks from a single ESXi host: 253 MB/s (concurrent migration of 10 VMs, 1 disk each, 35/50 GiB used per disk)</emphasis>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<emphasis role="strong">Total transfer rate observed of multiple disks (210) from 8 ESXi hosts: 802 MB/s (concurrent migration of 70 VMs, 3 disks each, 35/50 GiB used per disk)</emphasis>
					</simpara>
				</listitem>
			</itemizedlist>
		</section>
		<section xml:id="mtv-precommendations-vms-large-disks_mtv">
			<title>Recommendations for migrating VMs with large disks</title>
			<simpara>
				The following recommendations are suggested for VMs with data on disk totaling to 1 TB or greater for each individual disk:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Schedule appropriate maintenance windows for migrating large disk virtual machines (VMs). Such migrations are sensitive operations and might require careful planning of maintenance windows and downtime, especially during periods of lower storage and network activity.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Check that no other migration activities or other heavy network or storage activities are run during those large virtual machine (VM) migrations. You should treat these large virtual machine migrations as a special case. During those migrations, prioritize MTV activities. Plan to migrate those VMs to a time when there are fewer activities on those VMs and related datastore.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						For large VMs with a high churn rate, which means data is frequently changed in amounts of 100 GB or more between snapshots, consider reducing the warm migration <literal>controller_precopy_interval</literal> from the default, which is 60 minutes. It is important to ensure that this process is started at least 24 hours before the scheduled cutover to allow for multiple successful precopy snapshots to complete. When scheduling the cutover, ensure that the maintenance window allows for enough time for the last snapshot of changes to be copied over and that the cutover process begins at the beginning of that maintenance window.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						In cases of particularly large single-disk VMs, where some downtime is possible, select cold migrations rather than warm migrations, especially in the case of large VM snapshots.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Consider splitting data on particularly large disks to multiple disks, which enables parallel disk migration with MTV when warm migration is used.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If you have large database disks with continuous writes of large amounts of data, where downtime and VM snapshots are not possible, it might be necessary to consider database vendor-specific replication options of the database data to target these specific migrations outside MTV. Consult the vendor-specific options of your database if this case applies.
					</simpara>
				</listitem>
			</itemizedlist>
		</section>
		<section xml:id="mtv-aio-buffer_mtv">
			<title>Increasing AIO sizes and buffer counts for NBD transport mode</title>
			<simpara role="_abstract">
				You can change Network Block Device (NBD) transport network file copy (NFC) parameters to increase migration performance when you use Asynchronous Input/Output (AIO) buffering with the Migration Toolkit for Virtualization (MTV).
			</simpara>
			<warning>
				<simpara>
					Using AIO buffering is only suitable for cold migration use cases.
				</simpara>
				<simpara>
					Disable AIO settings before initializing warm migrations. For more details, see <link linkend="mtv-disable-aio-buffer_mtv">Disabling AIO Buffer Configuration</link>.
				</simpara>
			</warning>
			<section xml:id="mtv-aio-buffer-key-findings_mtv">
				<title>Key findings</title>
				<itemizedlist>
					<listitem>
						<simpara>
							The best migration performance was achieved by migrating multiple (10) virtual machines (VMs) on a single ESXi host with the following values:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									<literal>VixDiskLib.nfcAio.Session.BufSizeIn64KB=16</literal>
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									<literal>vixDiskLib.nfcAio.Session.BufCount=4</literal>
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							The following improvements were noted when using AIO buffer settings (asynchronous buffer counts):
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Migration time was reduced by <emphasis role="strong">31.1%</emphasis>, from 0:24:32 to 0:16:54.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Read rate was increased from 347.83 MB/s to 504.93 MB/s.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							There was no significant improvement observed when using AIO buffer settings with a single VM.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							There was no significant improvement observed when using AIO buffer settings with multiple VMs from multiple hosts.
						</simpara>
					</listitem>
				</itemizedlist>
			</section>
			<section xml:id="mtv-aio-buffer-key-requirements_mtv">
				<title>Key requirements for support for AIO sizes and buffer counts</title>
				<simpara>
					Support is based upon tests performed using the following versions:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							vSphere 7.0.3
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							VDDK 7.0.3
						</simpara>
					</listitem>
				</itemizedlist>
			</section>
			<section xml:id="mtv-enable-aio-buffer_mtv">
				<title>Enabling and configuring AIO buffering</title>
				<simpara role="_abstract">
					You can enable and configure Asynchronous Input/Output (AIO) buffering for use with the Migration Toolkit for Virtualization (MTV).
				</simpara>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							Ensure that the <literal>forklift-controller</literal> pod in the <literal>openshift-mtv</literal> namespace supports the AIO buffer values. Since the pod name prefix is dynamic, check the pod name by running the following command:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">oc get pods -n openshift-mtv | grep forklift-controller | awk '{print $1}'</programlisting>
						<simpara>
							For example, the output if the pod name prefix is "forklift-controller-667f57c8f8-qllnx" would be:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">forklift-controller-667f57c8f8-qllnx</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Check the environment variables of the pod by running the following command:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">oc get pod forklift-controller-667f57c8f8-qllnx -n openshift-mtv -o yaml</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Check for the following lines in the output:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">...
\- name: VIRT\_V2V\_EXTRA\_ARGS
\- name: VIRT\_V2V\_EXTRA\_CONF\_CONFIG\_MAP
...</programlisting>
					</listitem>
					<listitem>
						<simpara>
							In the <literal>openshift-mtv namespace</literal>, edit the <literal>ForkliftController</literal> custom resource (CR) by performing the following steps:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									Access the <literal>ForkliftController</literal> CR for editing by running the following command:
								</simpara>
								
<programlisting language="terminal" linenumbering="unnumbered">oc edit forkliftcontroller -n openshift-mtv</programlisting>
							</listitem>
							<listitem>
								<simpara>
									Add the following lines to the <literal>spec</literal> section of the <literal>ForkliftController</literal> CR:
								</simpara>
								
<programlisting language="terminal" linenumbering="unnumbered">virt_v2v_extra_args: "--vddk-config /mnt/extra-v2v-conf/input.conf"
virt_v2v_extra_conf_config_map: "perf"</programlisting>
							</listitem>
						</orderedlist>
					</listitem>
					<listitem>
						<simpara>
							Create the required config map <literal>perf</literal> by running the following command:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">oc -n openshift-mtv create cm perf</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Convert the desired buffer configuration values to Base64. For example, for 16/4, run the following command:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">echo -e "VixDiskLib.nfcAio.Session.BufSizeIn64KB=16\nvixDiskLib.nfcAio.Session.BufCount=4" | base64</programlisting>
						<simpara>
							The output will be similar to the following:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">Vml4RGlza0xpYi5uZmNBaW8uU2Vzc2lvbi5CdWZTaXplSW42NEtCPTE2CnZpeERpc2tMaWIubmZjQWlvLlNlc3Npb24uQnVmQ291bnQ9NAo=</programlisting>
					</listitem>
					<listitem>
						<simpara>
							In the config map <literal>perf</literal>, enter the Base64 string in the <literal>binaryData</literal> section, for example:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">apiVersion: v1
kind: ConfigMap
binaryData:
  input.conf: Vml4RGlza0xpYi5uZmNBaW8uU2Vzc2lvbi5CdWZTaXplSW42NEtCPTE2CnZpeERpc2tMaWIubmZjQWlvLlNlc3Npb24uQnVmQ291bnQ9NAo=
metadata:
  name: perf
  namespace: openshift-mtv</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Restart the <literal>forklift-controller</literal> pod to apply the new configuration.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Ensure the <literal>VIRT_V2V_EXTRA_ARGS</literal> environment variable reflects the updated settings.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Run a migration plan and check the logs of the migration pod. Confirm that the AIO buffer settings are passed as parameters, particularly the <literal>--vddk-config</literal> value.
						</simpara>
						<simpara>
							For example, if you run the following command:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">exec: /usr/bin/virt-v2v … --vddk-config /mnt/extra-v2v-conf/input.conf</programlisting>
						<simpara>
							The logs include a section similar to the following, if <literal>debug_level = 4</literal>:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">Buffer size calc for 16 value:
(16 * 64 * 1024 = 1048576)
nbdkit: vddk[1]: debug: [NFC VERBOSE] NfcAio_OpenSession:
Opening an AIO session.
nbdkit: vddk[1]: debug: [NFC INFO] NfcAioInitSession:
Disabling
read-ahead buffer since the AIO buffer size of 1048576 is &gt;=
the read-ahead buffer size of 65536. Explicitly setting flag
'`NFC_AIO_SESSION_NO_NET_READ_AHEAD`'
nbdkit: vddk[1]: debug: [NFC VERBOSE] NfcAioInitSession: AIO Buffer Size is 1048576
nbdkit: vddk[1]: debug: [NFC VERBOSE] NfcAioInitSession: AIO Buffer
Count is 4</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Verify that the correct config map values are in the migration pod. Do this by logging into the migration pod and running the following command:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">cat /mnt/extra-v2v-conf/input.conf</programlisting>
						<simpara>
							Example output is as follows:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">VixDiskLib.nfcAio.Session.BufSizeIn64KB=16
vixDiskLib.nfcAio.Session.BufCount=4</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Optional: Enable debug logs by running the following command. The command converts the configuration to Base64, including a high log level:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">echo -e
"`VixDiskLib.nfcAio.Session.BufSizeIn64KB=16\nVixDiskLib.nfcAio.Session.BufCount=4\nVixDiskLib.nfc.LogLevel=4`"
| base64</programlisting>
						<note>
							<simpara>
								Adding a high log level reduces performance and is for debugging purposes only.
							</simpara>
						</note>
					</listitem>
				</orderedlist>
			</section>
			<section xml:id="mtv-disable-aio-buffer_mtv">
				<title>Disabling AIO buffering</title>
				<simpara role="_abstract">
					You can disable AIO buffering for a cold migration using Migration Toolkit for Virtualization (MTV). You must disable AIO buffering for a warm migration using MTV.
				</simpara>
				<note>
					<simpara>
						The procedure that follows assumes the AIO buffering was enabled and configured according to the procedure in <link linkend="mtv-enable-aio-buffer_mtv">Enabling and configuring AIO buffering</link>.
					</simpara>
				</note>
				<orderedlist numeration="arabic">
					<title>Procedure</title>
					<listitem>
						<simpara>
							In the <literal>openshift-mtv namespace</literal>, edit the <literal>ForkliftController</literal> custom resource (CR) by performing the following steps:
						</simpara>
						<orderedlist numeration="loweralpha">
							<listitem>
								<simpara>
									Access the <literal>ForkliftController</literal> CR for editing by running the following command:
								</simpara>
								
<programlisting language="terminal" linenumbering="unnumbered">oc edit forkliftcontroller -n openshift-mtv</programlisting>
							</listitem>
							<listitem>
								<simpara>
									Remove the following lines from the <literal>spec</literal> section of the <literal>ForkliftController</literal> CR:
								</simpara>
								
<programlisting language="terminal" linenumbering="unnumbered">virt_v2v_extra_args: "`–vddk-config /mnt/extra-v2v-conf/input.conf`"
virt_v2v_extra_conf_config_map: "`perf`"</programlisting>
							</listitem>
						</orderedlist>
					</listitem>
					<listitem>
						<simpara>
							Delete the config map named <literal>perf</literal>:
						</simpara>
						
<programlisting language="terminal" linenumbering="unnumbered">oc delete cm perf -n openshift-mtv</programlisting>
					</listitem>
					<listitem>
						<simpara>
							Optional: Restart the <literal>forklift-controller</literal> pod to ensure that the changes took effect.
						</simpara>
					</listitem>
				</orderedlist>
			</section>
		</section>
	</chapter>
	<chapter xml:id="troubleshooting_mtv">
		<title>Troubleshooting</title>
		<simpara>
			This section provides information for troubleshooting common migration issues.
		</simpara>
		<section xml:id="error-messages_mtv">
			<title>Error messages</title>
			<simpara role="_abstract">
				This section describes error messages and how to resolve them.
			</simpara>
			<section xml:id="warm-import-retry-limit_mtv">
				<title>warm import retry limit reached</title>
				<simpara>
					The <literal>warm import retry limit reached</literal> error message is displayed during a warm migration if a VMware virtual machine (VM) has reached the maximum number (28) of changed block tracking (CBT) snapshots during the precopy stage.
				</simpara>
				<simpara>
					To resolve this problem, delete some of the CBT snapshots from the VM and restart the migration plan.
				</simpara>
			</section>
			<section xml:id="unable-resize-disk-image_mtv">
				<title>Unable to resize disk image to required size</title>
				<simpara>
					The <literal>Unable to resize disk image to required size</literal> error message is displayed when migration fails because a virtual machine on the target provider uses persistent volumes with an EXT4 file system on block storage. The problem occurs because the default overhead that is assumed by CDI does not completely include the reserved place for the root partition.
				</simpara>
				<simpara>
					To resolve this problem, increase the file system overhead in CDI to more than 10%.
				</simpara>
			</section>
		</section>
		<section xml:id="using-must-gather_mtv">
			<title>Using the must-gather tool</title>
			<simpara role="_abstract">
				You can collect logs and information about MTV custom resources (CRs) by using the <literal>must-gather</literal> tool. You must attach a <literal>must-gather</literal> data file to all customer cases.
			</simpara>
			<simpara>
				You can gather data for a specific namespace, migration plan, or virtual machine (VM) by using the filtering options.
			</simpara>
			<note>
				<simpara>
					If you specify a non-existent resource in the filtered <literal>must-gather</literal> command, no archive file is created.
				</simpara>
			</note>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						You must be logged in to the OpenShift Virtualization cluster as a user with the <literal>cluster-admin</literal> role.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						You must have the <link xlink:href="https://docs.openshift.com/container-platform/4.19/cli_reference/openshift_cli/getting-started-cli.html">Red Hat OpenShift CLI (<literal>oc</literal>)</link> installed.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Navigate to the directory where you want to store the <literal>must-gather</literal> data.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Run the <literal>oc adm must-gather</literal> command:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ oc adm must-gather --image=registry.redhat.io/migration-toolkit-virtualization/mtv-must-gather-rhel8:2.9.4</programlisting>
					<simpara>
						The data is saved as <literal>/must-gather/must-gather.tar.gz</literal>. You can upload this file to a support case on the <link xlink:href="https://access.redhat.com/">Red Hat Customer Portal</link>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Optional: Run the <literal>oc adm must-gather</literal> command with the following options to gather filtered data:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Namespace:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc adm must-gather --image=registry.redhat.io/migration-toolkit-virtualization/mtv-must-gather-rhel8:2.9.4 \
  -- NS=&lt;namespace&gt; /usr/bin/targeted</programlisting>
						</listitem>
						<listitem>
							<simpara>
								Migration plan:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc adm must-gather --image=registry.redhat.io/migration-toolkit-virtualization/mtv-must-gather-rhel8:2.9.4 \
  -- PLAN=&lt;migration_plan&gt; /usr/bin/targeted</programlisting>
						</listitem>
						<listitem>
							<simpara>
								Virtual machine:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc adm must-gather --image=registry.redhat.io/migration-toolkit-virtualization/mtv-must-gather-rhel8:2.9.4 \
  -- VM=&lt;vm_id&gt; NS=&lt;namespace&gt; /usr/bin/targeted <co xml:id="CO66-1"></co></programlisting>
							<calloutlist>
								<callout arearefs="CO66-1">
									<para>
										Specify the VM <emphasis>ID</emphasis> as it appears in the <literal>Plan</literal> CR.
									</para>
								</callout>
							</calloutlist>
						</listitem>
					</itemizedlist>
				</listitem>
			</orderedlist>
		</section>
	</chapter>
	<chapter xml:id="architecture_mtv">
		<title>Architecture</title>
		<simpara>
			This section describes MTV custom resources, services, and workflows.
		</simpara>
		<section xml:id="mtv-resources-and-services_mtv">
			<title>MTV custom resources and services</title>
			<simpara role="_abstract">
				The Migration Toolkit for Virtualization (MTV) is provided as an Red Hat OpenShift Operator. It creates and manages the following custom resources (CRs) and services.
			</simpara>
			<section remap="_mtv_custom_resources" xml:id="mtv_custom_resources">
				<title>MTV custom resources</title>
				<itemizedlist>
					<listitem>
						<simpara>
							<literal>Provider</literal> CR stores attributes that enable MTV to connect to and interact with the source and target providers.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<literal>NetworkMapping</literal> CR maps the networks of the source and target providers.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<literal>StorageMapping</literal> CR maps the storage of the source and target providers.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<literal>Plan</literal> CR contains a list of VMs with the same migration parameters and associated network and storage mappings.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<literal>Migration</literal> CR runs a migration plan.
						</simpara>
						<simpara>
							Only one <literal>Migration</literal> CR per migration plan can run at a given time. You can create multiple <literal>Migration</literal> CRs for a single <literal>Plan</literal> CR.
						</simpara>
					</listitem>
				</itemizedlist>
			</section>
			<section remap="_mtv_services" xml:id="mtv_services">
				<title>MTV services</title>
				<itemizedlist>
					<listitem>
						<simpara>
							The <literal>Inventory</literal> service performs the following actions:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Connects to the source and target providers.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Maintains a local inventory for mappings and plans.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Stores VM configurations.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Runs the <literal>Validation</literal> service if a VM configuration change is detected.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							The <literal>Validation</literal> service checks the suitability of a VM for migration by applying rules.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							The <literal>Migration Controller</literal> service orchestrates migrations.
						</simpara>
						<simpara>
							When you create a migration plan, the <literal>Migration Controller</literal> service validates the plan and adds a status label. If the plan fails validation, the plan status is <literal>Not ready</literal> and the plan cannot be used to perform a migration. If the plan passes validation, the plan status is <literal>Ready</literal> and it can be used to perform a migration. After a successful migration, the <literal>Migration Controller</literal> service changes the plan status to <literal>Completed</literal>.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							The <literal>Populator Controller</literal> service orchestrates disk transfers using Volume Populators.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							The <literal>Kubevirt Controller</literal> and <literal>Containerized Data Import (CDI) Controller</literal> services handle most technical operations.
						</simpara>
					</listitem>
				</itemizedlist>
			</section>
		</section>
		<section xml:id="mtv-workflow_mtv">
			<title>High-level migration workflow</title>
			<simpara role="_abstract">
				The high-level workflow shows the migration process from the point of view of the user:
			</simpara>
			<orderedlist numeration="arabic">
				<listitem>
					<simpara>
						You create a source provider, a target provider, a network mapping, and a storage mapping.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						You create a <literal>Plan</literal> custom resource (CR) that includes the following resources:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Source provider
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Target provider, if MTV is not installed on the target cluster
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Network mapping
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								Storage mapping
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								One or more virtual machines (VMs)
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						You run a migration plan by creating a <literal>Migration</literal> CR that references the <literal>Plan</literal> CR.
					</simpara>
					<simpara>
						If you cannot migrate all the VMs for any reason, you can create multiple <literal>Migration</literal> CRs for the same <literal>Plan</literal> CR until all VMs are migrated.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						For each VM in the <literal>Plan</literal> CR, the <literal>Migration Controller</literal> service records the VM migration progress in the <literal>Migration</literal> CR.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Once the data transfer for each VM in the <literal>Plan</literal> CR completes, the <literal>Migration Controller</literal> service creates a <literal>VirtualMachine</literal> CR.
					</simpara>
					<simpara>
						When all VMs have been migrated, the <literal>Migration Controller</literal> service updates the status of the <literal>Plan</literal> CR to <literal>Completed</literal>. The power state of each source VM is maintained after migration.
					</simpara>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="virt-migration-workflow_mtv">
			<title>Detailed migration workflow</title>
			<simpara role="_abstract">
				You can use the detailed migration workflow to troubleshoot a failed migration.
			</simpara>
			<simpara>
				The workflow describes the following steps:
			</simpara>
			<simpara>
				<emphasis role="strong">Warm Migration or migration to a remote OpenShift cluster:</emphasis>
			</simpara>
			<orderedlist numeration="arabic">
				<listitem>
					<simpara>
						When you create the <literal>Migration</literal> custom resource (CR) to run a migration plan, the <literal>Migration Controller</literal> service creates a <literal>DataVolume</literal> CR for each source VM disk.
					</simpara>
					<simpara>
						<emphasis role="strong">For each VM disk:</emphasis>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The <literal>Containerized Data Importer (CDI) Controller</literal> service creates a persistent volume claim (PVC) based on the parameters specified in the <literal>DataVolume</literal> CR.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If the <literal>StorageClass</literal> has a dynamic provisioner, the persistent volume (PV) is dynamically provisioned by the <literal>StorageClass</literal> provisioner.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The <literal>CDI Controller</literal> service creates an <literal>importer</literal> pod.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The <literal>importer</literal> pod streams the VM disk to the PV.
					</simpara>
					<simpara>
						<emphasis role="strong">After the VM disks are transferred:</emphasis>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The <literal>Migration Controller</literal> service creates a <literal>conversion</literal> pod with the PVCs attached to it when importing from VMware.
					</simpara>
					<simpara>
						The <literal>conversion</literal> pod runs <literal>virt-v2v</literal>, which installs and configures device drivers on the PVCs of the target VM.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The <literal>Migration Controller</literal> service creates a <literal>VirtualMachine</literal> CR for each source virtual machine (VM), connected to the PVCs.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If the VM ran on the source environment, the <literal>Migration Controller</literal> powers on the VM, the <literal>KubeVirt Controller</literal> service creates a <literal>virt-launcher</literal> pod and a <literal>VirtualMachineInstance</literal> CR.
					</simpara>
					<simpara>
						The <literal>virt-launcher</literal> pod runs <literal>QEMU-KVM</literal> with the PVCs attached as VM disks.
					</simpara>
				</listitem>
			</orderedlist>
			<simpara>
				<emphasis role="strong">Cold migration from RHV or OpenStack to the local OpenShift cluster:</emphasis>
			</simpara>
			<orderedlist numeration="arabic">
				<listitem>
					<simpara>
						When you create a <literal>Migration</literal> custom resource (CR) to run a migration plan, the <literal>Migration Controller</literal> service creates for each source VM disk a <literal>PersistentVolumeClaim</literal> CR, and an <literal>OvirtVolumePopulator</literal> when the source is RHV, or an <literal>OpenstackVolumePopulator</literal> CR when the source is OpenStack.
					</simpara>
					<simpara>
						<emphasis role="strong">For each VM disk:</emphasis>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The <literal>Populator Controller</literal> service creates a temporarily persistent volume claim (PVC).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If the <literal>StorageClass</literal> has a dynamic provisioner, the persistent volume (PV) is dynamically provisioned by the <literal>StorageClass</literal> provisioner.
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								The <literal>Migration Controller</literal> service creates a dummy pod to bind <emphasis role="strong">all PVCs</emphasis>. The name of the pod contains <literal>pvcinit</literal>.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						The <literal>Populator Controller</literal> service creates a <literal>populator</literal> pod.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The <literal>populator</literal> pod transfers the disk data to the PV.
					</simpara>
					<simpara>
						<emphasis role="strong">After the VM disks are transferred:</emphasis>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The temporary PVC is deleted, and the initial PVC points to the PV with the data.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The <literal>Migration Controller</literal> service creates a <literal>VirtualMachine</literal> CR for each source virtual machine (VM), connected to the PVCs.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If the VM ran on the source environment, the <literal>Migration Controller</literal> powers on the VM, the <literal>KubeVirt Controller</literal> service creates a <literal>virt-launcher</literal> pod and a <literal>VirtualMachineInstance</literal> CR.
					</simpara>
					<simpara>
						The <literal>virt-launcher</literal> pod runs <literal>QEMU-KVM</literal> with the PVCs attached as VM disks.
					</simpara>
				</listitem>
			</orderedlist>
			<simpara>
				<emphasis role="strong">Cold migration from VMware to the local OpenShift cluster:</emphasis>
			</simpara>
			<orderedlist numeration="arabic">
				<listitem>
					<simpara>
						When you create a <literal>Migration</literal> custom resource (CR) to run a migration plan, the <literal>Migration Controller</literal> service creates a <literal>DataVolume</literal> CR for each source VM disk.
					</simpara>
					<simpara>
						<emphasis role="strong">For each VM disk:</emphasis>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The <literal>Containerized Data Importer (CDI) Controller</literal> service creates a blank persistent volume claim (PVC) based on the parameters specified in the <literal>DataVolume</literal> CR.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If the <literal>StorageClass</literal> has a dynamic provisioner, the persistent volume (PV) is dynamically provisioned by the <literal>StorageClass</literal> provisioner.
					</simpara>
				</listitem>
			</orderedlist>
			<simpara>
				<emphasis role="strong">For all VM disks:</emphasis>
			</simpara>
			<orderedlist numeration="arabic">
				<listitem>
					<simpara>
						The <literal>Migration Controller</literal> service creates a dummy pod to bind <emphasis role="strong">all PVCs</emphasis>. The name of the pod contains <literal>pvcinit</literal>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The <literal>Migration Controller</literal> service creates a <literal>conversion</literal> pod for all PVCs.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The <literal>conversion</literal> pod runs <literal>virt-v2v</literal>, which converts the VM to the KVM hypervisor and transfers the disks' data to their corresponding PVs.
					</simpara>
					<simpara>
						<emphasis role="strong">After the VM disks are transferred:</emphasis>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						The <literal>Migration Controller</literal> service creates a <literal>VirtualMachine</literal> CR for each source virtual machine (VM), connected to the PVCs.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						If the VM ran on the source environment, the <literal>Migration Controller</literal> powers on the VM, the <literal>KubeVirt Controller</literal> service creates a <literal>virt-launcher</literal> pod and a <literal>VirtualMachineInstance</literal> CR.
					</simpara>
					<simpara>
						The <literal>virt-launcher</literal> pod runs <literal>QEMU-KVM</literal> with the PVCs attached as VM disks.
					</simpara>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="virt-v2v-mtv_mtv">
			<title>How MTV uses the virt-v2v tool</title>
			<simpara role="_abstract">
				The Migration Toolkit for Virtualization (MTV) uses the <literal>virt-v2v</literal> tool to convert the disk image of a virtual machine (VM) into a format compatible with OpenShift Virtualization. The tool makes migrations easier because it automatically performs the tasks needed to make your VMs work with OpenShift Virtualization. For example, enabling paravirtualized VirtIO drivers in the converted VM, if possible, and installing the QEMU guest agent.
			</simpara>
			<simpara>
				<literal>virt-v2v</literal> is included in Red Hat Enterprise Linux (RHEL) versions 7 and later.
			</simpara>
			<section xml:id="main-functions-virt-v2v-mtv_mtv">
				<title>Main functions of virt-v2v in MTV migrations</title>
				<simpara>
					During migration, MTV uses <literal>virt-v2v</literal> to collect metadata about VMs, make necessary changes to VM disks, and copy the disks containing the VMs to OpenShift Virtualization.
				</simpara>
				<simpara>
					<literal>virt-v2v</literal> makes the following changes to VM disks to prepare them for migration:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Additions:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Injection of VirtIO drivers, for example, network or disk drivers.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Preparation of hypervisor-specific tools or agents, for example, a QEMU guest agent installation.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Modification of boot configuration, for example, updated bootloader or boot entries.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
					<listitem>
						<simpara>
							Removals:
						</simpara>
						<itemizedlist>
							<listitem>
								<simpara>
									Unnecessary or former hypervisor-specific files, for example, VMware tools or VirtualBox additions.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Old network driver configurations, for example, removing VMware-specific NIC drivers.
								</simpara>
							</listitem>
							<listitem>
								<simpara>
									Configuration settings that are incompatible with the target system, for example, old boot settings.
								</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
				</itemizedlist>
				<simpara>
					If you are migrating from VMware or from Open Virtual Appliances (OVA) files, <literal>virt-v2v</literal> also sets their IP addresses either during the migration or during the first reboot of the VMs after migration. s
				</simpara>
				<note>
					<simpara>
						You can also run predefined Ansible hooks before or after a migration using MTV. For more information, see <link linkend="about-hooks-for-migration-plans_mtv">Adding hooks to an MTV migration plan</link>.
					</simpara>
					<simpara>
						These hooks do not necessarily use <literal>virt-v2v</literal>.
					</simpara>
				</note>
			</section>
			<section xml:id="customizing-removing-installing-virt-v2v_mtv">
				<title>Customizing, removing, and installing files</title>
				<simpara>
					MTV uses <literal>virt-v2v</literal> to perform additional guest customizations during the conversion, such as the following actions:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							Customization to preserve IP addresses
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							Customization to preserve drive letters
						</simpara>
					</listitem>
				</itemizedlist>
				<note>
					<simpara>
						For Red Hat Enterprise Linux (RHEL)-based guests, <literal>virt-v2v</literal> attempts to install the guest agent from the Red Hat registry. If the migration is run in a detached environment, the installation program fails, and you must use hooks or other automation to install the guest agent.
					</simpara>
				</note>
				<simpara>
					For more information, see the man reference pages:
				</simpara>
				<itemizedlist>
					<listitem>
						<simpara>
							<link xlink:href="https://libguestfs.org/virt-v2v.1.html"><literal>virt-v2v</literal> - Convert a guest to use KVM</link>
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<link xlink:href="https://libguestfs.org/virt-customize.1.html"><literal>virt-customize</literal> - Customize a virtual machine</link>
						</simpara>
					</listitem>
				</itemizedlist>
			</section>
			<section xml:id="permissions-virt-v2v_mtv">
				<title>Permissions and virt-v2v</title>
				<simpara>
					<literal>virt-v2v</literal> does not require permissions or access credentials for the guest operating system itself because <literal>virt-v2v</literal> is not run against a running VM, but only against the disks of a VM.
				</simpara>
			</section>
			<section xml:id="raw-copy-mode_mtv">
				<title>Raw copy mode</title>
				<simpara role="_abstract">
					In regular cold and warm migrations, Migration Toolkit for Virtualization (MTV) uses a program called <literal>virt-v2v</literal> to prepare virtual machines (VMs) for migration to OpenShift Virtualization after the VMs have been copied from their source provider.
				</simpara>
				<simpara>
					The main function of <literal>virt-v2v</literal> is to convert the disk image of a VM into a format compatible with OpenShift Virtualization. This program is described in detail in <link linkend="virt-v2v-mtv_mtv">How MTV uses the virt-v2v tool</link>. What is important to note here is that although <literal>virt-v2v</literal> is compatible with major operating systems such as recent versions of Red Hat Enterprise Linux, Windows, and Windows Server, it is not compatible with macOS and some other operating systems.
				</simpara>
				<note>
					<simpara>
						For a list of the operating systems that <literal>virt-v2v</literal> supports, see <link xlink:href="https://access.redhat.com/articles/1351473">Converting virtual machines from other hypervisors to KVM with virt-v2v in RHEL 7, RHEL 8, and RHEL 9</link>.
					</simpara>
				</note>
				<simpara>
					As a workaround for migrating VMs that use an operating system that <literal>virt-v2v</literal> does not support, MTV includes a feature called <emphasis>raw copy mode</emphasis>. Raw copy mode copies VMs without applying any tool to convert them for use with OpenShift Virtualization. The migrated VMs use emulated devices.
				</simpara>
				<simpara>
					This enables more robust migrations, enabling a wider range of operating systems and configurations. Examples are VMs with uncommon file systems, VMs with uncommon encryption technologies or without access to keys.
				</simpara>
				<simpara>
					However, VMs migrated using raw copy mode might not boot on OpenShift Virtualization or perform as well as VMs migrated in the regular way. VMs migrated using raw copy mode might not boot on OpenShift Virtualization or perform as well as VMs migrated in the regular way.
				</simpara>
				<simpara>
					Therefore, using raw copy mode is a tradeoff between being a more versatile migration option compared to increasing the risk of problems following migration.
				</simpara>
				<simpara>
					Because of this risk, users are asked to request that Red Hat support perform raw copy mode migrations.
				</simpara>
			</section>
		</section>
	</chapter>
	<chapter xml:id="logs-and-crs_mtv">
		<title>Logs and custom resources</title>
		<simpara>
			You can download logs and custom resource (CR) information for troubleshooting. For more information, see the <link linkend="virt-migration-workflow_mtv">detailed migration workflow</link>.
		</simpara>
		<section xml:id="collected-logs-cr-info_mtv">
			<title>Collected logs and custom resource information</title>
			<simpara role="_abstract">
				You can download logs and custom resource (CR) <literal>yaml</literal> files for the following targets by using the Red Hat OpenShift web console or the command-line interface (CLI):
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Migration plan: Web console or CLI.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Virtual machine: Web console or CLI.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Namespace: CLI only.
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				The <literal>must-gather</literal> tool collects the following logs and CR files in an archive file:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						CRs:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<literal>DataVolume</literal> CR: Represents a disk mounted on a migrated VM.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>VirtualMachine</literal> CR: Represents a migrated VM.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>Plan</literal> CR: Defines the VMs and storage and network mapping.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>Job</literal> CR: Optional: Represents a pre-migration hook, a post-migration hook, or both.
							</simpara>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<simpara>
						Logs:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								<literal>importer</literal> pod: Disk-to-data-volume conversion log. The <literal>importer</literal> pod naming convention is <literal>importer-&lt;migration_plan&gt;-&lt;vm_id&gt;&lt;5_char_id&gt;</literal>, for example, <literal>importer-mig-plan-ed90dfc6-9a17-4a8btnfh</literal>, where <literal>ed90dfc6-9a17-4a8</literal> is a truncated RHV VM ID and <literal>btnfh</literal> is the generated 5-character ID.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>conversion</literal> pod: VM conversion log. The <literal>conversion</literal> pod runs <literal>virt-v2v</literal>, which installs and configures device drivers on the PVCs of the VM. The <literal>conversion</literal> pod naming convention is <literal>&lt;migration_plan&gt;-&lt;vm_id&gt;&lt;5_char_id&gt;</literal>.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>virt-launcher</literal> pod: VM launcher log. When a migrated VM is powered on, the <literal>virt-launcher</literal> pod runs <literal>QEMU-KVM</literal> with the PVCs attached as VM disks.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>forklift-controller</literal> pod: The log is filtered for the migration plan, virtual machine, or namespace specified by the <literal>must-gather</literal> command.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>forklift-must-gather-api</literal> pod: The log is filtered for the migration plan, virtual machine, or namespace specified by the <literal>must-gather</literal> command.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
								<literal>hook-job</literal> pod: The log is filtered for hook jobs. The <literal>hook-job</literal> naming convention is <literal>&lt;migration_plan&gt;-&lt;vm_id&gt;&lt;5_char_id&gt;</literal>, for example, <literal>plan2j-vm-3696-posthook-4mx85</literal> or <literal>plan2j-vm-3696-prehook-mwqnl</literal>.
							</simpara>
							<note>
								<simpara>
									Empty or excluded log files are not included in the <literal>must-gather</literal> archive file.
								</simpara>
							</note>
						</listitem>
					</itemizedlist>
				</listitem>
			</itemizedlist>
			<formalpara>
				<title>Example must-gather archive structure for a VMware migration plan</title>
				<para>
					
<screen>must-gather
└── namespaces
    ├── target-vm-ns
    │   ├── crs
    │   │   ├── datavolume
    │   │   │   ├── mig-plan-vm-7595-tkhdz.yaml
    │   │   │   ├── mig-plan-vm-7595-5qvqp.yaml
    │   │   │   └── mig-plan-vm-8325-xccfw.yaml
    │   │   └── virtualmachine
    │   │       ├── test-test-rhel8-2disks2nics.yaml
    │   │       └── test-x2019.yaml
    │   └── logs
    │       ├── importer-mig-plan-vm-7595-tkhdz
    │       │   └── current.log
    │       ├── importer-mig-plan-vm-7595-5qvqp
    │       │   └── current.log
    │       ├── importer-mig-plan-vm-8325-xccfw
    │       │   └── current.log
    │       ├── mig-plan-vm-7595-4glzd
    │       │   └── current.log
    │       └── mig-plan-vm-8325-4zw49
    │           └── current.log
    └── openshift-mtv
        ├── crs
        │   └── plan
        │       └── mig-plan-cold.yaml
        └── logs
            ├── forklift-controller-67656d574-w74md
            │   └── current.log
            └── forklift-must-gather-api-89fc7f4b6-hlwb6
                └── current.log</screen>
				</para>
			</formalpara>
		</section>
		<section xml:id="accessing-logs-ui_mtv">
			<title>Downloading logs and custom resource information from the web console</title>
			<simpara role="_abstract">
				You can download logs and information about custom resources (CRs) for a completed, failed, or canceled migration plan or for migrated virtual machines (VMs) from the Red Hat OpenShift web console.
			</simpara>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						In the Red Hat OpenShift web console, click <emphasis role="strong">Migration</emphasis> → <emphasis role="strong">Plans for virtualization</emphasis>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Get logs</emphasis> beside a migration plan name.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						In the <emphasis role="strong">Get logs</emphasis> window, click <emphasis role="strong">Get logs</emphasis>.
					</simpara>
					<simpara>
						The logs are collected. A <literal>Log collection complete</literal> message is displayed.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Click <emphasis role="strong">Download logs</emphasis> to download the archive file.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						To download logs for a migrated VM, click a migration plan name and then click <emphasis role="strong">Get logs</emphasis> beside the VM.
					</simpara>
				</listitem>
			</orderedlist>
		</section>
		<section xml:id="accessing-logs-cli_mtv">
			<title>Accessing logs and custom resource information from the command line</title>
			<simpara role="_abstract">
				You can access logs and information about custom resources (CRs) from the command line by using the <literal>must-gather</literal> tool. You must attach a <literal>must-gather</literal> data file to all customer cases.
			</simpara>
			<simpara>
				You can gather data for a specific namespace, a completed, failed, or canceled migration plan, or a migrated virtual machine (VM) by using the filtering options.
			</simpara>
			<note>
				<simpara>
					If you specify a non-existent resource in the filtered <literal>must-gather</literal> command, no archive file is created.
				</simpara>
			</note>
			<itemizedlist>
				<title>Prerequisites</title>
				<listitem>
					<simpara>
						You must be logged in to the OpenShift Virtualization cluster as a user with the <literal>cluster-admin</literal> role.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						You must have the <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.19/html/cli_tools/openshift-cli-oc#cli-getting-started">Red Hat OpenShift CLI (<literal>oc</literal>)</link> installed.
					</simpara>
				</listitem>
			</itemizedlist>
			<orderedlist numeration="arabic">
				<title>Procedure</title>
				<listitem>
					<simpara>
						Navigate to the directory where you want to store the <literal>must-gather</literal> data.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Run the <literal>oc adm must-gather</literal> command:
					</simpara>
					
<programlisting language="terminal" linenumbering="unnumbered">$ oc adm must-gather --image=registry.redhat.io/migration-toolkit-virtualization/mtv-must-gather-rhel8:2.9.4</programlisting>
					<simpara>
						The data is saved as <literal>/must-gather/must-gather.tar.gz</literal>. You can upload this file to a support case on the <link xlink:href="https://access.redhat.com/">Red Hat Customer Portal</link>.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Optional: Run the <literal>oc adm must-gather</literal> command with the following options to gather filtered data:
					</simpara>
					<itemizedlist>
						<listitem>
							<simpara>
								Namespace:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc adm must-gather --image=registry.redhat.io/migration-toolkit-virtualization/mtv-must-gather-rhel8:2.9.4 \
  -- NS=&lt;namespace&gt; /usr/bin/targeted</programlisting>
						</listitem>
						<listitem>
							<simpara>
								Migration plan:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc adm must-gather --image=registry.redhat.io/migration-toolkit-virtualization/mtv-must-gather-rhel8:2.9.4 \
  -- PLAN=&lt;migration_plan&gt; /usr/bin/targeted</programlisting>
						</listitem>
						<listitem>
							<simpara>
								Virtual machine:
							</simpara>
							
<programlisting language="terminal" linenumbering="unnumbered">$ oc adm must-gather --image=registry.redhat.io/migration-toolkit-virtualization/mtv-must-gather-rhel8:2.9.4 \
  -- VM=&lt;vm_name&gt; NS=&lt;namespace&gt; /usr/bin/targeted <co xml:id="CO67-1"></co></programlisting>
							<calloutlist>
								<callout arearefs="CO67-1">
									<para>
										You must specify the VM <emphasis>name</emphasis>, not the VM ID, as it appears in the <literal>Plan</literal> CR.
									</para>
								</callout>
							</calloutlist>
						</listitem>
					</itemizedlist>
				</listitem>
			</orderedlist>
		</section>
	</chapter>
	<chapter xml:id="telemetry_mtv">
		<title>Telemetry</title>
		<section xml:id="mtv-telemetry_mtv">
			<title>Telemetry</title>
			<simpara role="_abstract">
				Red Hat uses telemetry to collect anonymous usage data from Migration Toolkit for Virtualization (MTV) installations to help us improve the usability and efficiency of MTV.
			</simpara>
			<simpara>
				MTV collects the following data:
			</simpara>
			<itemizedlist>
				<listitem>
					<simpara>
						Migration plan status: The number of migrations. Includes those that failed, succeeded, or were canceled.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Provider: The number of migrations per provider. Includes Red Hat Virtualization, vSphere, OpenStack, OVA, and OpenShift Virtualization providers.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Mode: The number of migrations by mode. Includes cold and warm migrations.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Target: The number of migrations by target. Includes local and remote migrations.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Plan ID: The ID number of the migration plan. The number is assigned by MTV.
					</simpara>
				</listitem>
			</itemizedlist>
			<simpara>
				Metrics are calculated every 10 seconds and are reported per week, per month, and per year.
			</simpara>
		</section>
	</chapter>
	<chapter xml:id="additional-information_mtv">
		<title>Additional information</title>
		<section xml:id="mtv-performance-addendum_mtv">
			<title>MTV performance addendum</title>
			<simpara>
				The data provided here was collected from testing in Red Hat labs and is provided for reference only. 
			</simpara>
			<simpara>
				Overall, these numbers should be considered to show the best-case scenarios.
			</simpara>
			<simpara>
				The observed performance of migration can differ from these results and depends on several factors.
			</simpara>
			<section xml:id="mtv-esxi-performance_mtv">
				<title>ESXi performance</title>
				<simpara role="_abstract">
					ESXi performance can be measured for a single ESXI host or for multiple ESXi hosts.
				</simpara>
				<section xml:id="mtv-single-esxi-host-performance_mtv">
					<title>Single ESXi host performance</title>
					<simpara>
						Test migration by using the same ESXi host.
					</simpara>
					<simpara>
						In each iteration, the total VMs increase to display the impact of concurrent migration on the duration.
					</simpara>
					<simpara>
						The results show that migration time is linear when increasing the total VMs (50 GiB disk, Utilization 70%).
					</simpara>
					<simpara>
						The optimal number of VMs per ESXi is 10.
					</simpara>
					<table colsep="1" frame="all" rowsep="1">
						<title>Single ESXi host tests</title>
						<?dbhtml table-width="100%"?><?dbfo table-width="100%"?><?dblatex table-width="100%"?>
						<tgroup cols="6">
							<colspec colname="col_1" colwidth="191*"></colspec>
							<colspec colname="col_2" colwidth="38*"></colspec>
							<colspec colname="col_3" colwidth="38*"></colspec>
							<colspec colname="col_4" colwidth="55*"></colspec>
							<colspec colname="col_5" colwidth="51*"></colspec>
							<colspec colname="col_6" colwidth="51*"></colspec>
							<thead>
								<row>
									<entry align="left" valign="top">Test Case Description</entry>
									<entry align="left" valign="top">MTV</entry>
									<entry align="left" valign="top">VDDK</entry>
									<entry align="left" valign="top">max_vm inflight</entry>
									<entry align="left" valign="top">Migration Type</entry>
									<entry align="left" valign="top">Total Duration</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Cold migration, 10 VMs, Single ESXi, Private Network (non-management network)
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										2.6
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										7.0.3
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										100
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										cold
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										0:21:39
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										cold migration, 20 VMs, Single ESXi, Private Network
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										2.6
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										7.0.3
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										100
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										cold
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										0:41:16
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Cold migration, 30 VMs, Single ESXi, Private Network
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										2.6
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										7.0.3
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										100
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										cold
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										1:00:59
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Cold migration, 40 VMs, Single ESXi, Private Network
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										2.6
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										7.0.3
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										100
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										cold
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										1:23:02
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Cold migration, 50 VMs, Single ESXi, Private Network
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										2.6
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										7.0.3
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										100
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										cold
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										1:46:24
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Cold migration, 80 VMs, Single ESXi, Private Network
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										2.6
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										7.0.3
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										100
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										cold
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										2:42:49
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Cold migration, 100 VMs, Single ESXi, Private Network
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										2.6
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										7.0.3
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										100
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										cold
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										3:25:15
									</simpara>
									</entry>
								</row>
							</tbody>
						</tgroup>
					</table>
				</section>
				<section xml:id="mtv-multiple-esxi-host-performance_mtv">
					<title>Multiple ESXi hosts and a single data store</title>
					<simpara>
						In each iteration, the number of ESXi hosts was increased, to show that increasing the number of ESXi hosts improves the migration time (50 GiB disk, Utilization 70%).
					</simpara>
					<table colsep="1" frame="all" rowsep="1">
						<title>Multiple ESXi hosts and single data store</title>
						<?dbhtml table-width="100%"?><?dbfo table-width="100%"?><?dblatex table-width="100%"?>
						<tgroup cols="6">
							<colspec colname="col_1" colwidth="191*"></colspec>
							<colspec colname="col_2" colwidth="38*"></colspec>
							<colspec colname="col_3" colwidth="38*"></colspec>
							<colspec colname="col_4" colwidth="55*"></colspec>
							<colspec colname="col_5" colwidth="51*"></colspec>
							<colspec colname="col_6" colwidth="51*"></colspec>
							<thead>
								<row>
									<entry align="left" valign="top">Test Case Description</entry>
									<entry align="left" valign="top">MTV</entry>
									<entry align="left" valign="top">VDDK</entry>
									<entry align="left" valign="top">max_vm inflight</entry>
									<entry align="left" valign="top">Migration Type</entry>
									<entry align="left" valign="top">Total Duration</entry>
								</row>
							</thead>
							<tbody>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Cold migration, 100 VMs, Single ESXi, Private Network (non-management network)
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										2.6
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										7.0.3
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										100
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										cold
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										3:25:15
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Cold migration, 100 VMs, 4 ESXs (25 VMs per ESX), Private Network
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										2.6
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										7.0.3
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										100
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										cold
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										1:22:27
									</simpara>
									</entry>
								</row>
								<row>
									<entry align="left" valign="top">
									<simpara>
										Cold migration, 100 VMs, 5 ESXs (20 VMs per ESX), Private Network, 1 Data Store
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										2.6
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										7.0.3
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										100
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										cold
									</simpara>
									</entry>
									<entry align="left" valign="top">
									<simpara>
										1:04:57
									</simpara>
									</entry>
								</row>
							</tbody>
						</tgroup>
					</table>
				</section>
			</section>
			<section xml:id="mtv-different-migration-network-performances_mtv">
				<title>Performance using different migration networks</title>
				<simpara role="_abstract">
					Each iteration the <literal>Migration Network</literal> was changed, by using the <emphasis role="strong">Provider</emphasis>, to find the fastest network for migration.
				</simpara>
				<simpara>
					The results indicate that there is no degradation by using management compared to non-management networks when all interfaces and network speeds are the same.
				</simpara>
				<table colsep="1" frame="all" rowsep="1">
					<title>Different migration network tests</title>
					<?dbhtml table-width="100%"?><?dbfo table-width="100%"?><?dblatex table-width="100%"?>
					<tgroup cols="6">
						<colspec colname="col_1" colwidth="191*"></colspec>
						<colspec colname="col_2" colwidth="38*"></colspec>
						<colspec colname="col_3" colwidth="38*"></colspec>
						<colspec colname="col_4" colwidth="55*"></colspec>
						<colspec colname="col_5" colwidth="51*"></colspec>
						<colspec colname="col_6" colwidth="51*"></colspec>
						<thead>
							<row>
								<entry align="left" valign="top">Test Case Description</entry>
								<entry align="left" valign="top">MTV</entry>
								<entry align="left" valign="top">VDDK</entry>
								<entry align="left" valign="top">max_vm inflight</entry>
								<entry align="left" valign="top">Migration Type</entry>
								<entry align="left" valign="top">Total Duration</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry align="left" valign="top">
								<simpara>
									Cold migration, 10 VMs, Single ESXi, MGMT Network
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									2.6
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									7.0.3
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									100
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									cold
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									0:21:30
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									Cold migration, 10 VMs, Single ESXi, Private Network (non-management network)
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									2.6
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									7.0.3
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									20
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									cold
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									0:21:20
								</simpara>
								</entry>
							</row>
							<row>
								<entry align="left" valign="top">
								<simpara>
									Cold migration, 10 VMs, Single ESXi, Default Network
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									2.6.2
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									7.0.3
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									20
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									cold
								</simpara>
								</entry>
								<entry align="left" valign="top">
								<simpara>
									0:21:30
								</simpara>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>
		</section>
	</chapter>
</book>

